<apex:page id="thePage" showHeader="false" sidebar="false" standardStylesheets="false" controller="CAMProcessController" action="{!getDocuments}">

<meta name="viewport" content="width=device-width, initial-scale=1"/>
<apex:stylesheet value="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.css"/>
<apex:stylesheet value="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
<apex:stylesheet value="{!URLFOR($Resource.sweetalert2, 'dist/sweetalert2.css')}"/>

<apex:includeScript value="https://code.jquery.com/jquery-3.3.1.js"/>
<apex:includeScript value="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"/>
<apex:includeScript value="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"/>
<apex:includeScript value="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"/> 
<apex:includeScript value="{!$Resource.bootbox}"/>
<apex:includeScript value="{!URLFOR($Resource.sweetalert2, 'dist/sweetalert2.min.js')}"/>
<apex:includeScript value="{!$Resource.APR}"/>

<style>
.multisteps-form__progress {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
}

.totalRefereeAddedCounter:hover {
    cursor:pointer;
}

.multisteps-form__progress-btn {
  transition-property: all;
  transition-duration: 0.15s;
  transition-timing-function: linear;
  transition-delay: 0s;
  position: relative;
  padding-top: 30px;
  color: rgba(108, 117, 125, 0.7);
  text-indent: -9999px;
  border: none;
  background-color: transparent;
  outline: none !important;
  cursor: pointer;
}

@media (min-width: 500px) {
  .multisteps-form__progress-btn {
    text-indent: 0;
  }
}

.multisteps-form__progress-btn:before {
  position: absolute;
  top: 0;
  left: 50%;
  display: block;
  width: 25px;
  height: 25px;
  content: '';
  -webkit-transform: translateX(-50%);
          transform: translateX(-50%);
  transition: all 0.15s linear 0s, -webkit-transform 0.15s cubic-bezier(0.05, 1.09, 0.16, 1.4) 0s;
  transition: all 0.15s linear 0s, transform 0.15s cubic-bezier(0.05, 1.09, 0.16, 1.4) 0s;
  transition: all 0.15s linear 0s, transform 0.15s cubic-bezier(0.05, 1.09, 0.16, 1.4) 0s, -webkit-transform 0.15s cubic-bezier(0.05, 1.09, 0.16, 1.4) 0s;
  border: 2px solid currentColor;
  border-radius: 50%;
  background-color: #fff;
  box-sizing: border-box;
  z-index: 3;
}

.multisteps-form__progress-btn:after {
  position: absolute;
  top: 13px;
  left: calc(-50% - 13px / 2);
  transition-property: all;
  transition-duration: 0.15s;
  transition-timing-function: linear;
  transition-delay: 0s;
  display: block;
  width: 100%;
  height: 2px;
  content: '';
  background-color: currentColor;
  z-index: 1;
}

.multisteps-form__progress-btn:first-child:after {
  display: none;
}

.multisteps-form__progress-btn.js-active {
  color: #007bff;
}

.multisteps-form__progress-btn.js-success {
  color: #5cb85c;
}

.multisteps-form__progress-btn.js-danger {
  color: #d9534f; 
}

.multisteps-form__progress-btn.js-active:before {
  -webkit-transform: translateX(-50%) scale(1.2);
          transform: translateX(-50%) scale(1.2);
  background-color: currentColor;
}

.multisteps-form__progress-btn.js-success:before {
  -webkit-transform: translateX(-50%) scale(1.2);
          transform: translateX(-50%) scale(1.2);
  background-color: currentColor;
}

.multisteps-form__progress-btn.js-danger:before {
  -webkit-transform: translateX(-50%) scale(1.2);
          transform: translateX(-50%) scale(1.2);
  background-color: currentColor;
}

.multisteps-form__form {
  position: relative;
}

.multisteps-form__panel {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 0;
  opacity: 0;
  visibility: hidden;
}

.multisteps-form__panel.js-active {
  height: auto;
  opacity: 1;
  visibility: visible;
}

.multisteps-form__panel.js-success {
  height: auto;
  opacity: 1;
  visibility: visible;
}

.multisteps-form__panel.js-danger {
  height: auto;
  opacity: 1;
  visibility: visible;
}

.multisteps-form__panel[data-animation="scaleIn"] {
  -webkit-transform: scale(0.9);
          transform: scale(0.9);
}

.multisteps-form__panel[data-animation="scaleIn"].js-active {
  transition-property: all;
  transition-duration: 0.2s;
  transition-timing-function: linear;
  transition-delay: 0s;
  -webkit-transform: scale(1);
          transform: scale(1);
}

.multisteps-form__panel[data-animation="scaleIn"].js-success {
  transition-property: all;
  transition-duration: 0.2s;
  transition-timing-function: linear;
  transition-delay: 0s;
  -webkit-transform: scale(1);
          transform: scale(1);
}

.multisteps-form__panel[data-animation="scaleIn"].js-danger {
  transition-property: all;
  transition-duration: 0.2s;
  transition-timing-function: linear;
  transition-delay: 0s;
  -webkit-transform: scale(1);
          transform: scale(1);
}

.table-condensed{
  font-size: 80%;
}

.container
{
    padding: 0px;
    min-width: 100%;
}

.progress{
    width: 150px;
    height: 150px;
    line-height: 150px;
    background: none;
    margin: 0 auto;
    box-shadow: none;
    position: relative;
}
.progress:after{
    content: "";
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 12px solid #fff;
    position: absolute;
    top: 0;
    left: 0;
}
.progress > span{
    width: 50%;
    height: 100%;
    overflow: hidden;
    position: absolute;
    top: 0;
    z-index: 1;
}
.progress .progress-left{
    left: 0;
}
.progress .progress-bar{
    width: 100%;
    height: 100%;
    background: none;
    border-width: 12px;
    border-style: solid;
    position: absolute;
    top: 0;
}
.progress .progress-left .progress-bar{
    left: 100%;
    border-top-right-radius: 80px;
    border-bottom-right-radius: 80px;
    border-left: 0;
    -webkit-transform-origin: center left;
    transform-origin: center left;
}
.progress .progress-right{
    right: 0;
}
.progress .progress-right .progress-bar{
    left: -100%;
    border-top-left-radius: 80px;
    border-bottom-left-radius: 80px;
    border-right: 0;
    -webkit-transform-origin: center right;
    transform-origin: center right;
    animation: loading-1 1.8s linear forwards;
}
.progress .progress-value{
    width: 90%;
    height: 90%;
    border-radius: 50%;
    background: #44484b;
    font-size: 24px;
    color: #fff;
    line-height: 135px;
    text-align: center;
    position: absolute;
    top: 5%;
    left: 5%;
}
.progress.blue .progress-bar{
    border-color: #049dff;
}
.progress.blue .progress-left .progress-bar{
    animation: loading-1 1.5s linear forwards 1.8s;
}
.progress.yellow .progress-bar{
    border-color: #fdba04;
}
.progress.yellow .progress-left .progress-bar{
    animation: loading-1 1s linear forwards 1.8s;
}
.progress.pink .progress-bar{
    border-color: #ed687c;
}
.progress.pink .progress-left .progress-bar{
    animation: loading-4 0.4s linear forwards 1.8s;
}
.progress.green .progress-bar{
    border-color: #1abc9c;
}
.progress.green .progress-left .progress-bar{
    animation: loading-5 1.2s linear forwards 1.8s;
}
@keyframes loading-1{
    0%{
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100%{
        -webkit-transform: rotate(180deg);
        transform: rotate(180deg);
    }
}
@keyframes loading-2{
    0%{
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100%{
        -webkit-transform: rotate(144deg);
        transform: rotate(144deg);
    }
}
@keyframes loading-3{
    0%{
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100%{
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
    }
}
@keyframes loading-4{
    0%{
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100%{
        -webkit-transform: rotate(36deg);
        transform: rotate(36deg);
    }
}
@keyframes loading-5{
    0%{
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100%{
        -webkit-transform: rotate(126deg);
        transform: rotate(126deg);
    }
}
@media only screen and (max-width: 990px){
    .progress{ margin-bottom: 20px; }
}
.table{table-layout: fixed;}
</style>

<title>RAM</title>

<apex:form id="theForm">
<apex:actionFunction name="resendHybridLinkFunc" action="{!resendHybridLink}" reRender="dummy">
</apex:actionFunction>
<apex:actionFunction name="updateAccountFunc" action="{!updateAccount}" reRender="errorMessages">
    <apex:param id="accordionType" name="accordionType" value="" />
    <apex:param id="nextFormType" name="nextFormType" value="" />
    <apex:param id="nextSectionType" name="nextSectionType" value="" />
</apex:actionFunction>
<apex:actionFunction name="editDefaultFunc" action="{!editDefault}" reRender="editDefaultModalContent" oncomplete="openEditDefaultModal();">
    <apex:param id="selectedDefaultId" name="selectedDefaultId" value="" />
</apex:actionFunction>
<apex:actionFunction name="editProductFunc" action="{!editProduct}" reRender="editProductModalContent" oncomplete="openEditProductModal();">
    <apex:param id="selectedProductId" name="selectedProductId" value="" />
</apex:actionFunction>
<apex:actionFunction name="searchServerForProducts" action="{!runSearchForProducts}" rerender="resultsForProducts,co_resultsForProducts">
  <apex:param name="prodCategory" value="" />
</apex:actionFunction>
<apex:actionFunction name="hideSearchListForProducts" action="{!hideSearchListForProducts}" rerender="resultsForProducts,co_resultsForProducts">
</apex:actionFunction>
<apex:actionFunction name="checkCriteriaAndCreateAgreement" action="{!checkCriteriaAndCreateAgreement}">
</apex:actionFunction>
<apex:actionFunction name="checkCriteriaBeforeCreatingAgreement" action="{!checkCriteriaBeforeCreatingAgreement}">
</apex:actionFunction>
<apex:actionFunction name="sendRefereeSMSNewFunc" action="{!sendRefereeSMSNew}" reRender="refereeModal">
<apex:param name="refId" value="" />
</apex:actionFunction>
<apex:actionFunction name="getEquifaxPDFNZFunc" action="{!getEquifaxPDFNZ}"/>
<apex:actionFunction name="possibleMatchSearchFunc" action="{!possibleMatchSearch}" rerender="theEquifaxForm" oncomplete="reloadPage();">
<apex:param value="" name="vedaFileNumber"/>
<apex:param value="" name="gender"/>
<apex:param value="" name="license"/>
<apex:param value="" name="dob"/>
<apex:param value="" name="currentAddress"/>
</apex:actionFunction>     
<apex:actionFunction name="primaryMatchSelectedFunc" action="{!getEquifaxPdf}" oncomplete="reloadPage();"/>
<apex:actionFunction name="searchServer" action="{!runSearch}" rerender="refAppResults">
  <apex:param name="firstName" value="" />
</apex:actionFunction>
<apex:actionFunction name="setEquifaxBoolean" action="{!setEquifaxBoolean}"></apex:actionFunction>
<apex:actionFunction name="changeStatus" action="{!changeEnquiryStatusToDN}" oncomplete="co_redirectToCAM();" reRender="dummy"/>

<div class="bg-warning font-weight-bold">
<apex:pageMessages id="errorMessages"/>
</div>

<div class="container">
<nav class="navbar navbar-expand-lg navbar-light bg-danger" >
  <a class="navbar-brand" onclick="window.open('https://rent4keeps.my.salesforce.com/','_top');"><apex:image value="{!URLFOR($Resource.R4KLogoTransparentCCWhiteR)}" width="130" alt="R4K" /></a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="font-weight-bold"><a style="text-decoration:none;color:white;" target="_blank" href="/{!Account.Id}">{!Account.FirstName} {!Account.LastName}</a></span>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav ml-auto w-100 justify-content-center">
      <li class="nav-item active" style="padding-left:5px;padding-right:5px;{!IF(formType='docs','border-bottom: 5px solid green;','')}">
        <a onclick="savingMessage('','','docs','id');" class="text-white btn btn-danger btn-sm">Documents</a>
      </li>
      <li class="nav-item" style="padding-left:5px;padding-right:5px;{!IF(formType='assessment','border-bottom: 5px solid green;','')}">
        <a onclick="savingMessage('','','assessment','ro');" class="text-white btn btn-danger btn-sm">Assessment &amp; Approval</a>
      </li>
      <li class="nav-item" style="padding-left:5px;padding-right:5px;{!IF(formType='signing','border-bottom: 5px solid green;','')}">
        <a onclick="savingMessage('','','signing','sourcing');" class="text-white btn btn-danger btn-sm">Sourcing &amp; Signing</a>
      </li>  
    </ul>
  </div>
</nav>
</div>

<apex:outputPanel rendered="{!IF(formType=='docs',true,false)}">
<div class="multisteps-form">
  <!--progress bar-->
  <div class="row">
    <div class="col-12 col-lg-8 ml-auto mr-auto mb-4 mt-2">
      <div class="multisteps-form__progress">
          <apex:outputPanel rendered="{!IF(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'QLD',Account.Territory_Number__r.State_Master_State__c = 'WA'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),true,false)}" layout="none">
                <button onclick="savingMessage('','','docs','confirmation');" class="multisteps-form__progress-btn docs-confirmation" type="button" title="Confirmation" ><span class="docs-confirmation-title">Confirmation</span></button>  
          </apex:outputPanel> 
        <button onclick="savingMessage('','','docs','id');" class="multisteps-form__progress-btn docs-id" type="button" title="Id"><span class="docs-id-title">Id</span></button>
        <button onclick="savingMessage('','','docs','bank');" class="multisteps-form__progress-btn docs-bank" type="button" title="Bank"><span class="docs-bank-title">Bank</span></button>
        <button onclick="savingMessage('','','docs','mygov');" class="multisteps-form__progress-btn docs-mygov" type="button" title="MyGov"><span class="docs-mygov-title">MyGov</span></button>
        <button onclick="savingMessage('','','docs','referees');" class="multisteps-form__progress-btn docs-referees" type="button" title="Referees"><span class="docs-referees-title">Referees</span></button>
        <button onclick="savingMessage('','','docs','equifax');" class="multisteps-form__progress-btn docs-equifax" type="button" title="Equifax"><span class="docs-equifax-title">Equifax</span></button>
      </div>
    </div>
  </div>
</div>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(formType=='assessment',true,false)}">
<div class="multisteps-form">
  <!--progress bar-->
  <div class="row">
    <div class="col-12 col-lg-8 ml-auto mr-auto mb-4 mt-2">
      <div class="multisteps-form__progress">
        <button onclick="savingMessage('','','assessment','ro');" class="multisteps-form__progress-btn docs-ro" type="button" title="RO"><span class="docs-ro-title">R&amp;O</span></button>
        <button onclick="savingMessage('','','assessment','id');" class="multisteps-form__progress-btn assess-id" type="button" title="Id"><span class="docs-id-title">Id</span></button>
        <button onclick="savingMessage('','','assessment','bank');" class="multisteps-form__progress-btn assess-bank" type="button" title="Bank"><span class="docs-bank-title">Serviceability</span></button>
        <button onclick="savingMessage('','','assessment','equifax');" class="multisteps-form__progress-btn assess-equifax" type="button" title="Equifax"><span class="docs-equifax-title">Credit Report</span></button>
        <button onclick="savingMessage('','','assessment','credit');" class="multisteps-form__progress-btn assess-credit" type="button" title="RAM"><span class="docs-credit-title">RAM</span></button>
      </div>
    </div>
  </div>
</div>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(formType=='signing',true,false)}">
<div class="multisteps-form">
  <!--progress bar-->
  <div class="row">
    <div class="col-12 col-lg-8 ml-auto mr-auto mb-4 mt-2">
      <div class="multisteps-form__progress">
        <button onclick="savingMessage('','','signing','sourcing');" class="multisteps-form__progress-btn adding-prods" type="button" title="Sourcing"><span class="adding-prods-title">Sourcing</span></button>
        <button onclick="savingMessage('','','signing','sign');" class="multisteps-form__progress-btn signing-docs" type="button" title="Signing"><span class="signing-docs-title">Signing</span></button>
      </div>
    </div>
  </div>
</div>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(formType=='docs',true,false)}">

<div class="container-fluid mt-2" style="padding-left:0px;padding-right:0px;">
    <apex:outputPanel rendered="{!IF(Account.Territory_Number__r.State_Master_State__c = 'NZ',true,false)}">
        <a class="btn btn-info btn-block text-white mb-2" data-toggle="modal" data-target="#resetHybridModal">Reset &amp; Resend Hybrid Link</a>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(Account.Territory_Number__r.State_Master_State__c = 'NZ',false,true)}">
        <a class="btn btn-info btn-block text-white mb-2" data-toggle="modal" data-target="#resetOnlineModal">Reset &amp; Resend Online Link</a>
    </apex:outputPanel>
    <!--<apex:outputPanel rendered="{!IF(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'QLD',Account.Territory_Number__r.State_Master_State__c = 'WA',Account.Territory_Number__r.State_Master_State__c = 'NZ'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),false,true)}">
        <a class="btn btn-info btn-block text-white mb-2" data-toggle="modal" data-target="#resetDocModal">Send SMS - doc-Link</a>    
    </apex:outputPanel>-->
    <a style="{!IF(sectionType = 'id' || sectionType = 'bank' || sectionType = 'mygov','','display:none;')}" class="btn btn-block btn-warning" data-toggle="modal" data-target=".docsModal">Upload Manual {!IF(sectionType='id','Photo Id',IF(sectionType='bank','Bank Statement',IF(sectionType='mygov','myGov Statement','')))}</a>
    <apex:outputPanel rendered="{!IF(Account.Territory_Number__r.State_Master_State__c = 'NZ',true,false)}" layout="none">
        <a style="{!IF(sectionType = 'referees','','display:none;')}" class="btn btn-block btn-warning" onclick="window.open('/apex/R4KOnlineApplicationForm?param=ref&id={!account.Id}','_blank');">Add Referees</a>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(Account.Territory_Number__r.State_Master_State__c = 'NZ',false,true)}" layout="none">
        <a style="{!IF(sectionType = 'referees','','display:none;')}" class="btn btn-block btn-warning" onclick="window.open('/apex/AddRefereePage?param=ref&id={!account.Id}','_blank');">Add Referees</a>
        <apex:commandButton rendered="{!IF(sectionType = 'referees',true,false)}" styleclass="btn btn-block btn-primary text-white" action="{!sendAddRefereeLinkToApplicant}" value="Send Add Referee SMS To Applicant"/>
    </apex:outputPanel>
    <apex:commandButton styleClass="btn btn-block btn-danger" rendered="{!AND(formType='docs',sectionType='equifax',OR(equifaxAtt==null,secondEquifaxSearch))}" action="{!equifaxSearch}" value="Proceed to equifax search" onclick="return equifaxSearchValidation();"/>
    <a class="btn btn-block btn-success text-white mt-2" onclick="savingMessage('','','next','next');">Next</a>
</div>

<!--------------- Confirmation ---------------->
<apex:outputPanel rendered="{!IF(AND(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'QLD',Account.Territory_Number__r.State_Master_State__c = 'WA'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),sectionType=='confirmation'),true,false)}">

<apex:outputPanel rendered="{!IF(Account.No_of_Agreements__c > 0, true, false)}">
<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_statusTable').toggle();">
Customer Status
</a>

<div class="co_statusTable">
<table class="table table-sm table-bordered text-center">
    <tr>
      <td>Serviceability</td>
      <td>Arrears - Original</td>
      <apex:outputPanel rendered="{!IF(isVariation,true,false)}">
          <td>Arrears - Variation</td>
      </apex:outputPanel>
      <td>Payment Status</td>
      <td>Missed Days</td>
      <apex:outputPanel rendered="{!IF(OR(Account.Is_IDR__c,appStatusType!=''), true, false)}">
          <td>Applicant Status</td>
      </apex:outputPanel>
    </tr>
    <tr class="font-weight-bold">
        <td>
            <apex:outputtext rendered="{!IF(OR(Account.Centrelink_Benefit__c==null,AND(Account.Centrelink_Benefit__c!=null,Account.Centrelink_Benefit__c!='Newstart Allowance',Account.Centrelink_Benefit__c!='Youth Allowance')),true,false)}" value="{!IF(!ISNULL(Account.Serviceability__c),TEXT(Account.Serviceability__c) &'%','0%')}" style="color:{!IF(AND(!ISNULL(Account.Serviceability__c),Account.Serviceability__c>=20),'green','#D81E05')}"/>
            <apex:outputtext rendered="{!IF(AND(Account.Centrelink_Benefit__c!=null,OR(Account.Centrelink_Benefit__c=='Newstart Allowance',Account.Centrelink_Benefit__c=='Youth Allowance')),true,false)}" value="{!IF(!ISNULL(Account.Serviceability__c),TEXT(Account.Serviceability__c) &'%','0%')}" style="color:{!IF(AND(!ISNULL(Account.Serviceability__c),Account.Serviceability__c>=25),'green','#D81E05')}"/>
        </td>
        <td>
            <apex:outputText value="{0, number,$###,###,##0.00}" style="color:{!IF( actualArrearsOriginal > 0,'#D81E05','green')}"><apex:param value="{!actualArrearsOriginal}"/></apex:outputText>
        </td>
        <apex:outputPanel rendered="{!IF(isVariation,true,false)}">
        <td>
            <apex:outputText value="{0, number,$###,###,##0.00}" style="color:{!IF(actualArrearsAfterVariation > 0,'#D81E05','green')}"><apex:param value="{!actualArrearsAfterVariation}"/></apex:outputText>
        </td>
        </apex:outputPanel>
        <td>
            <apex:outputText value="{!Account.Applicant_Last_Payment_Status__c}" style="color:{!IF(OR(Account.Applicant_Last_Payment_Status__c = 'Over Paid',Account.Applicant_Last_Payment_Status__c = 'Paid Successful'),'green','#D81E05')}"/>
        </td>
        <td>
            <apex:outputText value="{!IF(Account.No_Of_Active_Agreements__c>0 && Account.Days_Since_Expected_Payment__c!=null && Account.Days_Since_Expected_Payment__c >0,ROUND(Account.Days_Since_Expected_Payment__c,0),0)}" style="color:{!IF(Account.No_Of_Active_Agreements__c>0 && Account.Days_Since_Expected_Payment__c!=null && Account.Days_Since_Expected_Payment__c >0,'#D81E05','green')}"/>
        </td>
        <apex:outputPanel rendered="{!Account.Is_IDR__c}">
            <td style="color:#D81E05">
                IDR
            </td>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(appStatusType=='sci' && !Account.Is_IDR__c, true, false)}">
            <td style="color:#D81E05">
                SCI
            </td>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(appStatusType=='defaultAndWrittenOff' && !Account.Is_IDR__c, true, false)}">
            <td style="color:#D81E05">
                Defaulted &amp; Written Off
            </td>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(appStatusType=='defaulted' && !Account.Is_IDR__c, true, false)}">
            <td style="color:#D81E05">
                Defaulted on Equifax
            </td>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(appStatusType=='writtenOff' && !Account.Is_IDR__c, true, false)}">
            <td style="color:#D81E05">
                Written Off
            </td>
        </apex:outputPanel>
    </tr>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_applicantInfoTable').toggle();">
Applicant Info
</a>
<div class="co_applicantInfoTable"> 
<table class="table table-sm table-bordered text-center">
    <tbody>
        <tr>
            <td>Agreements</td>
            <td>TAV</td>
            <td>Total Paid</td>
        </tr>
        <tr>
            <td class="h5">{!CA_activeAgreements} / {!CA_totalAgreements}</td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalTAV}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalPaid}"/></apex:outputText></td>
        </tr>
        <tr>
            <td>Rem. Amount</td>
            <td>Sched. Amount</td>
            <td>Last Paid</td>
        </tr>
        <tr>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalRemaining}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_scheduledAmount}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.LastPaymentRecieved__c}"/></apex:outputText></td>
        </tr>      
    </tbody>
</table>
</div>
</apex:outputPanel>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_idTable').toggle();">
Id
</a>

<div class="co_idTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>First Name</td>
        <td class="font-weight-bold"><a href="/{!Account.Id}" target="_blank">{!Account.FirstName}</a></td>
    </tr>
    <tr>
        <td>Last Name</td>
        <td class="font-weight-bold">{!Account.LastName}</td>
    </tr>
    <tr>
        <td>DOB</td>
        <td class="font-weight-bold"><apex:outputField value="{!Account.Birthdate__c}"/> ({!Account.Age__c})</td>
    </tr>
    <tr>
        <td>Gender</td>
        <td class="font-weight-bold">{!Account.Gender__pc}</td>
    </tr>
    <tr>
        <td>ID Type</td>
        <td class="font-weight-bold">{!Account.Identification_Type__c}</td>
    </tr>
    <tr>
        <td>ID Document No</td>
        <td class="font-weight-bold"><apex:outputField value="{!Account.Identification_No__c}"/></td>
    </tr>
    <tr>
        <td>Customer ID</td>
        <td class="font-weight-bold"><apex:outputlink rendered="{!IF(idAtt!=null,true,false)}" onclick="window.open('{!idAtt.url}','','width=500,height=500');return false;"><b>Customer Id PDF</b></apex:outputlink><apex:outputText rendered="{!IF(idAtt==null,true,false)}"><b>Not attached</b></apex:outputText></td>
    </tr>
</table>
</div>


<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_bankTable').toggle();">
Bank
</a>

<div class="co_bankTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>Bank Statement</td>
        <td class="font-weight-bold"><apex:outputlink rendered="{!IF(bankAtt!=null,true,false)}" onclick="window.open('{!bankAtt.url}','','width=500,height=500');return false;"><b>Bank Statement PDF</b></apex:outputlink><apex:outputText rendered="{!IF(bankAtt==null,true,false)}"><b>Not attached</b></apex:outputText></td>
    </tr>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_mygovTable').toggle();">
MyGov
</a>

<div class="co_mygovTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>MyGov Statement</td>
        <td class="font-weight-bold"><apex:outputlink rendered="{!IF(mygovAtt!=null,true,false)}" onclick="window.open('{!mygovAtt.url}','','width=500,height=500');return false;"><b>MyGov PDF</b></apex:outputlink><apex:outputText rendered="{!IF(mygovAtt==null,true,false)}"><b>Not attached</b></apex:outputText></td>
    </tr>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_roTable').toggle();">
R&amp;O
</a>

<div class="co_roTable">
<table class="table table-sm table-bordered">
    <!--<tr>
        <td>Why Consumer Lease</td>
        <td class="font-weight-bold">{!Account.Why_Consumer_Lease__c}</td>
    </tr>-->
    <tr>
        <td>Product Name</td>
        <td class="font-weight-bold">{!Account.Product_Name_for_Agreement__c}</td>
    </tr>
    <tr>
        <td>Requirement</td>
        <td class="font-weight-bold">{!Account.Product_Interested_In__c}</td>
    </tr>
    <tr>
        <td>Objective</td>
        <td class="font-weight-bold">{!Account.Product_Description__c}</td>
    </tr>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_addressTable').toggle();">
Address
</a>

<div class="co_addressTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>Current Address</td>
        <td class="font-weight-bold">{!Account.UnformattedAddress_VedaAlert_Report__c}</td>
    </tr>
    <tr>
        <td>Length Of Stay In Current Address (Months)</td>
        <td class="font-weight-bold">{!IF(Account.Length_of_Stay_in_Current_Address__c == null, 0, Account.Length_of_Stay_in_Current_Address__c)} ({!IF(Account.Length_of_Stay_in_Current_Address__c == null, 0, FLOOR(Account.Length_of_Stay_in_Current_Address__c / 12))} yrs {!IF(Account.Length_of_Stay_in_Current_Address__c != null && MOD(Account.Length_of_Stay_in_Current_Address__c,12) > 0, FLOOR(MOD(Account.Length_of_Stay_in_Current_Address__c,12)),'')} {!IF(Account.Length_of_Stay_in_Current_Address__c != null && MOD(Account.Length_of_Stay_in_Current_Address__c,12) > 0, 'months','')})</td>
    </tr>
    <tr>
        <td>Previous Address</td>
        <td class="font-weight-bold">{!Account.Previous_Address__c}</td>
    </tr>
    <tr>
        <td>Length Of Stay In Previous Address (Months)</td>
        <td class="font-weight-bold">{!IF(Account.Length_of_Stay_in_Previous_Address__c == null, 0, Account.Length_of_Stay_in_Previous_Address__c)} ({!IF(Account.Length_of_Stay_in_Previous_Address__c == null, 0, FLOOR(Account.Length_of_Stay_in_Previous_Address__c / 12))} yrs {!IF(Account.Length_of_Stay_in_Previous_Address__c != null && MOD(Account.Length_of_Stay_in_Previous_Address__c,12) > 0, FLOOR(MOD(Account.Length_of_Stay_in_Previous_Address__c,12)),'')} {!IF(Account.Length_of_Stay_in_Previous_Address__c != null && MOD(Account.Length_of_Stay_in_Previous_Address__c,12) > 0, 'months','')})</td>
    </tr>
    <tr>
        <td>Bank Address</td>
        <td class="font-weight-bold">{!Account.MOGO_Captured_Address__c}</td>
    </tr>
    <tr>
        <td>MyGov Address</td>
        <td class="font-weight-bold">{!Account.myGov_Captured_Address__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(idAddressAtt!=null,true,false)}">
    <tr>
        <td>Address Proof</td>
        <td class="font-weight-bold"><apex:outputlink rendered="{!IF(idAddressAtt!=null,true,false)}" onclick="window.open('{!idAddressAtt.url}','','width=500,height=500');return false;"><b>Address Proof PDF</b></apex:outputlink><apex:outputText rendered="{!IF(idAddressAtt==null,true,false)}"><b>Not attached</b></apex:outputText></td>
    </tr>
    </apex:outputPanel>
    <tr>
        <td>Residential Status</td>
        <td class="font-weight-bold">{!residentialStatus}</td>
    </tr>
    <!--<tr>
        <td>Residential Details</td>
        <td class="font-weight-bold">{!residentialDetails}</td>
    </tr>-->
    <apex:outputPanel rendered="{!IF(residentialStatus = 'Renting' || residentialStatus = 'Boarding',true,false)}">
    <tr>
        <td>Landlord Name</td>
        <td class="font-weight-bold">{!landlordName}</td>
    </tr>
    <tr>
        <td>Landlord Phone</td>
        <td class="font-weight-bold">{!landlordPhone}</td>
    </tr>
    </apex:outputPanel>
    <tr>
        <td>Number of dependents</td>
        <td class="font-weight-bold">{!Account.Number_of_Dependants__c}</td>
    </tr>
</table>
</div>


<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_expenseTable').toggle();">
Expense
</a>
<div class="co_expenseTable" id="co_expenseTable">
<table class="table table-sm table-bordered">
<thead>
<tr>
    <th width="25%">Expense</th>
    <th width="25%">Amount</th>
    <th width="50%">Details</th>
</tr>
</thead>
<tbody>
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseRentGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Rent (F) 
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Rent_Mortgage_Board__c}"/></apex:outputText></td><td>{!Account.Rent_Mortgage_Board_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(rentCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!rentCatTransactions}" var="rcat">
    <tr id="co_collapseRentGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseRentGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(rentCatTransactions.size>0,false,true)}">
    <tr class="co_collapseRentGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseLoanGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Loan Payments (F)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Loan_Payments__c}"/></apex:outputText></td><td>{!Account.Loan_Payment_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(loanCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!loanCatTransactions}" var="rcat">
    <tr id="co_collapseLoanGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseLoanGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(loanCatTransactions.size>0,false,true)}">
    <tr class="co_collapseLoanGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseCreditCardGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Credit Card (F)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Credit_Card__c}"/></apex:outputText></td><td>{!Account.Credit_Card_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(creditcardCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!creditcardCatTransactions}" var="rcat">
    <tr id="co_collapseCreditCardGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseCreditCardGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(creditcardCatTransactions.size>0,false,true)}">
    <tr class="co_collapseCreditCardGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseInsuranceGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Insurance (F)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Insurance__c}"/></apex:outputText></td><td>{!Account.Insurance_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(insuranceCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!insuranceCatTransactions}" var="rcat">
    <tr id="co_collapseInsuranceGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseInsuranceGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(insuranceCatTransactions.size>0,false,true)}">
    <tr class="co_collapseInsuranceGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>  
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseHouseholdGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        House Hold Expenses (V)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Food__c}"/></apex:outputText></td><td>{!Account.Food_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(householdCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!householdCatTransactions}" var="rcat">
    <tr id="co_collapseHouseholdGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseHouseholdGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(householdCatTransactions.size>0,false,true)}">
    <tr class="co_collapseHouseholdGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel> 
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseUtilitiesGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Utilities (V)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Utilities__c}"/></apex:outputText></td><td>{!Account.Utilities_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(utilitiesCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!utilitiesCatTransactions}" var="rcat">
    <tr id="co_collapseUtilitiesGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseUtilitiesGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(utilitiesCatTransactions.size>0,false,true)}">
    <tr class="co_collapseUtilitiesGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel> 
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseTravelGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Car / Petrol / Travel (V)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Car_Lease_Loan_Payment__c}"/></apex:outputText></td><td>{!Account.Car_Lease_Loan_Payment_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(travelCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!travelCatTransactions}" var="rcat">
    <tr id="co_collapseTravelGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseTravelGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(travelCatTransactions.size>0,false,true)}">
    <tr class="co_collapseTravelGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseMobileGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Mobile (V)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Mobile_Expenses__c}"/></apex:outputText></td><td>{!Account.Mobile_Expenses_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(mobileCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!mobileCatTransactions}" var="rcat">
    <tr id="co_collapseMobileGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseMobileGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(mobileCatTransactions.size>0,false,true)}">
    <tr class="co_collapseMobileGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseClothingGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Clothing (D)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Clothing__c}"/></apex:outputText></td><td>{!Account.Clothing_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(clothingCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!clothingCatTransactions}" var="rcat">
    <tr id="co_collapseClothingGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseClothingGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(clothingCatTransactions.size>0,false,true)}">
    <tr class="co_collapseClothingGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseAlcoholGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Tobacco / Alcohol / Entertainment (D)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Tobacco_Alcohol__c}"/></apex:outputText></td><td>{!Account.Tobacco_Alcohol_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(alcoholCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!alcoholCatTransactions}" var="rcat">
    <tr id="co_collapseAlcoholGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseAlcoholGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(alcoholCatTransactions.size>0,false,true)}">
    <tr class="co_collapseAlcoholGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>   
    
    <tr>
        <td>
        <a data-toggle="collapse" href=".co_collapseOtherExpenseGenericCategories" role="button" aria-expanded="false" aria-controls="collapseExample">
        Other Discretionary (OD)
        </a>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.OtherOutgoings__c}"/></apex:outputText></td><td>{!Account.Other_Details__c}</td>
    </tr>
    <apex:outputPanel rendered="{!IF(otherexpenseCatTransactions.size>0,true,false)}">
    <apex:repeat value="{!otherexpenseCatTransactions}" var="rcat">
    <tr id="co_collapseOtherExpenseGenericCategories" href="#co_collapse{!rcat.Name}Transactions" class="co_collapseOtherExpenseGenericCategories collapse {!rcat.Name}">
        <td style="padding-left:20px;"><a data-toggle="collapse" href="#co_collapse{!rcat.Name}Transactions" role="button" aria-expanded="false" aria-controls="collapseExample">
            <i class="far fa-eye"></i> &nbsp; {!rcat.Name} - {!rCat.Transaction_Count__c} transactions
        </a>
        </td>
        <td colspan="2">
            <table class="table" style="font-weight:bold;">
                <tr>
                <td>Debit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Debit_Amount__c}" /></apex:outputText></td>
                <td>Credit &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Credit_Amount__c}" /></apex:outputText></td>
                <td>Total &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Total_Amount__c}" /></apex:outputText></td>
                <td>Fortnightly &nbsp;&nbsp; <apex:outputText value="{0,number,currency}"> <apex:param value="{!rcat.Fortnightly_Amount__c}" /></apex:outputText></td>
                </tr>
            </table>
            <div id="co_collapse{!rcat.Name}Transactions" class="collapse" data-parent="#co_expenseTable">
            <table class="table">
                <tbody>
                <apex:repeat value="{!rcat.BankStatement_Transactions__r}" var="trans"><tr><td><apex:outputText value="{0,date,dd/MM/YYYY}"> <apex:param value="{!trans.Transaction_Date__c}" /></apex:outputText></td><td colspan="5">{!trans.Description__c}</td><td><apex:outputText value="{0,number,currency}"> <apex:param value="{!trans.Total_Amount__c}" /></apex:outputText></td></tr></apex:repeat>
                </tbody>
            </table>
            </div>
        </td>
    </tr>
    </apex:repeat>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(otherexpenseCatTransactions.size>0,false,true)}">
    <tr class="co_collapseOtherExpenseGenericCategories collapse"><td colespan="3"><b>No Transactions</b></td></tr>
    </apex:outputPanel>
    
    <!--<tr>
        <td>
        <a data-toggle="collapse" href="#co_collapseOtherDetails" role="button" aria-expanded="false" aria-controls="collapseExample">
            Other Discretionary (OD)
          </a> &nbsp; <apex:outputPanel rendered="{!IF(otherexpenseCatId!=null,true,false)}"><a href="/{!otherexpenseCatId}" target="_blank" style="color:red;"><i class="far fa-eye"></i></a></apex:outputPanel>
        </td>
        <td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.OtherOutgoings__c}"/></apex:outputText></td><td>{!Account.Other_Details__c}</td>
    </tr>
    <tr class="collapse"  id="co_collapseOtherDetails" data-parent="#co_expenseTable">
        <td style="border:1px solid black;" colspan="7">
        <div>
        <table class="table">
        <thead>
        <tr><th style="text-align:left;" colspan="2">Description</th><th style="text-align:center;">No of Transactions</th><th style="text-align:right;">Transaction Average</th><th style="text-align:right;">Fortnightly Average</th></tr>
        </thead>
        <tbody>
        <apex:repeat value="{!otherExpenseList}" var="expense"><tr><td style="text-align:left;" colspan="2">{!expense.name}</td><td style="text-align:center;">{!expense.numberTransactions}</td><td style="text-align:right;">{!expense.transAverage}</td><td style="text-align:right;">{!expense.amount}</td></tr></apex:repeat>
        </tbody>
        </table>
        </div>
        </td>
    </tr>-->
    <tr>
        <td>Other Company Rentals</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Other_Rental_Companies__c}"/></apex:outputText></td><td>{!Account.Other_Rental_Company_Details__c}</td>
    </tr>  
    <tr>
        <td>Centrepay Outgoings</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Centrepay_Outgoings__c}"/></apex:outputText></td><td>{!Account.Centrepay_Details__c}</td>
    </tr>
    <tr>
        <td>Total Expense</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Comfortable_Spending__c}"/></apex:outputText></td><td>&nbsp;</td>
    </tr>
</tbody>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_incomeTable').toggle();">
Income
</a>

<div class="co_incomeTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>Employer Name</td><td class="font-weight-bold">{!Account.Employer_Name__c}</td>
    </tr>
    <tr>
        <td>Employment Type</td><td class="font-weight-bold">{!Account.Employment_Type__c}</td>
    </tr>
    <tr>
        <td>Employment Commencement Date</td><td class="font-weight-bold"><apex:outputField value="{!Account.Employment_Commencement_Date__c}"/></td>
    </tr>
    <tr>
        <td>Employment Income Details</td><td class="font-weight-bold">{!Account.Employment_Income_Details__c}</td>
    </tr>
    <tr>
        <td>Employment Income</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Employment_Income__c}"/></apex:outputText></td>
    </tr>
    <apex:outputPanel rendered="{!IF(AND(Account.Centrelink_Benefit_Amount__c <> null, Account.Centrelink_Benefit_Amount__c <> 0),true,false)}">
        <tr>  
            <td>Centrelink Benefit 1</td> <td class="font-weight-bold">{!Account.Centrelink_Benefit__c}</td>
        </tr>
        <tr>
            <td>Centrelink Benefit 1 Amount</td> <td class="font-weight-bold"> <apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Centrelink_Benefit_Amount__c}"/></apex:outputText> </td>
        </tr>  
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(AND(Account.Centrelink_Benefit2_Amount__c <> null, Account.Centrelink_Benefit2_Amount__c <> 0),true,false)}">
        <tr>  
            <td>Centrelink Benefit 2</td> <td class="font-weight-bold">{!Account.Centrelink_Benefit2__c}</td>
        </tr>
        <tr>
            <td>Centrelink Benefit 2 Amount</td> <td class="font-weight-bold"> <apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Centrelink_Benefit2_Amount__c}"/></apex:outputText> </td>
        </tr>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(AND(Account.Centrelink_Benefit3_Amount__c <> null, Account.Centrelink_Benefit3_Amount__c <> 0),true,false)}">
        <tr>  
            <td>Centrelink Benefit 3</td> <td class="font-weight-bold">{!Account.Centrelink_Benefit3__c}</td>
        </tr>
        <tr>
            <td>Centrelink Benefit 3 Amount</td> <td class="font-weight-bold"> <apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Centrelink_Benefit3_Amount__c}"/></apex:outputText> </td>
        </tr>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(AND(Account.Other_Centrelink_Benefit_Amount__c <> null, Account.Other_Centrelink_Benefit_Amount__c <> 0),true,false)}">
        <tr>
            <td>Other Centrelink Benefit</td><td class="font-weight-bold">{!Account.Other_Centrelink_Benefit__c}</td>
        </tr>
        <tr>
            <td>Other Centrelink Benefit Amount</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Other_Centrelink_Benefit_Amount__c}"/></apex:outputText></td>
        </tr>    
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(AND(Account.Centrelink_Benefit_Amount__c <> null, Account.Centrelink_Benefit_Amount__c <> 0),true,false)}">
        <tr>  
            <td>Centrelink Benefit Details</td> <td class="font-weight-bold">{!Account.myGov_Payment_Details__c}</td>
        </tr>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(AND(Account.Other_Income_Amount__c <> null, Account.Other_Income_Amount__c <> 0), true, false)}">
        <tr>
            <td>Other Income Source</td><td class="font-weight-bold">{!Account.Other_Income_Source__c}</td>
        </tr>
        <tr>
            <td>Other Income Details</td><td class="font-weight-bold">{!Account.Other_Income_Details__c}</td>
        </tr>
        <tr>
            <td>Other Income</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Other_Income_Amount__c}"/></apex:outputText></td>
        </tr>   
    </apex:outputPanel>
    <tr>
        <td>Total Income</td><td class="font-weight-bold"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.Highlevel_Income__c}"/></apex:outputText></td>
    </tr>
    <tr>
        <td>Serviceability</td><td class="font-weight-bold">{!Account.Serviceability__c} %</td>
    </tr>
</table>
</div>


<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_pRefTable').toggle();">
Referees
</a>

<div class="co_pRefTable">
<table class="table table-sm table-bordered">
<thead>
<tr>
    <th>Name</th>
    <th>Relation</th>
    <th>Mobile</th>
    <th>Contacted</th>
    <th>Added Date</th>
</tr>
</thead>
<tbody>
<apex:repeat value="{!totalRefAdded}" var="ref">
<tr>
    <td>{!ref.Referee_Name__r.Name}</td>
    <td>{!ref.Relationship__c}</td>
    <td>{!ref.Phone__c}</td>
    <td>{!IF(ref.Contacted__c = null, 'No',ref.Contacted__c)}</td>
    <td>
        <apex:outputText value="{0,date,dd-MMM-YYYY}">
            <apex:param value="{!IF(ISNULL(ref.Referee_Added_Datetime__c),null,DATEVALUE(ref.Referee_Added_Datetime__c))}" /> 
        </apex:outputText>
    </td>
</tr>
</apex:repeat>
</tbody>
</table>
</div>

<apex:outputPanel rendered="{!IF(Account.Equifax_Enquiry_DateTime__c != null && NOW() - Account.Equifax_Enquiry_DateTime__c <= 21, true, false)}">
<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_equifaxTable').toggle();">
Equifax
</a>

<div class="co_equifaxTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>Equifax Statement</td>
        <td class="font-weight-bold"><apex:outputlink rendered="{!IF(equifaxAtt!=null,true,false)}" onclick="window.open('{!equifaxAtt.url}','','width=500,height=500');return false;"><b>Equifax PDF</b></apex:outputlink><apex:outputText rendered="{!IF(equifaxAtt==null,true,false)}"><b>Not attached</b></apex:outputText></td>
    </tr>
    <tr>
        <td>Age Of File</td>
        <td class="font-weight-bold">{!IF(Account.Equifax_Age_of_File__c == null, 0 , Account.Equifax_Age_of_File__c)}</td>
    </tr>
    <tr>
        <td>Equifax File Number</td>
        <td class="font-weight-bold">{!Account.Veda_File_Number__c}</td>
    </tr>
    <tr>
        <td>Equifax Score</td>
        <td class="font-weight-bold">{!Account.Score_of_Equifax__c}</td>
    </tr>
    <tr>
        <td>Part 9 Agreements</td>
        <td class="font-weight-bold">{!Account.Part_9_Agreements__c}</td>
    </tr>
    <tr>
        <td>Bankruptcy &amp; Part 10 Agreements</td>
        <td class="font-weight-bold">{!Account.Bankruptcy_Part_9_Agreements__c}</td>
    </tr>
    <tr>
        <td>No of Unpaid Defaults - Rental</td>
        <td class="font-weight-bold">{!Account.Equifax_No_of_Unpaid_Default_Rental__c}</td>
    </tr>
    <tr>
        <td>No of Unpaid Defaults - Non Rental (Last 12 Months)</td>
        <td class="font-weight-bold">{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}</td>
    </tr>
    <tr>
        <td>No of Enquiries Last 6 Months</td>
        <td class="font-weight-bold">{!Account.No_of_Equifax_Enquiries_Last_6_Month__c}</td>
    </tr>
    <tr>
        <td>Enquiries in the last 6 months</td>
        <td class="font-weight-bold">{!Account.Enquiries_in_the_last_6_months__c}</td>
    </tr>
    <tr>
        <td>Explanation for Recent Enquiries</td>
        <td class="font-weight-bold">{!Account.Explanation_for_Recent_Enquiries__c}</td>
    </tr>
    <tr>
        <td>Explanation for all other Defaults</td>
        <td class="font-weight-bold">{!Account.Explanation_for_All_Other_Defaults__c}</td>
    </tr>
</table>

<apex:outputPanel rendered="{!IF(equifaxDefaults.size > 0,true,false)}">
<table class="table table-sm table-bordered mt-2">
<thead>
<tr>
    <th>Default Date</th>
    <th>Company Type</th>
    <th>Company Name</th>
    <th>Default Amount ($)</th>
    <th>Default Notes</th>
</tr>
</thead>
<tbody>
<apex:repeat value="{!equifaxDefaults}" var="def">
<tr>
    <td>
        <apex:outputText value="{0,date,dd-MMM-YYYY}">
            <apex:param value="{!def.Unpaid_Default_Date__c}" /> 
        </apex:outputText>
    </td>
    <td>{!def.Company_Type__c}</td>
    <td>{!def.Company_Name__c}</td>
    <td style="text-align:right;">
        <apex:outputText value="{0, number, currency}">
           <apex:param value="{!def.Amount__c}" />
        </apex:outputText>
    </td>
    <td>{!def.Default_Notes__c}</td>
</tr>
</apex:repeat>
</tbody>
</table>
</apex:outputPanel>
</div>
</apex:outputPanel>


<apex:outputPanel rendered="{!IF(Account.Last_Collection_Activity__c != null, true, false)}">
<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_caTable').toggle();">
Collection Activity
</a>

<div class="co_caTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>No. of Collection Activities</td><td>{!lastCollectionActivities.size}</td>
    </tr>
    <tr>
        <td>Last Collection Activity</td><td><div style="height:150px;overflow:scroll;"><a href="/{!Account.Last_Collection_Activity__c}" target="_blank">{!Account.Last_Collection_Activity__r.Name}</a><br/><apex:outputText value="{!Account.Last_Collection_Activity__r.Collection_Notes__c}" escape="false"/></div></td>
    </tr>
</table>
</div>
</apex:outputPanel>


<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_cmTable').toggle();">
Credit Matrix
</a>

<div class="co_cmTable">
<apex:outputPanel rendered="{!IF(OR(Account.AgreementId_for_Current_Enquiry__c==null,Account.AgreementId_for_Current_Enquiry__c==''),true,false)}" layout="none">
    <a class="mt-2 co_miscbuttonCM btn btn-block btn-primary text-white">Check RAM Assistance</a>
</apex:outputPanel>
<table class="table table-bordered" id="co_cmProductTable">
    <tr>
        <td width="40%">Product Category</td>
        <td width="30%"><apex:inputfield value="{!Account.Product_Category_Selected__c}" styleClass="form-control co_prodCategory" onkeyup="co_doSearchForProducts();"/></td>
        <td width="30%">
            <center><label class="field-label"><h4><apex:outputText styleClass="co_prodCriteria" value="{!Account.CM_Product_Category__c}"/></h4></label></center>
        </td>
    </tr>
    <tr>
        <td colspan="3" class="bg-warning">            
            <apex:pageBlock id="co_resultsForProducts">
            <apex:pageBlockTable value="{!CM_products}" var="product" rendered="{!showProductTable}" onRowClick="co_clickElemForProduct(this);">
            
                <apex:column styleClass="pname" headerValue="Product Category" style="width:50%;">
                    <apex:outputField value="{!product.Name}"/>
                </apex:column>
                <apex:column styleClass="pCategory" headerValue="Product Type" style="width:50%;">
                    <apex:outputField value="{!product.Criteria_Type__c}"/>
                </apex:column>
                
            </apex:pageBlockTable>
            <apex:outputpanel rendered="{!IF(AND((!showProductTable),showProductTableSelected),true,false)}">
                <span><b>Product Category has been selected.</b></span>
            </apex:outputpanel>
            </apex:pageBlock>
        </td>
    </tr>
    <tr>
        <td width="40%">Product Name (Agreement)</td>
        <td width="30%"><apex:inputfield value="{!Account.Product_Name_for_Agreement__c}" styleClass="form-control"/></td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%"><apex:outputText rendered="{!IF(stateMasterState = 'NZ',true,false)}">COGS</apex:outputText> <apex:outputText rendered="{!IF(stateMasterState = 'NZ',false,true)}">Cash Price</apex:outputText></td>
        <td width="30%"><apex:inputfield styleClass="co_txtCostOfGoods form-control" value="{!Account.Product_COGS_for_Agreement__c}" onchange="co_changeCOGS(this);" /></td>
        <td width="30%"></td>
    </tr>
    <tr style="{!IF(stateMasterState == 'NZ','display:none;','')}">
        <td width="25%">Delivery Fee</td>
        <td width="25%"><apex:inputfield styleClass="co_txtDeliveryFee form-control" value="{!Account.Product_Delivery_Fee_For_Agreement__c}" onchange="changeCOGS(this);" /></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr style="{!IF(stateMasterState == 'NZ','','display:none;')}">
        <td width="40%">RRP</td>
        <td width="30%"><apex:inputfield styleClass="co_txtRRP form-control" value="{!Account.Product_RRP_for_Agreement__c}" onchange="co_changeCOGS(this);" /></td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">Term</td>
        <td width="30%">
            <apex:inputfield styleClass="co_ddlTerm form-control" value="{!Account.Product_Term_for_Agreement__c}" onchange="co_changeCOGS(this);"/>
        </td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">Payment Frequency</td>
        <td width="30%">
            <apex:selectList value="{!CM_PaymentFrequency}" styleClass="co_paymentFrequency form-control" size="1" multiselect="false" html-placeholder="Payment Frequency" onchange="co_changeCOGS(this);">
                <apex:selectOption itemLabel="Fortnightly" itemValue="Fortnightly"/>
                <apex:selectOption itemLabel="Weekly" itemValue="Weekly"/>
            </apex:selectList>
        </td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">FN Scheduled Amount</td>
        <td width="30%"><apex:inputField styleClass="co_txtRent form-control" value="{!Account.Rent4Keeps_Payment_C__c}"/></td>
        <td width="30%"><center><label class="field-label"><h4><font class="addBlackFont" color="{!IF(AND(Account.AgreementId_for_Current_Enquiry__c==null,!criteriaCheckedBeforeAgreementCreation),'#000000',IF(AND(!ISNULL(Account.Rent4Keeps_Payment_C__c),!ISNULL(Account.CM_Scheduled_Amount__c),Account.Rent4Keeps_Payment_C__c<=Account.CM_Scheduled_Amount__c),'#3cb200','#ff7f7f'))}"><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.CM_Scheduled_Amount__c}" /></apex:outputText></font></h4></label></center></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Red Flags
</a>

<table class="table table-bordered" id="cmRedFlagsTable">
    <tr>
        <td width="40%">Number of Dishonours</td>
        <td width="30%"><center><h4>{!IF(Account.Number_of_Dishonours__c = null, 0 , Account.Number_of_Dishonours__c)}</h4></center></td>
        <td width="30%"><center><h4 style="{!IF(cmDishonoursPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmDishonoursPercent}%</h4></center></td>
    </tr>
    <tr>
        <td width="40%">Gambling Expenditure</td>
        <td width="30%"><center><h4>${!IF(Account.Gambling_Expenditure__c = null, 0 , Account.Gambling_Expenditure__c)}</h4></center></td>
        <td width="30%"><center><h4 style="{!IF(cmGambilngPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmGambilngPercent}%</h4></center></td>
    </tr>
    <tr>
        <td width="40%">Collection and Consolidation</td>
        <td width="30%"><center><h4>${!IF(Account.Collection_and_Consolidation__c = null, 0 , Account.Collection_and_Consolidation__c)}</h4></center></td>
        <td width="30%"><center><h4 style="{!IF(cmCollectionPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmCollectionPercent}%</h4></center></td>
    </tr>
    <tr>
        <td width="40%">Overdrawn</td>
        <td width="30%"><center><h4>${!IF(Account.Overdrawn__c = null, 0 , Account.Overdrawn__c)}</h4></center></td>
        <td width="30%"><center><h4 style="{!IF(cmOverdrawnPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmOverdrawnPercent}%</h4></center></td>
    </tr>
    <apex:outputPanel rendered="{!IF(isJobseeker,true,false)}">
        <tr>
            <td width="40%">Youth Allowance &amp; Jobseeker</td>
            <td width="30%"><center><h4>${!IF(totalIncomeAmt = null, 0 , totalIncomeAmt)}</h4></center></td>
            <td width="30%"><center><h4 style="{!IF(cmJobseekerPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmJobseekerPercent}%</h4></center></td>
        </tr>
    </apex:outputPanel>
    <tr>
        <td width="40%">Credit Card Repayments</td>
        <td width="30%"><center><h4>${!IF(Account.Credit_Card__c = null,0,Account.Credit_Card__c)}</h4></center></td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">Loans</td>
        <td width="30%"><center><h4>${!IF(Account.Loan_Payments__c = null,0,Account.Loan_Payments__c)}</h4></center></td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">All Loan Debits</td>
        <td width="30%"><center><h4>${!IF(Account.Credit_Card__c = null,0,Account.Credit_Card__c) + IF(Account.Loan_Payments__c = null,0,Account.Loan_Payments__c)}</h4></center></td>
        <td width="30%"></td>
    </tr>
    <tr>
        <td width="40%">Debt to Income Ratio</td>
        <td width="30%"><center><h4>{!debtIncomePercent}%</h4></center></td>
        <td width="30%"><center><h4 style="{!IF(cmDebtRatioPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmDebtRatioPercent}%</h4></center></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Equifax
</a>

<table class="table table-bordered" id="cmEquifaxTable">
    <tr>
        <td width="40%">Outstanding Defaults to Rental companies</td>
        <td width="30%"><center><apex:inputField styleClass="defaultRentalInput form-control" value="{!Account.Equifax_No_of_Unpaid_Default_Rental__c}" html-placeholder="0" style=" border:  2px solid red; " rendered="{!showDefaultRental}"/><apex:outputPanel rendered="{!(!showDefaultRental)}"><label class="field-label" ><h4>{!Account.Equifax_No_of_Unpaid_Default_Rental__c}</h4></label></apex:outputPanel></center></td>
        <td width="30%"><center><h4 style="{!IF(cmRentalDefaultPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmRentalDefaultPercent}%</h4></center></td>
    </tr>
    <tr>
        <td width="40%">Outstanding Defaults to Non-Rental companies</td>
        <td width="30%"><center><apex:inputField styleClass="defaultNonRentalInput form-control" value="{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}" html-placeholder="0" style=" border:  2px solid red; " rendered="{!showDefaultNonRental}"/><apex:outputPanel rendered="{!(!showDefaultNonRental)}"><label class="field-label" ><h4>{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}</h4></label></apex:outputPanel></center></td>
        <td width="30%"><center><h4 style="{!IF(cmNonRentalDefaultPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmNonRentalDefaultPercent}%</h4></center></td>
    </tr>
    <tr>
        <td width="40%">Equifax Score</td>
        <td width="30%"><center><apex:inputField styleClass="equifaxScoreInput form-control" value="{!Account.Score_of_Equifax__c}" html-placeholder="0" style=" border:  2px solid red;" rendered="{!showEquifaxScore}"/><apex:outputPanel rendered="{!(!showEquifaxScore)}"><label class="field-label"><h4>{!Account.Score_of_Equifax__c}</h4></label></apex:outputPanel></center></td>
        <td width="30%"><center><h4 style="{!IF(cmEquifaxPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmEquifaxPercent}%</h4></center></td>
    </tr>
    <!--<tr>
        <td width="25%">Part 9 Agreements</td>
        <td width="25%"><center><label class="field-label"><h4>{!Account.Part_9_Agreements__c}</h4></label></center></td>
        <td width="25%"><center><apex:image value="{!IF(OR(Account.Part_9_Agreements__c==null,Account.Part_9_Agreements__c=='No'),$Resource.CheckIcon,$Resource.NoCheckIcon)}" width="20" height="20"/></center></td>
        <td width="25%"><apex:inputTextArea styleClass="part9Comments form-control" rendered="{!redPart9}" value="{!CM_Part9AgreementsComments}"/></td>  
    </tr>-->
    <tr>
        <td width="40%">Bankruptcy Part 10 Agreements</td>
        <td width="30%">
            <center><label class="field-label">
                <h4>
                    {!Account.Bankruptcy_Part_9_Agreements__c} 
                </h4>
            </label></center>
        </td>
        <td width="30%"><center><h4 style="{!IF(cmBankruptcyPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmBankruptcyPercent}%</h4></center></td>
    </tr>   
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Payment History
</a>

<table class="table table-bordered" id="cmPaymentTable">
    <tr>
        <td width="40%">
            No. of Payments Missed - Last 6 Payments <br/>
            <apex:outputPanel rendered="{!IF(Account.Rent4Keeps_Account__c != null, true, false)}">
                <a href="/apex/Rent4KeepsAccountHistory?acctId={!Account.Rent4Keeps_Account__c}" target="_blank">{!Account.Rent4Keeps_Account__r.Name}</a>
            </apex:outputPanel>
        </td>
        <td width="30%"><center><label class="field-label"><h4>{!Account.CM_No_of_Missed_Payments_Last_6_FN__c}</h4></label></center></td>
        <td width="30%"><center><h4 style="{!IF(cmMissedPaymentsPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmMissedPaymentsPercent}%</h4></center></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Serviceability
</a>

<table class="table table-bordered" id="cmServiceabilityTable">
    <tr>
        <td width="40%">Total Income</td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.Highlevel_Income__c}" /></apex:outputText></h4></label></center></td>
        <td width="30%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="40%">Total Expense</td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.Comfortable_Spending__c}" /></apex:outputText></h4></label></center></td>
        <td width="30%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="40%">Serviceablilty</td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, 00.00}%"><apex:param value="{!Account.Serviceability__c}" /></apex:outputText></h4></label></center></td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4><font color="{!IF(Account.CM_Serviceable__c=='Yes','#3cb200','#ff7f7f')}">{!Account.CM_Serviceable__c}</font></h4></label></center></td>
    </tr>
    <tr>
        <td width="40%">Total Risk Percentage</td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4 style="{!IF(maxRiskPercent <= 0,'color:#ff7f7f','color:#3cb200')}">{!maxRiskPercent}%</h4></label></center></td>
        <td width="30%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="40%">Eligible Percentage</td>
        <td width="30%" class="text-center"><center><label class="field-label"><h4 style="{!IF(eligiblePercent <= 0,'color:#ff7f7f','color:#3cb200')}">{!eligiblePercent}%</h4></label></center></td>
        <td width="30%" class="text-center">&nbsp;</td>
    </tr>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 mb-2 text-white" onclick="$('.co_enquiryTable').toggle();">
Enquiry Status
</a>

<div class="co_enquiryTable">
<table class="table table-sm table-bordered">
    <tr>
        <td>Enquiry Status</td>
        <td class="font-weight-bold">
            <apex:selectList size="1" multiselect="false" value="{!enquiryStatus}" styleClass="ddlEnquiryStatus form-control">
                <apex:selectOption itemValue="Enquiry" itemLabel="Enquiry"/>
                <apex:selectOption itemValue="Existing Account Enquiry" itemLabel="Existing Account Enquiry"/>
                <apex:selectOption itemValue="DNQ - Did Not Qualify" itemLabel="  DNQ - Did Not Qualify"/>
                <apex:selectOption itemValue="DNS - Did Not Service" itemLabel="DNS - Did Not Service"/>
                <apex:selectOption itemValue="DNC - Did Not Contact" itemLabel="DNC - Did Not Contact"/>
                <apex:selectOption itemValue="DNP - Did Not Proceed" itemLabel="DNP - Did Not Proceed"/>
                <apex:selectOption itemValue="DND - Do Not Deal" itemLabel="DND - Do Not Deal"/>
                <apex:selectOption itemValue="Third-Party Arrangement" itemLabel="Third-Party Arrangement"/>
                <apex:selectOption itemValue="Deceased" itemLabel="Deceased"/>
                <apex:selectOption itemValue="Incarcerated" itemLabel="Incarcerated"/> 
            </apex:selectList>
        </td>
    </tr>
    <tr>
        <td>Enquiry Notes</td>
        <td class="font-weight-bold">
            <apex:inputTextarea styleClass="enquiryNotes form-control" value="{!enquiryNotes}"/>
        </td>
    </tr>
    <tr>
        <td>Reason why application did not go ahead</td>
        <td class="font-weight-bold">
            <apex:inputTextArea value="{!reasonWhyApplicationDidNotGoAhead}" id="ddlReason" styleClass="ddlReason form-control"/>
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <a class="btn btn-success btn-block text-white saveDNbtn" onclick="co_saveDNDiv();">Save</a>
        </td>
    </tr>
</table>
</div>


</apex:outputPanel>

<!--------------- Confirmation ---------------->

<!--------------- Referees ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='referees',true,false)}">

    <div class="card-deck mt-2">
        <div class="card totalRefereeAddedCounter {!IF((totalRefereeAddedCounter >= 2 && newCustomer) || (totalRefereeAddedCounter >= 1 && !newCustomer),'bg-success','bg-danger')} text-white" data-toggle="modal" data-target=".refereeModal">
            <div class="card-body">
                <h1 class="text-center font-weight-bold">{!totalRefereeAddedCounter}</h1>
                <p class="card-text text-center font-weight-bold mt-2">Referees Added</p>
            </div>
        </div>
        <div class="card {!IF(refereesContacted >= creditMinTotalReferees,'bg-success','bg-danger')} text-white">
            <div class="card-body">
                <h1 class="text-center font-weight-bold">{!refereesContacted}</h1>
                <p class="card-text text-center font-weight-bold mt-2">Referees Contacted</p>
            </div>
        </div>
        <div class="card {!IF(refereesBeingFamMeber >= creditMinRefereesBeingFamily,'bg-success','bg-danger')} text-white">
            <div class="card-body">
                <h1 class="text-center font-weight-bold">{!refereesBeingFamMeber}</h1>
                <p class="card-text text-center font-weight-bold mt-2">Referees being family members</p>
            </div>
        </div>
        <div class="card {!IF((account.Residential_Status__c <> null && (account.Residential_Status__c == 'Boarding' || account.Residential_Status__c == 'Living with parents')),IF(refereesBeingFamMemberSharing >= creditMinRefereesBeingFamilySharedAccom,'bg-success','bg-danger'),'bg-success')} text-white">
            <div class="card-body">
                <h1 class="text-center font-weight-bold">{!refereesBeingFamMemberSharing}</h1>
                <p class="card-text text-center font-weight-bold mt-2">Referees being family members (Sharing)</p>
            </div>
        </div>
      </div>

</apex:outputPanel>
<!--------------- Referees ---------------->


<!--------------- Id Bank Mygov ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='id' || sectionType=='bank' || sectionType=='mygov',true,false)}">
<div class="alert alert-info font-weight-bold">
<h4>Hybrid Link Info :&nbsp;<apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!hybridLinkOpenedDateTime}"/></apex:outputText>&nbsp;--&nbsp;<apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!hybridLinkAllocationDateTime}"/></apex:outputText>&nbsp;--&nbsp;{!hybridLinkAddress}&nbsp;--&nbsp;{!hybridLinkDeviceInfo}</h4>
</div>

<div class="row">
<div class="col-3"></div>
<div class="col-6">
<!--------------- Id ---------------->

<apex:outputPanel rendered="{!sectionType=='id'}">
<!--<apex:iframe rendered="{!IF(idAtt!=null, true, false)}" height="600px" src="{!idAtt.url}" scrolling="true"/>-->
<apex:image rendered="{!IF(idAtt!=null, true, false)}" height="650px" width="100%" value="{!idAtt.url}"/>
<br/><br/>
<!--<apex:iframe rendered="{!IF(custPhotoAtt!=null, true, false)}" height="600px" src="/servlet/servlet.FileDownload?file={!custPhotoAtt}" scrolling="true"/>-->
<apex:image rendered="{!IF(custPhotoAtt!=null, true, false)}" height="650px" width="100%" value="/servlet/servlet.FileDownload?file={!custPhotoAtt}"/>
</apex:outputPanel>

<!--------------- Id ---------------->

<!--------------- Bank ---------------->
<apex:outputPanel rendered="{!sectionType=='bank'}">
<div id="docsBankAccordion">
    <apex:outputPanel rendered="{!IF(bankAttachmentWrapper.size > 0, true, false)}"> 
    <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#docsBankButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Bank</a>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(otherAttachmentWrapper.size > 0, true, false)}">
    <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#docsOtherButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Other</a>
    </apex:outputPanel>
        
    <apex:outputPanel rendered="{!IF(bankAttachmentWrapper.size > 0, true, false)}"> 
        <div class="bankButtons collapse" id="docsBankButtons" data-parent="#docsBankAccordion">
            <apex:repeat value="{!bankAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(otherAttachmentWrapper.size > 0, true, false)}">
        <div class="otherButtons collapse" id="docsOtherButtons" data-parent="#docsBankAccordion">
            <apex:repeat value="{!otherAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </apex:outputPanel>
    <hr/>
    <apex:repeat value="{!bankAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <apex:repeat value="{!otherAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
</div>
</apex:outputPanel>
<!--------------- Bank ---------------->

<!--------------- MyGov ---------------->
<apex:outputPanel rendered="{!sectionType=='mygov'}">
<div id="docsMygovAccordion">
    <apex:outputPanel rendered="{!IF(clinkAttachmentWrapper.size > 0, true, false)}">
    <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#docsMygovButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Mygov</a>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(otherAttachmentWrapper.size > 0, true, false)}">
    <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#docsOtherButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Other</a>
    </apex:outputPanel>
        
    <apex:outputPanel rendered="{!IF(clinkAttachmentWrapper.size > 0, true, false)}">
        <div class="clinkButtons collapse" id="docsMygovButtons" data-parent="#docsMygovAccordion"> 
            <apex:repeat value="{!clinkAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(otherAttachmentWrapper.size > 0, true, false)}">
        <div class="otherButtons collapse" id="docsOtherButtons" data-parent="#docsMygovAccordion">
            <apex:repeat value="{!otherAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </apex:outputPanel>
    <hr/>
    <apex:repeat value="{!clinkAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <apex:repeat value="{!otherAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>  
</div>
</apex:outputPanel>
<!--------------- MyGov ---------------->


</div>
<div class="col-3"></div>
</div>
</apex:outputPanel>
<!--------------- Id Bank Mygov  ---------------->

<div class="row">

<div class="col-6">

<!--------------- equifax ---------------->
<apex:outputPanel rendered="{!IF(AND(sectionType=='equifax',OR(equifaxAtt==null,secondEquifaxSearch)),true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="First Name">
    <apex:inputText value="{!firstNameVal}" styleClass="form-control equifaxEnquiryFirstName" html-placeholder="First Name"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Last Name">
    <apex:inputText value="{!lastNameVal}" styleClass="form-control equifaxEnquiryLastName" html-placeholder="Last Name"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Date of Birth">
    <apex:inputText value="{!dobVal}" styleClass="form-control equifaxEnquiryDOB" html-placeholder="Date of Birth" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Gender">
    <apex:selectList value="{!genderVal}" styleClass="equifaxEnquiryGender form-control" size="1" multiselect="false" html-placeholder="Gender">
        <apex:selectOption itemLabel="--None--" itemValue="--None--"/>
        <apex:selectOption itemLabel="Male" itemValue="Male"/>
        <apex:selectOption itemLabel="Female" itemValue="Female"/>
    </apex:selectList>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Street">
    <apex:inputText value="{!equifaxEnquiryStreet}" styleClass="form-control equifaxEnquiryStreet" html-placeholder="Street"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Suburb">
    <apex:inputText value="{!equifaxEnquiryCity}" styleClass="form-control equifaxEnquiryCity" html-placeholder="Suburb"/>
</div>
<apex:outputPanel rendered="{!IF(stateMasterState = 'NZ',true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="City">
    <apex:inputText value="{!equifaxEnquiryState}" styleClass="form-control equifaxEnquiryState" html-placeholder="City"/>
</div>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(stateMasterState != 'NZ',true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="State">
    <apex:selectList size="1" multiselect="false" value="{!equifaxEnquiryState}" styleClass="equifaxEnquiryState form-control">
        <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
        <apex:selectOption itemValue="VIC" itemLabel="VIC"/>
        <apex:selectOption itemValue="NSW" itemLabel="NSW"/>
        <apex:selectOption itemValue="WA" itemLabel="WA"/>
        <apex:selectOption itemValue="SA" itemLabel="SA"/>
        <apex:selectOption itemValue="QLD" itemLabel="QLD"/>
        <apex:selectOption itemValue="NT" itemLabel="NT"/>
        <apex:selectOption itemValue="TAS" itemLabel="TAS"/>
        <apex:selectOption itemValue="ACT" itemLabel="ACT"/>
    </apex:selectList>
</div>
</apex:outputPanel>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Postcode">
    <apex:inputText value="{!equifaxEnquiryPostCode}" styleClass="form-control equifaxEnquiryPostCode" html-placeholder="Postcode"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Previous Address">
    <apex:inputText value="{!equifaxEnquiryPreviousAddress}" styleClass="form-control equifaxEnquiryPreviousAddress" html-placeholder="Previous Address"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Drivers Licence No.">
    <apex:inputText value="{!driversLicense}" styleClass="form-control driverLicenceVal" html-placeholder="Drivers Licence No"/>
</div>
<apex:outputPanel rendered="{!IF(stateMasterState = 'NZ',true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Drivers Licence Version No.">
    <apex:inputText value="{!driversLicenseVersion}" styleClass="form-control driversLicenseVersion" html-placeholder="Drivers Licence Version No."/>
</div>
</apex:outputPanel>

<div class="form-row mt-4 mb-4" data-toggle="tooltip" data-placement="top" title="Expected TAV">
    <apex:inputText value="{!equifaxEnquiryAmount}" styleClass="form-control equifaxEnquiryAmount" html-placeholder="Expected TAV"/>
</div>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(AND(sectionType=='equifax',equifaxAtt<>null,!secondEquifaxSearch),true,false)}">
<table class="table table-bordered">
    <tr>
        <td>Age Of File</td>
        <td class="text-center font-weight-bold">{!IF(Account.Equifax_Age_of_File__c == null, 0 , Account.Equifax_Age_of_File__c)}</td>
    </tr>
    <tr>
        <td>Equifax File Number</td>
        <td class="text-center font-weight-bold">{!Account.Veda_File_Number__c}</td>
    </tr>
    <tr>
        <td>Equifax Score</td>
        <td class="text-center font-weight-bold">{!Account.Score_of_Equifax__c}</td>
    </tr>
    <tr>
        <td>Part 9 Agreements</td>
        <td class="text-center font-weight-bold">{!Account.Part_9_Agreements__c}</td>
    </tr>
    <tr>
        <td>Bankruptcy &amp; Part 10 Agreements</td>
        <td class="text-center font-weight-bold">{!Account.Bankruptcy_Part_9_Agreements__c}</td>
    </tr>
    <tr>
        <td>No of Unpaid Defaults - Rental</td>
        <td class="text-center font-weight-bold">{!Account.Equifax_No_of_Unpaid_Default_Rental__c}</td>
    </tr>
    <tr>
        <td>No of Unpaid Defaults - Non Rental</td>
        <td class="text-center font-weight-bold">{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}</td>
    </tr>
    <tr>
        <td>No of Enquiries Last 6 Months</td>
        <td class="text-center font-weight-bold">{!Account.No_of_Equifax_Enquiries_Last_6_Month__c}</td>
    </tr>
    <tr>
        <td>Explanation for Recent Enquiries</td>
        <td class="text-center font-weight-bold">{!Account.Enquiries_in_the_last_6_months__c}</td>
    </tr>
</table>
<apex:commandButton value="Do Another Equifax Search" action="{!doSecondEquifaxSearch}" styleclass="btn btn-block btn-danger"/>
</apex:outputPanel>
<!--------------- equifax ---------------->

<!--------------- Bank ----------------
<apex:outputPanel rendered="{!IF(sectionType=='bank',true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Bank">
    <apex:inputText value="{!bankSelected}" styleClass="form-control bankSelected" html-placeholder="Bank"/>
</div>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(sectionType=='mygov',true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Centrelink Benefit 1">
    <apex:selectList size="1" multiselect="false" styleClass="medium benefit1Option" value="{!benefit1Option}" html-placeholder="Centrelink Benefit 1">
       <apex:selectOption itemValue="" itemLabel="--None--"/>
        <apex:selectOption itemValue="Abstudy" itemLabel="Abstudy"/>
        <apex:selectOption itemValue="Newstart Allowance / JobSeeker" itemLabel="Newstart Allowance / JobSeeker"/>
        <apex:selectOption itemValue="Parenting Payment" itemLabel="Parenting Payment"/>
        <apex:selectOption itemValue="Pension Payment" itemLabel="Pension Payment"/>
        <apex:selectOption itemValue="Family Tax Payment" itemLabel="Family Tax Payment"/>
        <apex:selectOption itemValue="Carer Payment" itemLabel="Carer Payment"/>
        <apex:selectOption itemValue="Income Management" itemLabel="Income Management"/>
        <apex:selectOption itemValue="Mobility Allowance" itemLabel="Mobility Allowance"/>
        <apex:selectOption itemValue="Pension Education Supplement" itemLabel="Pension Education Supplement"/>
        <apex:selectOption itemValue="Paid Parental Leave" itemLabel="Paid Parental Leave"/>
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Centrelink Benefit 1 Amount">
    <apex:inputText value="{!benefit1Amount}" styleClass="form-control firstNameVal" html-placeholder="Centrelink Benefit 1 Amount"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Centrelink Benefit 2">
    <apex:selectList size="1" multiselect="false" styleClass="medium benefit2Option" value="{!benefit2Option}" html-placeholder="Centrelink Benefit 2">
       <apex:selectOption itemValue="" itemLabel="--None--"/>
        <apex:selectOption itemValue="Abstudy" itemLabel="Abstudy"/>
        <apex:selectOption itemValue="Newstart Allowance / JobSeeker" itemLabel="Newstart Allowance / JobSeeker"/>
        <apex:selectOption itemValue="Parenting Payment" itemLabel="Parenting Payment"/>
        <apex:selectOption itemValue="Pension Payment" itemLabel="Pension Payment"/>
        <apex:selectOption itemValue="Family Tax Payment" itemLabel="Family Tax Payment"/>
        <apex:selectOption itemValue="Carer Payment" itemLabel="Carer Payment"/>
        <apex:selectOption itemValue="Income Management" itemLabel="Income Management"/>
        <apex:selectOption itemValue="Mobility Allowance" itemLabel="Mobility Allowance"/>
        <apex:selectOption itemValue="Pension Education Supplement" itemLabel="Pension Education Supplement"/>
        <apex:selectOption itemValue="Paid Parental Leave" itemLabel="Paid Parental Leave"/>
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Centrelink Benefit 2 Amount">
    <apex:inputText value="{!benefit2Amount}" styleClass="form-control firstNameVal" html-placeholder="Centrelink Benefit 2 Amount"/>
</div>
</apex:outputPanel>
---------------->

</div>
<div class="col-6">
<!--------------- Equifax ---------------->

<apex:outputPanel rendered="{!sectionType=='equifax'}">
    <apex:iframe rendered="{!IF(AND(equifaxAtt!=null,!secondEquifaxSearch), true, false)}" height="600px" src="{!equifaxAtt.url}" scrolling="true"/> 
    
    <apex:outputPanel rendered="{!IF(OR(equifaxAtt=null,secondEquifaxSearch), true, false)}">

    <apex:image rendered="{!IF(AND(idAtt!=null,!equifaxValid), true, false)}" height="600px" width="90%" value="{!idAtt.url}"/>
        <apex:outputPanel rendered="{!IF(equifaxValid, true, false)}">
        <!--<a class="btn btn-disabled btn-success btn-block">Primary Match</a>
        <table class="table table-sm table-bordered">
            <thead>
                <th width="10%">First Name</th>
                <th width="10%">Family Name</th>
                <th width="10%">Equifax File No.</th>
                <th width="10%">Gender</th>
                <th width="10%">DOB</th>
                <th width="10%">Drivers License</th>
                <th width="10%">Age of File</th>
                <th width="10%">Current Address</th>
                <th width="10%">Employer</th>
                <th width="10%">Previous Address</th>
            </thead>
            <apex:repeat value="{!npc.primaryMatches}" var="match">
                <tr>
                    <td>{!match.firstGivenName}</td>
                    <td>{!match.familyName}</td>
                    <td>{!match.bureauReference}</td>
                    <td>{!match.gender}</td>
                    <td><apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!match.dateOfBirth}" /> </apex:outputText></td>
                    <td>{!match.driversLicenceNumber}</td>
                    <td>{!match.ageOfFile}</td>
                    <td>{!match.address}</td>
                    <td>{!match.employment}</td>
                    <td>{!match.previousAddress}</td>
                </tr>
            </apex:repeat>
        </table>
        
        <a class="btn btn-disabled btn-warning btn-block">Possible Matches</a>
        <table class="table table-sm table-bordered">
            <thead>
                <th width="10%">First Name</th>
                <th width="10%">Family Name</th>
                <th width="10%">Equifax File No.</th>
                <th width="10%">Gender</th>
                <th width="10%">DOB</th>
                <th width="10%">Drivers License</th>
                <th width="10%">Age of File</th>
                <th width="10%">Current Address</th>
                <th width="10%">Employer</th>
                <th width="10%">Previous Address</th>
            </thead>
            <apex:repeat value="{!npc.primaryMatches}" var="match">
                <tr>
                    <td>{!match.firstGivenName}</td>
                    <td>{!match.familyName}</td>
                    <td>{!match.bureauReference}</td>
                    <td>{!match.gender}</td>
                    <td><apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!match.dateOfBirth}" /> </apex:outputText></td>
                    <td>{!match.driversLicenceNumber}</td>
                    <td>{!match.ageOfFile}</td>
                    <td>{!match.address}</td>
                    <td>{!match.employment}</td>
                    <td>{!match.previousAddress}</td>
                </tr>
            </apex:repeat>
        </table>-->
        
        <apex:pageBlock title="Primary Match">
        <apex:variable var="i" value="{!0}"/> 
        <apex:pageBlockTable onRowClick="getPrimaryMatchData(this)" value="{!npc.primaryMatches}" var="match">
            <apex:column style="width:5%">
                <apex:variable var="i" value="{!i+1}"/><apex:facet name="header">S.No.</apex:facet>{!i}
            </apex:column>
            <apex:column style="width:10%" styleClass="pmFirstName">
                <apex:facet name="header">First Name</apex:facet>
                    {!match.firstGivenName}
            </apex:column>
            <apex:column styleClass="pmFamilyName" style="width:10%">
                <apex:facet name="header">Family Name</apex:facet>
                    {!match.familyName}
            </apex:column>
    
            <apex:column styleClass="pmBureauReference" style="width:10%">
                <apex:facet name="header">Equifax File No.</apex:facet>
                    {!match.bureauReference}
            </apex:column>
            <apex:column styleClass="pmGender" style="width:5%">
                <apex:facet name="header">Gender</apex:facet>
                    {!match.gender}
            </apex:column>
            <apex:column styleClass="pmdob" style="width:5%">
                <apex:facet name="header">DOB</apex:facet>
                 <apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!match.dateOfBirth}" /> </apex:outputText>
                   
            </apex:column>
            <apex:column styleClass="pmLicense" style="width:10%">
                <apex:facet name="header">Drivers License</apex:facet>
                    {!match.driversLicenceNumber}
            </apex:column>
            <apex:column styleClass="pmgeOfFile" style="width:10%">
                <apex:facet name="header">Age of File</apex:facet>
                    {!match.ageOfFile}
            </apex:column>
            <apex:column styleClass="pmCurrentAddress" style="width:17%">
                <apex:facet name="header">Current Address</apex:facet>
                    {!match.address}
            </apex:column>
            <apex:column styleClass="pmEmployer" style="width:11%">
                <apex:facet name="header">Employer</apex:facet>
                    {!match.employment}
            </apex:column>
            <apex:column styleClass="pmPreviousAddress" style="width:17%">
                <apex:facet name="header">Previous Address</apex:facet>
                    {!match.previousAddress}
            </apex:column>
            </apex:pageBlockTable>
    </apex:pageBlock>
    <apex:pageBlock title="Possible Matches">
        <apex:variable var="i" value="{!0}"/>
        <apex:pageBlockTable onRowClick="getMatchData(this)" value="{!npc.possibleMatches}" var="match">
            <apex:column style="width:5%">
                <apex:variable var="i" value="{!i+1}"/><apex:facet name="header">S.No.</apex:facet>{!i}
            </apex:column>
            <apex:column styleClass="matchFirstName" style="width:10%">
                <apex:facet name="header">First Name</apex:facet>
                    {!match.firstGivenName}
            </apex:column>
            <apex:column styleClass="matchFamilyName" style="width:10%">
                <apex:facet name="header">Family Name</apex:facet>
                    {!match.familyName}
            </apex:column>
            <apex:column styleClass="matchBureauReference" style="width:10%">
                <apex:facet name="header">Equifax File No.</apex:facet>
                    {!match.bureauReference}
            </apex:column>
            <apex:column styleClass="matchGender" style="width:5%">
                <apex:facet name="header">Gender</apex:facet>
                    {!match.gender}
            </apex:column>
            <apex:column styleClass="matchdob" style="width:5%">
                <apex:facet name="header">DOB</apex:facet>
                    <apex:outputText value="{0,date,dd/MM/yyyy}"> <apex:param value="{!match.dateOfBirth}" /> </apex:outputText>
            </apex:column>
            <apex:column styleClass="matchLicense" style="width:10%">
                <apex:facet name="header">Drivers License</apex:facet>
                    {!match.driversLicenceNumber}
            </apex:column>
            <apex:column styleClass="matchCurrentAddress" style="width:17%">
                <apex:facet name="header">Current Address</apex:facet>
                    {!match.address}
            </apex:column>
            <apex:column styleClass="employer" style="width:11%">
                <apex:facet name="header">Employer</apex:facet>
                    {!match.employment}
            </apex:column>
                <apex:column styleClass="matchPreviousAddress" style="width:17%">
                <apex:facet name="header">Previous Address</apex:facet>
                    {!match.previousAddress}
            </apex:column>
        </apex:pageBlockTable>
    </apex:pageBlock>
        </apex:outputPanel>
    </apex:outputPanel>
</apex:outputPanel>

<!--------------- Equifax ---------------->
</div>
</div>
</apex:outputPanel>


<apex:outputPanel rendered="{!IF(formType=='assessment',true,false)}">

<div class="mt-2 mb-2">
    <apex:outputPanel rendered="{!!showApprovalScreen}"><a class="btn btn-block btn-success text-white" onclick="savingMessage('','','next','next');">Next</a></apex:outputPanel>
    <apex:outputPanel rendered="{!IF(sectionType='credit',true,false)}">
        <apex:outputPanel rendered="{!IF(AND(Account.AgreementId_for_Current_Enquiry__c!=null,!showApprovalScreen),true,false)}" layout="none">
            <apex:commandButton value="Submit" action="{!checkCriteriaAndSubmitCreditMatrix}" styleClass="mt-2 nextbuttonCM btn btn-block btn-warning"/>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(AND(OR(Account.AgreementId_for_Current_Enquiry__c==null,Account.AgreementId_for_Current_Enquiry__c==''),!showApprovalScreen),true,false)}" layout="none">
            <a class="mt-2 miscbuttonCM btn btn-block btn-primary text-white">Check RAM Assistance</a>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(AND(!showApprovalScreen,AND(Account.AgreementId_for_Current_Enquiry__c==null,criteriaCheckedBeforeAgreementCreation),!(showEquifaxScore || showDefaultRental || showDefaultNonRental)),true,false)}" layout="none">
            <apex:commandButton value="Create Agreement & Check RAM Assistance" action="{!checkCriteriaAndCreateAgreement}" styleClass="mt-2 extrabuttonCM btn btn-block btn-info text-white"/>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!IF(AND(!showApprovalScreen,Account.AgreementId_for_Current_Enquiry__c!=null,Account.AgreementId_for_Current_Enquiry__c!=''),true,false)}" layout="none">
            <a class="mt-2 miscbuttonCM btn btn-block btn-primary text-white">Check RAM Assistance</a>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!AND(showApprovalScreen,!approvalSent)}" layout="none">
            <apex:commandButton value="Submit for Approval" action="{!submitApprovalRequest}" styleClass="mt-2 miscButtonApproval btn btn-block btn-success text-white" onclick="return miscbuttonApprovalFunc();"/>
        </apex:outputPanel>
    </apex:outputPanel>
</div>

<!--------------- Credit Matrix ---------------->
<apex:outputPanel rendered="{!IF(showApprovalScreen,true,false)}">
<apex:outputPanel rendered="{!IF(AND(!approvalApproved,approvalSent),true,false)}"><center><label class="field-label"><h4><font color="#3cb200">This application is rejected by CAM and has been submitted to Line Manager</font></h4></label></center></apex:outputPanel>
<apex:outputPanel rendered="{!IF(AND(approvalApproved,approvalSent),true,false)}"><center><label class="field-label"><h4><font color="#3cb200">Applicant is approved to proceed with the Agreement. <br/> Compliance Review Number - {!approvalNumber}</font></h4></label></center></apex:outputPanel>
<apex:outputPanel rendered="{!AND(showRepAutoEligibleMessage,!approvalSent)}"><center><label class="field-label"><h4><font color="red">{!selectedRepName} is not eligible for Auto Approval Process.You have to submit the Application through Compliance Review Process.</font></h4></label></center></apex:outputPanel>

<apex:outputPanel rendered="{!AND(currentApprovalStatus <> null, !approvalSent)}">
    <div class="bg-danger text-white font-weight-bold">
        <h3>Approval Status -&nbsp;{!currentApprovalStatus}</h3>
    </div>
</apex:outputPanel>

<apex:outputPanel rendered="{!!approvalSent}">
<table class="table table-bordered">
    <tr>
        <td width="50%">Rep Name</td>
        <td width="50%">
            <apex:selectList size="1" id="ddlRepNames" styleClass="ddlRepName" value="{!repName}" >
                <apex:actionSupport event="onchange" action="{!selectRepName}"/>
                <apex:selectOptions value="{!repNames}"/>
            </apex:selectList>
        </td>
    </tr>

    <apex:outputPanel rendered="{!redScheduledAmount}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Scheduled Amount - {!Account.CM_Scheduled_Amount_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redDishonours}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Number of Dishonours - {!Account.CM_Dishonours__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redGambling}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Gambling - {!Account.CM_Gambling__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redCollectionConsolidation}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Collection and Consolidation - {!Account.CM_Collection_And_Consolidation__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redOverdrawn}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Overdrawn - {!Account.CM_Overdrawn__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redJobseeker}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Youth Allowance &amp; Jobseeker - {!Account.CM_Jobseeker__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redDebtRatio}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Debt to Income Ratio - {!Account.CM_Debt_vs_Income_Ratio_Greater_Than_50__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redRentalDefault}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Outstanding Defaults to Rental companies - {!Account.CM_OutstandingDefRental_Comp_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redNonRentalDefault}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Outstanding Defaults to Non-Rental companies - {!Account.CM_OutstandingDefNonRental_Comp_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redEquifaxScore}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Equifax Score - {!Account.CM_Equifax_Score_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redBankruptcy}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Bankruptcy - {!Account.CM_Bankruptcy_Part_9_Agreements_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redNoOfMissedPayments}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; No. of Payments Missed - Last 6 Payments - {!Account.CM_Missed_from_last_6_FN_pymts_Comments__c}</font></h3></td></tr></apex:outputPanel>
    <apex:outputPanel rendered="{!redServiceability}"><tr><td colspan="2"><h3 class="simple-bold"><font color="#ff7f7f"> &#x25cf; Serviceability - {!Account.CM_Serviceablilty_Comments__c}</font></h3></td></tr></apex:outputPanel>
    
    <tr><td>Reason to go ahead with the Application</td><td><apex:inputfield value="{!Account.CM_Reason_to_go_forward__c}" styleClass="reasonToGoAhead form-control"/></td></tr>
    <apex:outputPanel rendered="{!showAnswersToCreditOfficerComments}"><tr><td>Answers to Credit Officer Comments</td><td><apex:inputTextArea value="{!answersToCreditOfficerComments}" styleClass="answersToCreditOfficerComments form-control"/></td></tr></apex:outputPanel>
</table>

<apex:outputPanel rendered="{!IF(roMissing,true,false)}">
<table class="table table-bordered">
<thead class="bg-danger text-white"><th colspan="2">R&amp;O</th></thead>
<tbody>
<tr><td width="50%">Requirements and Objectives</td><td width="50%">Please go back to the R&amp;O screen and fill in all the fields.<br/><a onclick="savingMessage('','','assessment','ro');" class="btn btn-primary text-white">Click here to go to R&amp;O screen</a></td></tr>
</tbody>
</table>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(OR(Account.Marital_Status__pc=null,Account.Marital_Status__pc='--None--',Account.Address_Verification_Type__c=null),true,false)}">
<table class="table table-bordered">
<thead class="bg-danger text-white"><th colspan="2">Id</th></thead>
<tbody>
<apex:outputPanel rendered="{!IF(OR(Account.Marital_Status__pc=null,Account.Marital_Status__pc='--None--'),true,false)}">
<tr><td width="50%">Marital Status</td><td width="50%"><apex:inputField value="{!Account.Marital_Status__pc}" styleClass="maritalStatusFinal form-control"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(account.Length_of_Stay_in_Current_Address__c == null,true,false)}">
<tr><td width="50%">Length of stay in current address (Months)</td><td width="50%"><apex:inputField value="{!Account.Length_of_Stay_in_Current_Address__c}" styleClass="lengthofStayFinal form-control"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(Account.Address_Verification_Type__c=null,true,false)}">
<tr><td width="50%">Address Verification Type</td><td width="50%"><apex:inputField value="{!Account.Address_Verification_Type__c}" styleClass="addressVerificationFinal form-control"/></td></tr>
</apex:outputPanel>
</tbody>
</table>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(OR(((account.Employment_Income__c != null && account.Employment_Income__c != 0) && (employmentStartDate == null || employmentStartDate == '')),((account.Employment_Income__c != null && account.Employment_Income__c != 0) && (Account.Employer_Name__c == null || Account.Employer_Name__c == '')),Account.Income_Verification_type__c=null,Account.Expense_Verification_Type__c=null,expenseDetailsMissing),true,false)}">
<table class="table table-bordered">
<thead class="bg-danger text-white"><th colspan="2">Serviceability</th></thead>
<tbody>
<apex:outputPanel rendered="{!IF(((account.Employment_Income__c != null && account.Employment_Income__c != 0) && (Account.Employer_Name__c == null || Account.Employer_Name__c == '')),true,false)}">
<tr><td width="50%">Employer Name</td><td width="50%"><apex:inputField value="{!Account.Employer_Name__c}" styleClass="form-control employerNameFinal"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(((account.Employment_Income__c != null && account.Employment_Income__c != 0) && (employmentStartDate == null || employmentStartDate == '')),true,false)}">
<tr><td width="50%">Employment Start Date</td><td width="50%"><apex:inputText value="{!employmentStartDate}" styleclass="form-control employmentStartDateFinal" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(Account.Income_Verification_type__c=null,true,false)}">
<tr><td width="50%">Income Verification Type</td><td width="50%"><apex:inputField value="{!Account.Income_Verification_type__c}" styleClass="incomeVerificationFinal form-control"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(Account.Expense_Verification_Type__c=null,true,false)}">
<tr><td width="50%">Expense Verification Type</td><td width="50%"><apex:inputField value="{!Account.Expense_Verification_Type__c}" styleClass="expenseVerificationFinal form-control"/></td></tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(expenseDetailsMissing,true,false)}">
<tr>
<td width="50%">Expense Details</td>
<td width="50%">
Please go back to the serviceability screen and enter the following expense details. <br/> 
<apex:outputPanel rendered="{!IF(Account.Rent_Mortgage_Board_Details__c == null || Account.Rent_Mortgage_Board_Details__c == '' || Account.Rent_Mortgage_Board_Details__c == 'None',true,false)}">Rent Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Loan_Payment_Details__c == null || Account.Loan_Payment_Details__c == '' || Account.Loan_Payment_Details__c == 'None',true,false)}">Loan Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Credit_Card_Details__c == null || Account.Credit_Card_Details__c == '' || Account.Credit_Card_Details__c == 'None',true,false)}">Credit Card Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Insurance_Details__c == null || Account.Insurance_Details__c == '' || Account.Insurance_Details__c == 'None',true,false)}">Insurance Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Food_Details__c == null || Account.Food_Details__c == '' || Account.Food_Details__c == 'None',true,false)}">House Hold Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Utilities_Details__c == null || Account.Utilities_Details__c == '' || Account.Utilities_Details__c == 'None',true,false)}">Utilities Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Car_Lease_Loan_Payment_Details__c == null || Account.Car_Lease_Loan_Payment_Details__c == '' || Account.Car_Lease_Loan_Payment_Details__c == 'None',true,false)}">Car Petrol Travel Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Mobile_Expenses_Details__c == null || Account.Mobile_Expenses_Details__c == '' || Account.Mobile_Expenses_Details__c == 'None',true,false)}">Mobile Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Clothing_Details__c == null || Account.Clothing_Details__c == '' || Account.Clothing_Details__c == 'None',true,false)}">Clothing Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Tobacco_Alcohol_Details__c == null || Account.Tobacco_Alcohol_Details__c == '' || Account.Tobacco_Alcohol_Details__c == 'None',true,false)}">Tobacco Alcohol Details <br/></apex:outputPanel> 
<apex:outputPanel rendered="{!IF(Account.Other_Details__c == null || Account.Other_Details__c == '' || Account.Other_Details__c == 'None',true,false)}">Other Details <br/></apex:outputPanel> 
<a onclick="savingMessage('','','assessment','bank');" class="btn btn-primary text-white">Click here to go to Serviceability screen</a>
</td>
</tr>
</apex:outputPanel>
<apex:outputPanel rendered="{!IF(OR(Account.Serviceability_Comments__c=null,Account.Serviceability_Comments__c==''),true,false)}">
<tr>
<td width="50%">Serviceability Comments</td>
<td width="50%">
<apex:inputField value="{!Account.Serviceability_Comments__c}" styleClass="serviceabilityCommentsFinal form-control"/> 
</td>
</tr>
</apex:outputPanel>
</tbody>
</table>
</apex:outputPanel>

</apex:outputPanel>

</apex:outputPanel>

<apex:outputPanel rendered="{!IF(AND(sectionType=='credit',!showApprovalScreen),true,false)}">
<div id="cmTableAccordion">

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Product
</a>

<table class="table table-bordered" id="cmProductTable">
    <tr>
        <td width="25%">Product Category</td>
        <td width="25%"><apex:inputfield value="{!Account.Product_Category_Selected__c}" styleClass="form-control prodCategory" onkeyup="doSearchForProducts();"/></td>
        <td width="25%">
            <center><label class="field-label"><h4><apex:outputText styleClass="prodCriteria" value="{!Account.CM_Product_Category__c}"/></h4></label></center>
            <apex:inputField value="{!Account.CM_Product_Category__c}" styleClass="prodCriteriaHidden" style="display:none;"/>
        </td>
        <td width="25%">
            <!--<apex:inputField styleClass="prodCategoryComments form-control" rendered="{!redProductCategory}" value="{!Account.CM_Product_Category_Comments__c}"/>-->
        </td>
    </tr>
    <tr>
        <td colspan="4" class="bg-warning">            
            <apex:pageBlock id="resultsForProducts">
            <apex:pageBlockTable value="{!CM_products}" var="product" rendered="{!showProductTable}" onRowClick="clickElemForProduct(this);">
            
                <apex:column styleClass="pname" headerValue="Product Category" style="width:50%;">
                    <apex:outputField value="{!product.Name}"/>
                </apex:column>
                <apex:column styleClass="pCategory" headerValue="Product Type" style="width:50%;">
                    <apex:outputField value="{!product.Criteria_Type__c}"/>
                </apex:column>
                
            </apex:pageBlockTable>
            <!--<apex:outputpanel rendered="{!IF(AND((!showProductTable),(!showProductTableSelected)),true,false)}">
                <span><b>No records found.</b></span>
            </apex:outputpanel>-->
            <apex:outputpanel rendered="{!IF(AND((!showProductTable),showProductTableSelected),true,false)}">
                <span><b>Product Category has been selected.</b></span>
            </apex:outputpanel>
            </apex:pageBlock>
        </td>
    </tr>
    <tr>
        <td width="25%">Product Name (Agreement)</td>
        <td colspan="2"><apex:inputfield value="{!Account.Product_Name_for_Agreement__c}" styleClass="form-control"/></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%"><apex:outputText rendered="{!IF(stateMasterState = 'NZ',true,false)}">COGS</apex:outputText> <apex:outputText rendered="{!IF(stateMasterState = 'NZ',false,true)}">Cash Price</apex:outputText></td>
        <td width="25%"><apex:inputfield styleClass="txtCostOfGoods form-control" value="{!Account.Product_COGS_for_Agreement__c}" onchange="changeCOGS(this);" /></td>
        <td width="25%">
            <!--<center><label class="field-label"><h4><font class="addBlackFont" color="{!IF(AND(Account.AgreementId_for_Current_Enquiry__c==null,!criteriaCheckedBeforeAgreementCreation),'#000000',IF(AND(!ISNULL(Account.Product_COGS_for_Agreement__c),!ISNULL(Account.CM_COGS__c),Account.Product_COGS_for_Agreement__c<=Account.CM_COGS__c),'#3cb200','#ff7f7f'))}"><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.CM_COGS__c}" /></apex:outputText></font></h4></label></center>-->
        </td>
        <td width="25%">
            <!--<apex:inputField styleClass="prodCOGSComments form-control" rendered="{!redCOGS}" value="{!Account.CM_COGS_Comments__c}"/>-->
        </td>
    </tr>
    <tr style="{!IF(stateMasterState == 'NZ','display:none;','')}">
        <td width="25%">Delivery Fee</td>
        <td width="25%"><apex:inputfield styleClass="txtDeliveryFee form-control" value="{!Account.Product_Delivery_Fee_For_Agreement__c}" onchange="changeCOGS(this);" /></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr style="{!IF(stateMasterState == 'NZ','','display:none;')}">
        <td width="25%">RRP</td>
        <td width="25%"><apex:inputfield styleClass="txtRRP form-control" value="{!Account.Product_RRP_for_Agreement__c}" onchange="changeCOGS(this);" /></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%">Term</td>
        <td width="25%">
            <apex:inputfield styleClass="ddlTerm form-control" value="{!Account.Product_Term_for_Agreement__c}" onchange="changeCOGS(this);"/>
        </td>
        <td width="25%">
            <!--<center><label class="field-label"><h4><font class="addBlackFont" color="{!IF(AND(Account.AgreementId_for_Current_Enquiry__c==null,!criteriaCheckedBeforeAgreementCreation),'#000000',IF(creditMaxTermPassed,'#3cb200','#ff7f7f'))}">{!creditMaxTerm}</font></h4></label></center>-->
        </td>
        <td width="25%">
            <!--<apex:inputTextArea styleClass="termComments form-control" rendered="{!redTerm}" value="{!CM_TermComments}"/>-->
        </td>
    </tr>
    <tr>
        <td width="25%">Payment Frequency</td>
        <td width="25%">
            <apex:selectList value="{!CM_PaymentFrequency}" styleClass="paymentFrequency form-control" size="1" multiselect="false" html-placeholder="Payment Frequency" onchange="changeCOGS(this);">
                <apex:selectOption itemLabel="Fortnightly" itemValue="Fortnightly"/>
                <apex:selectOption itemLabel="Weekly" itemValue="Weekly"/>
            </apex:selectList>
        </td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%">FN Scheduled Amount</td>
        <td width="25%"><apex:inputField styleClass="txtRent form-control" value="{!Account.Rent4Keeps_Payment_C__c}"/></td>
        <td width="25%"><center><label class="field-label"><h4><font class="addBlackFont" color="{!IF(AND(Account.AgreementId_for_Current_Enquiry__c==null,!criteriaCheckedBeforeAgreementCreation),'#000000',IF(AND(!ISNULL(Account.Rent4Keeps_Payment_C__c),!ISNULL(Account.CM_Scheduled_Amount__c),Account.Rent4Keeps_Payment_C__c<=Account.CM_Scheduled_Amount__c),'#3cb200','#ff7f7f'))}"><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.CM_Scheduled_Amount__c}" /></apex:outputText></font></h4></label></center></td>
        <td width="25%"><apex:inputField styleClass="scheduledAmountComments form-control" rendered="{!redScheduledAmount}" value="{!Account.CM_Scheduled_Amount_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Red Flags
</a>

<table class="table table-bordered" id="cmRedFlagsTable">
    <tr>
        <td width="25%">Number of Dishonours</td>
        <td width="25%"><center><h4>{!IF(Account.Number_of_Dishonours__c = null, 0 , Account.Number_of_Dishonours__c)}</h4></center></td>
        <td width="25%"><center><h4 style="{!IF(cmDishonoursPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmDishonoursPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="CM_DishonourComments form-control" rendered="{!redDishonours}" value="{!Account.CM_Dishonours__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Gambling Expenditure</td>
        <td width="25%"><center><h4>${!IF(Account.Gambling_Expenditure__c = null, 0 , Account.Gambling_Expenditure__c)}</h4></center></td>
        <td width="25%"><center><h4 style="{!IF(cmGambilngPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmGambilngPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="CM_GamblingComments form-control" rendered="{!redGambling}" value="{!Account.CM_Gambling__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Collection and Consolidation</td>
        <td width="25%"><center><h4>${!IF(Account.Collection_and_Consolidation__c = null, 0 , Account.Collection_and_Consolidation__c)}</h4></center></td>
        <td width="25%"><center><h4 style="{!IF(cmCollectionPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmCollectionPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="CM_CollectionComments form-control" rendered="{!redCollectionConsolidation}" value="{!Account.CM_Collection_And_Consolidation__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Overdrawn</td>
        <td width="25%"><center><h4>${!IF(Account.Overdrawn__c = null, 0 , Account.Overdrawn__c)}</h4></center></td>
        <td width="25%"><center><h4 style="{!IF(cmOverdrawnPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmOverdrawnPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="CM_OverdrawnComments form-control" rendered="{!redOverdrawn}" value="{!Account.CM_Overdrawn__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <apex:outputPanel rendered="{!IF(isJobseeker,true,false)}">
        <tr>
            <td width="25%">Youth Allowance &amp; Jobseeker</td>
            <td width="25%"><center><h4>${!IF(totalIncomeAmt = null, 0 , totalIncomeAmt)}</h4></center></td>
            <td width="25%"><center><h4 style="{!IF(cmJobseekerPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmJobseekerPercent}%</h4></center></td>
            <td width="25%"><apex:inputField styleClass="CM_JobseekerComments form-control" rendered="{!redJobseeker}" value="{!Account.CM_Jobseeker__c}" onchange="onChangeCMComments();"/></td>
        </tr>
    </apex:outputPanel>
    <tr>
        <td width="25%">Credit Card Repayments</td>
        <td width="25%"><center><h4>${!IF(Account.Credit_Card__c = null,0,Account.Credit_Card__c)}</h4></center></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%">Loans</td>
        <td width="25%"><center><h4>${!IF(Account.Loan_Payments__c = null,0,Account.Loan_Payments__c)}</h4></center></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%">All Loan Debits</td>
        <td width="25%"><center><h4>${!IF(Account.Credit_Card__c = null,0,Account.Credit_Card__c) + IF(Account.Loan_Payments__c = null,0,Account.Loan_Payments__c)}</h4></center></td>
        <td width="25%"></td>
        <td width="25%"></td>
    </tr>
    <tr>
        <td width="25%">Debt to Income Ratio</td>
        <td width="25%"><center><h4>{!debtIncomePercent}%</h4></center></td>
        <td width="25%"><center><h4 style="{!IF(cmDebtRatioPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmDebtRatioPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="debtRatioComments form-control" rendered="{!redDebtRatio}" value="{!Account.CM_Debt_vs_Income_Ratio_Greater_Than_50__c}" onchange="onChangeCMComments();"/></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Equifax
</a>

<table class="table table-bordered" id="cmEquifaxTable">
    <tr>
        <td width="25%">Outstanding Defaults to Rental companies</td>
        <td width="25%"><center><apex:inputField styleClass="defaultRentalInput form-control" value="{!Account.Equifax_No_of_Unpaid_Default_Rental__c}" html-placeholder="0" style=" border:  2px solid red; " rendered="{!showDefaultRental}"/><apex:outputPanel rendered="{!(!showDefaultRental)}"><label class="field-label" ><h4>{!Account.Equifax_No_of_Unpaid_Default_Rental__c}</h4></label></apex:outputPanel></center></td>
        <td width="25%"><center><h4 style="{!IF(cmRentalDefaultPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmRentalDefaultPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="defaultRentalComments form-control" rendered="{!redRentalDefault}" value="{!Account.CM_OutstandingDefRental_Comp_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Outstanding Defaults to Non-Rental companies</td>
        <td width="25%"><center><apex:inputField styleClass="defaultNonRentalInput form-control" value="{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}" html-placeholder="0" style=" border:  2px solid red; " rendered="{!showDefaultNonRental}"/><apex:outputPanel rendered="{!(!showDefaultNonRental)}"><label class="field-label" ><h4>{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}</h4></label></apex:outputPanel></center></td>
        <td width="25%"><center><h4 style="{!IF(cmNonRentalDefaultPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmNonRentalDefaultPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="defaultNonRentalComments form-control" rendered="{!redNonRentalDefault}" value="{!Account.CM_OutstandingDefNonRental_Comp_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Equifax Score</td>
        <td width="25%"><center><apex:inputField styleClass="equifaxScoreInput form-control" value="{!Account.Score_of_Equifax__c}" html-placeholder="0" style=" border:  2px solid red;" rendered="{!showEquifaxScore}"/><apex:outputPanel rendered="{!(!showEquifaxScore)}"><label class="field-label"><h4>{!Account.Score_of_Equifax__c}</h4></label></apex:outputPanel></center></td>
        <td width="25%"><center><h4 style="{!IF(cmEquifaxPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmEquifaxPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="equifaxScoreComments form-control" rendered="{!redEquifaxScore}" value="{!Account.CM_Equifax_Score_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <!--<tr>
        <td width="25%">Part 9 Agreements</td>
        <td width="25%"><center><label class="field-label"><h4>{!Account.Part_9_Agreements__c}</h4></label></center></td>
        <td width="25%"><center><apex:image value="{!IF(OR(Account.Part_9_Agreements__c==null,Account.Part_9_Agreements__c=='No'),$Resource.CheckIcon,$Resource.NoCheckIcon)}" width="20" height="20"/></center></td>
        <td width="25%"><apex:inputTextArea styleClass="part9Comments form-control" rendered="{!redPart9}" value="{!CM_Part9AgreementsComments}"/></td>  
    </tr>-->
    <tr>
        <td width="25%">Bankruptcy Part 10 Agreements</td>
        <td width="25%">
            <center><label class="field-label">
                <h4>
                    {!Account.Bankruptcy_Part_9_Agreements__c} 
                </h4>
            </label></center>
        </td>
        <td width="25%"><center><h4 style="{!IF(cmBankruptcyPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmBankruptcyPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="bankruptcyComments form-control" rendered="{!redBankruptcy}" value="{!Account.CM_Bankruptcy_Part_9_Agreements_Comments__c}" onchange="onChangeCMComments();"/></td> 
    </tr>   
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Payment History
</a>

<table class="table table-bordered" id="cmPaymentTable">
    <tr>
        <td width="25%">
            No. of Payments Missed - Last 6 Payments <br/>
            <apex:outputPanel rendered="{!IF(Account.Rent4Keeps_Account__c != null, true, false)}">
                <a href="/apex/Rent4KeepsAccountHistory?acctId={!Account.Rent4Keeps_Account__c}" target="_blank">{!Account.Rent4Keeps_Account__r.Name}</a>
            </apex:outputPanel>
        </td>
        <td width="25%"><center><label class="field-label"><h4>{!Account.CM_No_of_Missed_Payments_Last_6_FN__c}</h4></label></center></td>
        <td width="25%"><center><h4 style="{!IF(cmMissedPaymentsPercent > 0,'color:#ff7f7f','color:#3cb200')}">{!cmMissedPaymentsPercent}%</h4></center></td>
        <td width="25%"><apex:inputField styleClass="noOfMissedPaymentsComments form-control" rendered="{!redNoOfMissedPayments}" value="{!Account.CM_Missed_from_last_6_FN_pymts_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2 btn-disabled text-white">
Serviceability
</a>

<table class="table table-bordered" id="cmServiceabilityTable">
    <tr>
        <td width="25%">Total Income</td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.Highlevel_Income__c}" /></apex:outputText></h4></label></center></td>
        <td width="25%" class="text-center">&nbsp;</td>
        <td width="25%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="25%">Total Expense</td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, currency}"><apex:param value="{!Account.Comfortable_Spending__c}" /></apex:outputText></h4></label></center></td>
        <td width="25%" class="text-center">&nbsp;</td>
        <td width="25%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="25%">Serviceablilty</td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4><apex:outputText value="{0, number, 00.00}%"><apex:param value="{!Account.Serviceability__c}" /></apex:outputText></h4></label></center></td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4><font color="{!IF(Account.CM_Serviceable__c=='Yes','#3cb200','#ff7f7f')}">{!Account.CM_Serviceable__c}</font></h4></label></center></td>
        <td width="25%" class="text-center"><apex:inputField styleClass="serviceabilityComments form-control" rendered="{!redServiceability}" value="{!Account.CM_Serviceablilty_Comments__c}" onchange="onChangeCMComments();"/></td>
    </tr>
    <tr>
        <td width="25%">Total Risk Percentage</td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4 style="{!IF(maxRiskPercent <= 0,'color:#ff7f7f','color:#3cb200')}">{!maxRiskPercent}%</h4></label></center></td>
        <td width="25%" class="text-center">&nbsp;</td>
        <td width="25%" class="text-center">&nbsp;</td>
    </tr>
    <tr>
        <td width="25%">Eligible Percentage</td>
        <td width="25%" class="text-center"><center><label class="field-label"><h4 style="{!IF(eligiblePercent <= 0,'color:#ff7f7f','color:#3cb200')}">{!eligiblePercent}%</h4></label></center></td>
        <td width="25%" class="text-center">&nbsp;</td>
        <td width="25%" class="text-center">&nbsp;</td>
    </tr>
</table>

</div>
</apex:outputPanel>
<!--------------- Credit Matrix ---------------->

<div class="row" style="margin-left:5px;margin-right:5px;">
<div class="col-md-6">

<!--------------- Id ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='id',true,false)}">

<apex:inputCheckbox value="{!Account.CAM_Basic__c}" style="width:20px;height:20px;"/>&nbsp;Finished Id<br/>

<div id="idTableAccordion">

<a class="mt-2 btn btn-block btn-secondary font-weight-bold" data-toggle="collapse" href="#basicDetailsTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Basic Details
</a>

<div class="collapse" id="basicDetailsTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idBasicMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idBasicMessage','basic','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="First Name">
    <apex:inputText value="{!firstNameVal}" styleClass="form-control firstNameVal" html-placeholder="First Name" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Last Name">
    <apex:inputText value="{!lastNameVal}" styleClass="form-control lastNameVal" html-placeholder="Last Name" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Date of Birth">
    <apex:inputText value="{!dobVal}" styleClass="form-control dobVal" html-placeholder="Date of Birth" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Gender">
    <apex:selectList value="{!genderVal}" styleClass="genderVal form-control" size="1" multiselect="false" html-placeholder="Gender">
        <apex:selectOption itemLabel="--None--" itemValue="--None--"/>
        <apex:selectOption itemLabel="Male" itemValue="Male"/>
        <apex:selectOption itemLabel="Female" itemValue="Female"/>
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Identification">
    <apex:selectList value="{!idTypeVal}" styleClass="idTypeVal form-control" size="1" multiselect="false" onchange="idTypeChanged();">
        <apex:selectOption itemLabel="--None--" itemValue="--None--"/>
        <apex:selectOption itemLabel="Boat Licence" itemValue="Boat Licence"/>
        <apex:selectOption itemLabel="Driver License" itemValue="Driver License"/>
        <apex:selectOption itemLabel="Forklift Licence" itemValue="Forklift Licence"/>
        <apex:selectOption itemLabel="Keypass" itemValue="Keypass"/>
        <apex:selectOption itemLabel="Passport" itemValue="Passport"/>
        <apex:selectOption itemLabel="Other" itemValue="Other"/>
    </apex:selectList>
</div>

<div class="form-row mt-4 idTypeValOther-row" data-toggle="tooltip" data-placement="top" title="Explanation For Other Id Type">
    <apex:inputText value="{!idTypeValOther}" styleClass="form-control idTypeValOther" html-placeholder=""/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Identification No.">
    <apex:inputText value="{!driverLicenceVal}" styleClass="form-control driverLicenceVal" html-placeholder="Identification No"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Address">
    <div id="formattedAddressContainer" style="display:inline-block;">
        <input type="hidden" placeholder="name" data-address-attr="primary_name" value="0"/>
        <input type="text" class="txtHomeAddress form-control" id="txtHomeAddress" value="{!unformattedAddressVal}" data-address-attr="formatted_address" size="50"/>
        <apex:inputHidden id="currentStreetAddress" value="{!streetNameVal}" html-data-address-attr="street_address"/>
        <apex:inputHidden id="currentState" value="{!stateVal}" html-data-address-attr="state"/>
        <apex:inputHidden id="currentPostcode" value="{!postalCodeVal}" html-data-address-attr="postcode"/>
        <apex:inputHidden id="currentSuburb" value="{!suburbVal}" html-data-address-attr="suburb"/>
        <apex:inputHidden id="currentCountry" value="{!countryVal}" html-data-address-attr="country"/>
        <apex:inputHidden id="currentLatitude" value="{!latVal}" html-data-address-attr="geo_lat"/>
        <apex:inputHidden id="currentLongitude" value="{!lngVal}" html-data-address-attr="geo_lon"/>
    </div>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Centrepay Ref No. (CRN) / WINZ Ref No">
    <apex:inputText value="{!centrepayRefNo}" styleClass="form-control driverLicenceVal" html-placeholder="Centrepay Ref No. (CRN) / WINZ Ref No"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Marital Status">
    <apex:inputField value="{!Account.Marital_Status__pc}" styleClass="form-control" html-placeholder="Marital Status" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="No of Dependants">
    <apex:inputField value="{!Account.Number_of_Dependants__c}" styleClass="form-control" html-placeholder="No of Dependants"/>
</div>

</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#enquiryDetailsTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Enquiry Details
</a>

<div class="collapse" id="enquiryDetailsTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idEnquiryMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idEnquiryMessage','enquiry','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Enquiry Status">
    <apex:selectList id="chooseState" size="1" multiselect="false" value="{!enquiryStatus}" styleClass="enquiryStatus form-control">
        <apex:selectOption itemValue="Enquiry" itemLabel="Enquiry"/>
        <apex:selectOption itemValue="Existing Account Enquiry" itemLabel="Existing Account Enquiry"/>
        <apex:selectOption itemValue="DNQ - Did Not Qualify" itemLabel="  DNQ - Did Not Qualify"/>
        <apex:selectOption itemValue="DNS - Did Not Service" itemLabel="DNS - Did Not Service"/>
        <apex:selectOption itemValue="DNC - Did Not Contact" itemLabel="DNC - Did Not Contact"/>
        <apex:selectOption itemValue="DNP - Did Not Proceed" itemLabel="DNP - Did Not Proceed"/>
        <apex:selectOption itemValue="DND - Do Not Deal" itemLabel="DND - Do Not Deal"/>
        <apex:selectOption itemValue="Third-Party Arrangement" itemLabel="Third-Party Arrangement"/>
        <apex:selectOption itemValue="Deceased" itemLabel="Deceased"/>
        <apex:selectOption itemValue="Incarcerated" itemLabel="Incarcerated"/>   
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Reason why application did not go ahead">
    <apex:inputTextArea value="{!reasonWhyApplicationDidNotGoAhead}" styleClass="form-control reasonWhyApplicationDidNotGoAhead" html-placeholder="Reason why application did not go ahead"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Enquiry Notes">
    <apex:inputTextArea value="{!enquiryNotes}" styleClass="form-control enquiryNotes" html-placeholder="Enquiry Notes"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Opt Out Of Marketing Material">
    <apex:inputCheckbox value="{!optOutOfMarketingMaterial}" style="width:25px;height:25px;"/>
</div>

<apex:outputPanel rendered="{!IF(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'NZ',Account.Territory_Number__r.State_Master_State__c = 'WA',Account.Territory_Number__r.State_Master_State__c = 'QLD'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Darling Downs', Account.Territory_Number__r.Short_Name__c = 'Rockhampton', Account.Territory_Number__r.Short_Name__c = 'Lismore', Account.Territory_Number__r.Short_Name__c = 'Cairns', Account.Territory_Number__r.Short_Name__c = 'Warrnambool', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),true,false)}">
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Rep Name">
    <apex:selectList size="1" multiselect="false" value="{!existingRepSelectedId}" styleClass="repName form-control">
    <apex:selectOptions value="{!repList}"></apex:selectOptions>
    </apex:selectList>
</div>
</apex:outputPanel>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#contactDetailsTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Contact Details
</a>

<div class="collapse" id="contactDetailsTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idContactMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idContactMessage','contact','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Mobile">
    <apex:inputText value="{!phoneVal}" styleClass="form-control phoneVal" html-placeholder="Mobile"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Email">
    <apex:inputText value="{!emailVal}" styleClass="form-control emailVal" html-placeholder="Email"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Home Phone">
    <apex:inputText value="{!homePhoneVal}" styleClass="form-control homePhoneVal" html-placeholder="Home Phone"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="General Notes">
    <apex:inputTextArea value="{!contactGeneralNotes}" styleClass="form-control contactGeneralNotes" html-placeholder="General Notes"/>
</div>
</div>


<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#currentMailingTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Current Mailing Address
</a>

<div class="collapse" id="currentMailingTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idCMailingMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idCMailingMessage','cmailing','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Mailing Street">
    <apex:inputText value="{!streetName}" styleClass="form-control streetNameVal" html-placeholder="Mailing Street"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Mailing City">
    <apex:inputText value="{!suburb}" styleClass="form-control suburbVal" html-placeholder="Mailing City"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Mailing State">
    <apex:inputText value="{!state}" styleClass="form-control stateVal" html-placeholder="Mailing State"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Mailing Postal Code">
    <apex:inputText value="{!postalCode}" styleClass="form-control postalCodeVal" html-placeholder="Mailing Postal Code"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Length of Stay (Months)">
    <apex:inputText value="{!lengthOfStayCurrent}" styleClass="form-control lengthOfStayCurrent" html-placeholder="Length of Stay (Months)"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Address Notes">
    <apex:inputText value="{!currentAddressNotes}" styleClass="form-control currentAddressNotes" html-placeholder="Address Notes"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Address Verification Type">
    <apex:inputField value="{!Account.Address_Verification_Type__c}" styleClass="form-control currentAddressNotes" html-placeholder="Address Verification Type" style="border:2px solid red;"/>
</div>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#previousMailingTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Previous Mailing Address
</a>

<div class="collapse" id="previousMailingTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idPMailingMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idPMailingMessage','pmailing','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Previous Address">
    <apex:inputText value="{!previousAddress}" styleClass="form-control previousAddress" html-placeholder="Previous Address"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Length of Stay (Months)">
    <apex:inputText value="{!lengthOfStayPrevious}" styleClass="form-control lengthOfStayPrevious" html-placeholder="Length of Stay (Months)"/>
</div>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#landlordDetailsTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Landlord Details
</a>

<div class="collapse" id="landlordDetailsTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idLandlordMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idLandlordMessage','landlord','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Residential Status">
    <apex:selectList size="1" multiselect="false" styleClass="residentialStatus form-control" value="{!residentialStatus}">
        <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
        <apex:selectOption itemValue="Mortgage" itemLabel="Mortgage"/>
        <apex:selectOption itemValue="Renting" itemLabel="Renting"/>
        <apex:selectOption itemValue="Boarding" itemLabel="Boarding"/>
        <apex:selectOption itemValue="Living with parents" itemLabel="Living with parents"/>
        <apex:selectOption itemValue="Other" itemLabel="Other"/>
    </apex:selectList>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Landlord Name">
    <apex:inputTextArea value="{!landlordName}" styleClass="form-control landlordName" html-placeholder="Landlord Name"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Landlord Phone">
    <apex:inputText value="{!landlordPhone}" styleClass="form-control landlordPhone" html-placeholder="Landlord Phone"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Residential Details">
    <apex:inputTextArea value="{!residentialDetails}" styleClass="form-control residentialDetails" html-placeholder="Residential Details"/>
</div>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#referringApplicantTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Referring Applicant
</a>

<div class="collapse" id="referringApplicantTable" data-parent="#idTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold referringApplicantMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.referringApplicantMessage','refApplicant','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Referring Applicant">
    <apex:inputText value="{!Account.Referring_Applicant__r.Name}" styleClass="form-control firstNameRefApp" html-placeholder="Referring Applicant" onkeyup="doSearch();"/>
</div>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Referring Applicant Contacted Date">
    <apex:inputText html-placeholder="dd/mm/yyyy" value="{!referringAppContDate}" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"  styleClass="form-control referringAppContDate"/>
</div>

<apex:inputText value="{!refApplicantId}" styleClass="refAppId" style="display:none;"/>

<apex:outputPanel id="refAppResults">
<table class="table table-sm table-bordered mt-4 refAppTable">
    <thead class="thead-light">
        <tr><th colspan="2">Referring Applicant Search Results</th></tr>
        <tr><th>Name</th><th>Suburb</th></tr>
    </thead>
    <tbody>
        <apex:repeat value="{!gSearch}" var="contact">
            <tr onclick="clickRefAppElem(this);">
                <td class="contactName">{!contact.Applicant__r.Name}</td>
                <td class="contactSuburb">{!contact.Suburb__c}</td>
                <td class="contactId" style="display:none;">{!contact.Id}</td>
            </tr>
        </apex:repeat>
    </tbody>
</table>
</apex:outputPanel>

<!--
<apex:pageBlock id="refAppResults">
    <apex:pageBlockTable value="{!gSearch}" var="contact" rendered="{!showTable}" onRowClick="clickRefAppElem(this);">
        <apex:column styleClass="contactName" headerValue="Name" style="width:50%;border-bottom:2px solid black;font-weight:bold;padding:5px;">
            <apex:outputField value="{!contact.Applicant__r.Name}"/>
        </apex:column>
        <apex:column styleClass="contactSuburb" headerValue="Suburb" style="width:50%;border-bottom:2px solid black;font-weight:bold;padding:5px;">
            <apex:outputField value="{!contact.Suburb__c}"/>
        </apex:column>
        <apex:column styleClass="contactId" style="display:none;">
            <apex:outputField value="{!contact.Applicant__r.Id}"/>
        </apex:column>
    </apex:pageBlockTable>
</apex:pageBlock>
-->
<!--<p class="bg-danger text-white font-weight-bold refAppNoRec mt-2">No records found.</p>-->
<p class="bg-danger text-white font-weight-bold refAppContSelected mt-2" style="display:none;">Contact has been selected.</p>

</div>

</div>
</apex:outputPanel>
<!--------------- Id ---------------->

<!--------------- equifax ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='equifax',true,false)}">
<apex:inputCheckbox value="{!Account.CAM_Equifax__c}" style="width:20px;height:20px;"/>&nbsp;Finished Equifax<br/>

<div id="equifaxAssessAccordion">

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#equifaxInfoAssessTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Equifax Info
</a>

<div class="collapse" id="equifaxInfoAssessTable" data-parent="#equifaxAssessAccordion">
<p style="text-align:right;"><span class="font-weight-bold equifaxInfoMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.equifaxInfoMessage','info','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Age Of File">
    {!IF(Account.Equifax_Age_of_File__c == null, 0 , Account.Equifax_Age_of_File__c)}
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Equifax File Number">
    <apex:inputText value="{!equifaxFileNumber}" styleClass="form-control equifaxScore" html-placeholder="Equifax File Number"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Equifax Score">
    <apex:inputText value="{!equifaxScore}" styleClass="form-control equifaxScore" html-placeholder="Equifax Score"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Part 9 Agreements">
    <apex:selectList size="1" multiselect="false" styleClass="equifaxPart9 form-control" value="{!equifaxPart9}">
        <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
        <apex:selectOption itemValue="Yes" itemLabel="Yes"/>
        <apex:selectOption itemValue="No" itemLabel="No"/>
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Bankruptcy & Part 10 Agreements">
    <apex:selectList size="1" multiselect="false" styleClass="equifaxPart10Bank form-control" value="{!equifaxPart10Bank}">
        <apex:selectOption itemValue="--None--" itemLabel="--None--"/>
        <apex:selectOption itemValue="Yes" itemLabel="Yes"/>
        <apex:selectOption itemValue="No" itemLabel="No"/>
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="No of Unpaid Defaults - Rental">
    <apex:inputText value="{!equifaxDefaultsRental}" styleClass="form-control equifaxScore" html-placeholder="No of Unpaid Defaults - Rental"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="No of Unpaid Defaults - Non Rental (Last 12 Months)">
    <apex:inputText value="{!equifaxDefaultsNonRental}" styleClass="form-control equifaxScore" html-placeholder="No of Unpaid Defaults - Non Rental (Last 12 Months)"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Any enquiries in the past 6 month?">
    <apex:inputfield value="{!Account.Any_enquiry_in_the_past_6_month__c}" styleClass="form-control" style="width:25px;height:25px;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Number of Enquiries Last 6 Months">
    <apex:inputfield value="{!Account.No_of_Equifax_Enquiries_Last_6_Month__c}" styleClass="form-control" html-placeholder="Number of Enquiries Last 6 Months"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Explanation for recent enquiries">
    <apex:inputfield value="{!Account.Explanation_for_Recent_Enquiries__c}" styleClass="form-control" html-placeholder="Explanation for recent enquiries"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Equifax Notes">
    <apex:inputfield value="{!Account.Veda_Notes__c}" styleClass="form-control" html-placeholder="Equifax Notes"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Explanation for All Other Defaults">
    <apex:inputfield value="{!Account.Explanation_for_All_Other_Defaults__c}" styleClass="form-control" html-placeholder="Explanation for All Other Defaults"/>
</div>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#equifaxRentDefAssessTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Equifax Rental Defaults
</a>

<div class="collapse" id="equifaxRentDefAssessTable" data-parent="#equifaxAssessAccordion">
<p style="text-align:right;"><a class="btn btn-primary text-white" onclick="openEditDefaultModal();">Add Default&nbsp;<i class="fas fa-plus-square"></i></a></p>
<apex:repeat value="{!equifaxRentalDefaults}" var="eq">
<div class="bg-info text-white mt-2" onclick="editDefaultFuncJS('{!eq.Id}');">
    <h1>
        {!eq.Company_Name__c}
    </h1>
    <ul>
        <li>{!eq.Company_Type__c}</li>
        <li><apex:outputText value="{0, date,dd MMMM yyyy}">
            <apex:param value="{!eq.Unpaid_Default_Date__c}" />
        </apex:outputText></li>
        <li>Status : {!eq.Status__c}</li>
        <li>Default Amount:&nbsp;<apex:outputText value="{0, number,currency}">
            <apex:param value="{!eq.Amount__c}" />
        </apex:outputText></li>
        <li>{!eq.Default_Notes__c}</li>
    </ul>
</div>
</apex:repeat>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#equifaxNonRentDefAssessTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Equifax Non-Rental Defaults
</a>

<div class="collapse" id="equifaxNonRentDefAssessTable" data-parent="#equifaxAssessAccordion">
<p style="text-align:right;"><a class="btn btn-primary text-white" onclick="openEditDefaultModal();">Add Default&nbsp;<i class="fas fa-plus-square"></i></a></p>
<apex:repeat value="{!equifaxNonRentalDefaults}" var="eq">
<div class="bg-info text-white mt-2" onclick="editDefaultFuncJS('{!eq.Id}');">
    <h1>
        {!eq.Company_Name__c}
    </h1>
    <ul>
        <li>{!eq.Company_Type__c}</li>
        <li><apex:outputText value="{0, date,dd MMMM yyyy}">
            <apex:param value="{!eq.Unpaid_Default_Date__c}" />
        </apex:outputText></li>
        <li>Status : {!eq.Status__c}</li>
        <li>Default Amount:&nbsp;<apex:outputText value="{0, number,currency}">
            <apex:param value="{!eq.Amount__c}" />
        </apex:outputText></li>
        <li>{!eq.Default_Notes__c}</li>
    </ul>
</div>
</apex:repeat>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#equifaxOtherDefAssessTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Other Equifax Non-Rental Defaults
</a>

<div class="collapse" id="equifaxOtherDefAssessTable" data-parent="#equifaxAssessAccordion">
<p style="text-align:right;"><a class="btn btn-primary text-white" onclick="openEditDefaultModal();">Add Default&nbsp;<i class="fas fa-plus-square"></i></a></p>
<apex:repeat value="{!otherEquifaxDefaults}" var="eq">
<div class="bg-info text-white mt-2" onclick="editDefaultFuncJS('{!eq.Id}');">
    <h1>
        {!eq.Company_Name__c}
    </h1>
    <ul>
        <li>{!eq.Company_Type__c}</li>
        <li><apex:outputText value="{0, date,dd MMMM yyyy}">
            <apex:param value="{!eq.Unpaid_Default_Date__c}" />
        </apex:outputText></li>
        <li>Status : {!eq.Status__c}</li>
        <li>Default Amount:&nbsp;<apex:outputText value="{0, number,currency}">
            <apex:param value="{!eq.Amount__c}" />
        </apex:outputText></li>
        <li>{!eq.Default_Notes__c}</li>
    </ul>
</div>
</apex:repeat>
</div>

</div>
</apex:outputPanel>
<!--------------- equifax ---------------->

<!--------------- Bank ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='bank',true,false)}">

<div style="display:none;">
    <apex:inputText value="{!rentExpenseDetails}" styleClass="rentDetailsHidden"/>
    <apex:inputText value="{!loanExpenseDetails}" styleClass="loanDetailsHidden"/>
    <apex:inputText value="{!creditCardExpenseDetails}" styleClass="creditDetailsHidden"/>
    <apex:inputText value="{!insuranceExpenseDetails}" styleClass="insuranceDetailsHidden"/>
    <apex:inputText value="{!householdExpenseDetails}" styleClass="householdDetailsHidden"/>
    <apex:inputText value="{!utilitiesExpenseDetails}" styleClass="utilitiesDetailsHidden"/>
    <apex:inputText value="{!travelExpenseDetails}" styleClass="carDetailsHidden"/>
    <apex:inputText value="{!mobileExpenseDetails}" styleClass="mobileDetailsHidden"/>
    <apex:inputText value="{!clothingExpenseDetails}" styleClass="clothingDetailsHidden"/>
    <apex:inputText value="{!tobaccoExpenseDetails}" styleClass="tobaccoDetailsHidden"/>
    <apex:inputText value="{!otherExpenseDetails}" styleClass="otherDetailsHidden"/>
</div>

<div class="alert alert-warning font-weight-bold">
<h3>Serviceability : {!Account.Serviceability__c}%</h3>
</div>

<apex:inputCheckbox value="{!Account.CAM_Expense__c}" style="width:20px;height:20px;"/>&nbsp;Finished Serviceability<br/>

<div id="tableAccordion">

<a class="mt-2 btn btn-block btn-secondary font-weight-bold" data-toggle="collapse" href="#centrelinkTable" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('{!mygovAtt.Id}');">
Centrepay Income
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="centrelinkTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankCpayMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankCpayMessage','cpay','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>  
            <td width="60%">Primary Benefit</td> 
            <td width="40%">
                <apex:selectList size="1" styleClass="ddlPrimaryCentrelink form-control" value="{!primaryCentrelink}">
                <apex:actionSupport event="onchange" action="{!changePrimaryBenefit}"/>
                    <apex:selectOptions value="{!primaryCentrelinks}" />    
                </apex:selectList> 
            </td>
        </tr>
        <apex:outputPanel rendered="{!(!showPrimaryCentrelink)}">
        <tr>  
            <td width="60%">Centrelink Benefit 1</td> 
            <td width="40%">
                <apex:inputfield value="{!Account.Centrelink_Benefit__c}" styleClass="medium benefit1Option form-control"/>
            </td>
        </tr>
        </apex:outputPanel>
        <tr>
            <td width="60%">Centrelink Benefit 1 Amount</td> 
            <td width="40%"> <apex:inputText value="{!benefit1Amount}" styleclass="form-control"/></td>
        </tr>  
        <tr>  
            <td width="60%">Centrelink Benefit 2</td> 
            <td width="40%">
                <apex:inputfield value="{!Account.Centrelink_Benefit2__c}" styleClass="medium benefit2Option form-control"/>
            </td>
        </tr>
        <tr>
            <td width="60%">Centrelink Benefit 2 Amount</td> 
            <td width="40%"> <apex:inputText value="{!benefit2Amount}" styleclass="form-control"/></td>
        </tr>
        <tr>  
            <td width="60%">Centrelink Benefit 3</td> 
            <td width="40%">
                <apex:inputfield value="{!Account.Centrelink_Benefit3__c}" styleClass="medium benefit3Option form-control"/>
            </td>
        </tr>
        <tr>
            <td width="60%">Centrelink Benefit 3 Amount</td> 
            <td width="40%"> <apex:inputText value="{!benefit3Amount}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Other Centrelink Benefit</td>
            <td width="40%">
                <apex:inputfield value="{!Account.Other_Centrelink_Benefit__c}" styleClass="medium otherBenefitOption form-control"/>
            </td>
        </tr>
        <tr>
            <td width="60%">Other Centrelink Benefit Amount</td>
            <td width="40%"><apex:inputText value="{!otherBenefitAmount}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Centrelink Benefits Verified</td>
            <td width="40%"><apex:inputField value="{!Account.Centrelink_Benefits_Verified__c}" styleclass="form-control" style="width:20px;height:20px;"/></td>
        </tr>
        <tr>
            <td width="60%">Is Disability Support Pension</td>
            <td width="40%"><apex:inputField value="{!Account.Is_Disability_Support_Pension__c}" styleclass="form-control" style="width:20px;height:20px;"/></td>
        </tr>
        <tr>
            <td width="60%">Do you have a Carer?</td>
            <td width="40%"><apex:inputField value="{!Account.Carer__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Carer Full Name</td>
            <td width="40%"><apex:inputField value="{!Account.Carer_Full_Name__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Carer Phone</td>
            <td width="40%"><apex:inputField value="{!Account.Carer_Phone_No__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Carer Confirmation</td>
            <td width="40%"><apex:inputField value="{!Account.Carer_Confirmation__c}" styleclass="form-control"/></td>
        </tr>  
    </tbody>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#centrelinkOTable" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('{!mygovAtt.Id}');">
Centrepay Outgoings
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="centrelinkOTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankCpayOMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankCpayOMessage','cpayo','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>
            <td width="60%">Centrepay Outgoings</td>
            <td width="40%"><apex:inputText value="{!crmCpay}" styleclass="form-control centrepayAmount" onchange="changeExpenseDropdownsNew('centrepay','amount');"/></td>
        </tr>
        <tr>
            <td width="60%">Centrepay Outgoings Details</td>
            <td width="40%">
                <div id="centrepayDropDownDiv" style="display:none;">
                   <select id="centrepayDropDown" class="form-control" onchange="changeExpenseDropdownsNew('centrepay','dropdown');">
                      <option value="None">None</option>
                      <option value="Deductions allocated against specific categories, e.g. rent, utilities, other rentals, etc.">Deductions allocated against specific categories, e.g. rent, utilities, other rentals, etc.</option> 
                      <option value="Refer to centrelink statement for the total breakdown of deductions">Refer to centrelink statement for the total breakdown of deductions</option>
                      <option value="Other">Other</option>
                    </select>
                </div>
                <div id="centrepay0DropDownDiv" style="display:none;">
                   <select id="centrepay0DropDown" class="form-control" onchange="changeExpenseDropdownsNew('centrepay','dropdown');">
                      <option value="None">None</option>
                      <option value="Nothing other than existing R4K payment(s)">Nothing other than existing R4K payment(s)</option>
                      <option value="No deductions - not receiving Centrelink benefits">No deductions - not receiving Centrelink benefits</option>
                      <option value="Other">Other</option> 
                    </select>
                </div>
                <apex:inputTextArea value="{!cpayDetails}" styleclass="form-control centrepayDetailsHidden" style="display:none;"/>
            </td>
        </tr> 
    </tbody>
</table>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#employmentTable" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('{!bankAtt.Id}');">
Employment &amp; Other Income
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="employmentTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankEmpMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankEmpMessage','employment','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>
            <td width="60%">Employer Name</td>
            <td width="40%"><apex:inputText value="{!employerName}" styleClass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Employment Income Details</td>
            <td width="40%"><apex:inputTextArea value="{!employmentIncomeDetails}" styleClass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Employment Income</td>
            <td width="40%"><apex:inputText value="{!employmentIncomeAmount}" styleClass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Employment Type</td>
            <td width="40%">
                <apex:selectList size="1" multiselect="false" styleClass="medium employmentType form-control" value="{!employmentType}">
                    <apex:selectOption itemValue="" itemLabel="--None--"/>
                    <apex:selectOption itemValue="Casual" itemLabel="Casual"/>
                    <apex:selectOption itemValue="Part-Time" itemLabel="Part-Time"/>
                    <apex:selectOption itemValue="Full-Time" itemLabel="Full-Time"/>
                </apex:selectList>
            </td>
        </tr>
        <tr>
            <td width="60%">Employment Start Date</td>
            <td width="40%"><apex:inputText value="{!employmentStartDate}" styleclass="employmentStartDate form-control" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/></td>
        </tr>
        <tr>
            <td width="60%">Employment Income Verified</td>
            <td width="40%"><apex:inputField value="{!Account.Employment_Income_Verified__c}" styleclass="form-control" style="width:20px;height:20px;"/></td>
        </tr>
        <tr>
            <td width="60%">Other Income Source</td>
            <td width="40%"><apex:inputText value="{!otherIncomeSource}" styleClass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Other Income Details</td>
            <td width="40%"><apex:inputTextArea value="{!otherIncomeDetails}" styleClass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Other Income</td>
            <td width="40%"><apex:inputText value="{!otherIncomeAmount}" styleClass="form-control"/></td>
        </tr>
    </tbody>
</table>


<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#expensesTable" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('{!bankAtt.Id}');">
Expenses
</a>

<div id="expensesTable" data-parent="#tableAccordion" class="collapse">
<table style="font-size:15px;" class="table">
<thead class="thead-light">
<tr>
    <th style="background-color:white;"><a class="btn btn-sm text-white btn-primary expenseButtonGroups" onclick="toggleExpenseRows('fixed',this);">Fixed</a></th>
    <th style="background-color:white;"><a class="btn btn-sm text-white btn-primary expenseButtonGroups" onclick="toggleExpenseRows('variable',this);">Variable</a></th>
    <th style="background-color:white;"><a class="btn btn-sm text-white btn-primary expenseButtonGroups" onclick="toggleExpenseRows('discretionary',this);">Discretionary</a></th>
    <th colspan="4" style="text-align:right;background-color:white;">
        <p style="text-align:right;"><span class="font-weight-bold bankExpMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankExpMessage','expenses','','');"><i class="far fa-save"></i></a></p>
    </th>
</tr>
<tr>
<th style="border:1px solid black;padding:5px;">Description</th>
<th style="border:1px solid black;padding:5px;" colspan="2">MOGO Value</th>
<th style="border:1px solid black;padding:5px;" colspan="2">CRM Value</th>
<th style="border:1px solid black;padding:5px;" colspan="2">Comments</th>
</tr>
</thead>
<tbody>
<!--<tr>
<td width="20%" style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
<a data-toggle="collapse" href="#collapseRentTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
Centrepay Deductions
</a>
</td>
<td width="10%"  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="cpayRadio" value="mogoCpay" id="MogoCpayRadio"/></td>
<td width="15%" id="MogoCpay" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!Account.Centrepay_Outgoings__c}"/></apex:outputText></td>
<td width="10%"  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="CpayRadio" value="crmRent" id="CRMCpayRadio"/></td>
<td width="15%" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmCpay}" styleClass="CpayAmount"  style="text-align:left;" onchange="changeExpenseDropdownsNew('cpay','amount');" size="10"/></td>
<td width="30%"  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
<apex:inputTextArea value="{!cpayDetails}"/>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('cpay')" style="display:none;" id="cpayEditButton"/></td>
</tr>-->
<tr class="fixedExpenseRows expenseRows" style="display:none;">
<td width="20%" style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
<a data-toggle="collapse" href="#collapseRentTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
Rent (F)
</a>
</td>
<td width="10%"  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="RentRadio" value="mogoRent" id="MogoRentRadio"/></td>
<td width="15%" id="MogoRent" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoRent}"/></apex:outputText></td>
<td width="10%"  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="RentRadio" value="crmRent" id="CRMRentRadio"/></td>
<td width="15%" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmRent}" styleClass="rentAmount form-control"  style="text-align:left;" onchange="changeExpenseDropdownsNew('rent','amount');" size="10"/></td>
<td width="30%"  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
              <div id="rentDropDownDiv" style="display:none;">
           <select id="rentDropDown" onchange="changeExpenseDropdownsNew('rent','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Fortnightly rental payment">Fortnightly rental payment</option>
              <option value="Living with Parents who only charge nominal amount">Living with Parents who only charge nominal amount</option>
              <option value="Shares with Partner/refer shared expense verification">Shares with Partner/refer shared expense verification</option>
              <option value="Shares with housemates/refer shared expense verification">Shares with housemates/refer shared expense verification</option>
              <option value="Renting through Public Housing">Renting through Public Housing</option>
              <option value="Renting through Public Housing refer Centre-pay deductions">Renting through Public Housing refer Centre-pay deductions</option>
              <option value="Boarding - refer explanatory notes regarding board">Boarding - refer explanatory notes regarding board</option>
              <option value="Pays rent to local estate agent">Pays rent to local estate agent</option> 
              <option value="Partner pays all rent. refer expense verification">Partner pays all rent. refer expense verification</option>  
              <option value="Other">Other</option>  
            </select>
        </div>
        <div id="rent0DropDownDiv" style="display:none;">
           <select id="rent0DropDown" onchange="changeExpenseDropdownsNew('rent','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option>
              <option value="Living with Parents who do not charge board">Living with Parents who do not charge board</option>
              <option value="Partner pays all rent/refer shared expense verification">Partner pays all rent/refer shared expense verification</option>
              <option value="Included as part of employment package">Included as part of employment package</option> 
              <option value="Other">Other</option>
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('rent')" style="display:none;" id="rentEditButton"/></td>
</tr>
<tr id="collapseRentTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(rentTransactions.size > 0,IF(rentTransactions.size == 1,'Last '+TEXT(rentTransactions.size)+' Transaction','Last '+TEXT(rentTransactions.size)+' of ' + npc.numberOfRentTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/> </b></td></tr></thead>
<tbody>
<apex:repeat value="{!rentTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>$${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="fixedExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
<a data-toggle="collapse" href="#collapseLoanTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
Loan Payments (F)
</a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="LoanRadio" value="mogoRent" id="MogoLoanRadio"/></td>
<td id="MogoLoan" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoLoan}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="LoanRadio" value="crmRent" id="CRMLoanRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmLoan}" styleClass="loanAmount form-control"   style="text-align:left;" onchange="changeExpenseDropdownsNew('loan','amount');" size="10"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
       <div id="loanDropDownDiv" style="display:none;">
           <select id="loanDropDown" onchange="changeExpenseDropdownsNew('loan','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Refer to Centre-pay deductions (Lump Sum Advance)">Refer to Centre-pay deductions (Lump Sum Advance)</option>
              <option value="Loan repayments – see other expenses for breakdown">Loan repayments – see other expenses for breakdown</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="loan0DropDownDiv" style="display:none;">
           <select id="loan0DropDown" onchange="changeExpenseDropdownsNew('loan','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option>
              <option value="No current loans">No current loans</option>
              <option value="Doesn’t qualify as on Centrelink Benefit">Doesn’t qualify as on Centrelink Benefit</option>
              <option value="Loan payments on bank statement now finalised">Loan payments on bank statement now finalised</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('loan')" style="display:none;" id="loanEditButton"/></td>
</tr>
<tr id="collapseLoanTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(loanTransactions.size > 0,IF(loanTransactions.size == 1,'Last '+TEXT(loanTransactions.size)+' Transaction','Last '+TEXT(loanTransactions.size)+' of ' + npc.numberOfLoanTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!loanTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="fixedExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseCrediCardTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Credit Card (F)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="CreditRadio" value="mogoCredit" id="MogoCreditRadio"/></td>
<td id="MogoCredit" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoCredit}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="CreditRadio" value="crmCredit" id="CRMCreditRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmCredit}" styleClass="creditAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('credit','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
      <div id="creditDropDownDiv" style="display:none;">
           <select id="creditDropDown" onchange="changeExpenseDropdownsNew('credit','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Pays minimum have used 2% of the current credit limit">Pays minimum have used 2% of the current credit limit</option>
              <option value="has no credit card, does not qualify">has no credit card, does not qualify</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="credit0DropDownDiv" style="display:none;">
           <select id="credit0DropDown" onchange="changeExpenseDropdownsNew('credit','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Doesn’t qualify as on Centrelink Benefit">Doesn’t qualify as on Centrelink Benefit</option> 
              <option value="Chooses not to have any as does not like them">Chooses not to have any as does not like them</option> 
              <option value="Other">Other</option>
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('credit')" style="display:none;" id="creditEditButton"/></td>
</tr>
<tr id="collapseCrediCardTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(creditCardTransactions.size > 0,IF(creditCardTransactions.size == 1,'Last '+TEXT(creditCardTransactions.size)+' Transaction','Last '+TEXT(creditCardTransactions.size)+' of ' + npc.numberOfCreditCardTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!creditCardTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="fixedExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseInsuranceTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Insurance (F)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="InsuranceRadio" value="mogoInsurance" id="MogoInsuranceRadio"/></td>
<td id="MogoInsurance" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoInsurance}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="InsuranceRadio" value="crmInsurance" id="CRMInsuranceRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmInsurance}" styleClass="insuranceAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('insurance','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
      <div id="insuranceDropDownDiv" style="display:none;">
           <select id="insuranceDropDown" onchange="changeExpenseDropdownsNew('insurance','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Rego & 3rd party car insurance">Rego &amp; 3rd party car insurance</option>
              <option value="Funeral Insurance">Funeral Insurance</option>
              <option value="Contents insurance only">Contents insurance only</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="insurance0DropDownDiv" style="display:none;">
           <select id="insurance0DropDown" onchange="changeExpenseDropdownsNew('insurance','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Nothing worth insuring">Nothing worth insuring</option> 
              <option value="Chooses not to have any insurances">Chooses not to have any insurances</option> 
              <option value="Doesn’t pay for any insurance as does not believe in insurance companies">Doesn’t pay for any insurance as does not believe in insurance companies</option> 
              <option value="Rego & 3rd party car insurance included in travel expense amount">Rego &amp; 3rd party car insurance included in travel expense amount</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('insurance')" style="display:none;" id="insuranceEditButton"/></td>
</tr>
<tr id="collapseInsuranceTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(insuranceTransactions.size > 0,IF(insuranceTransactions.size == 1,'Last '+TEXT(insuranceTransactions.size)+' Transaction','Last '+TEXT(insuranceTransactions.size)+' of ' + npc.numberOfInsuranceTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!insuranceTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="variableExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseHouseholdTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    House Hold Expenses (V)
  </a>
  </td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="HouseHoldRadio" value="mogoHousehold" id="MogoHouseholdRadio"/></td>
<td id="MogoHousehold" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoHousehold}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="HouseHoldRadio" value="crmHousehold" id="CRMHouseholdRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmHousehold}" styleClass="householdAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('household','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
     <div id="householdDropDownDiv" style="display:none;">
           <select id="householdDropDown" onchange="changeExpenseDropdownsNew('household','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Total family spend kept to a minimum by shopping at discount stores and buying specials">Total family spend kept to a minimum by shopping at discount stores and buying specials</option>
              <option value="Shares expense with partner and this is their contribution each fortnight">Shares expense with partner and this is their contribution each fortnight</option>
              <option value="Lives alone – food and household items for 1 adult">Lives alone – food and household items for 1 adult</option> 
              <option value="Food included in board, extra for take away etc">Food included in board, extra for take away etc</option>
              <option value="Partner pays for all Household items, including food">Partner pays for all Household items, including food</option> 
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="household0DropDownDiv" style="display:none;">
           <select id="household0DropDown" onchange="changeExpenseDropdownsNew('household','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Included in boarding expense">Included in boarding expense</option> 
              <option value="Partner pays for all household expenses/refer shared expense verification">Partner pays for all household expenses/refer shared expense verification</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('household')" style="display:none;" id="householdEditButton"/></td>
</tr>
<tr id="collapseHouseholdTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(householdTransactions.size > 0,IF(householdTransactions.size == 1,'Last '+TEXT(householdTransactions.size)+' Transaction','Last '+TEXT(householdTransactions.size)+' of ' + npc.numberOfHouseholdTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!householdTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="variableExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseUtilitiesTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Utilities (V)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="UtilitiesRadio" value="mogoUtilities" id="MogoUtilitiesRadio"/></td>
<td id="MogoUtilities" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoUtilities}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="UtilitiesRadio" value="crmUtilities" id="CRMUtilitiesRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmUtilities}" styleClass="utilitiesAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('utilities','amount');" size="10"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
        <div id="utilitiesDropDownDiv" style="display:none;">
           <select id="utilitiesDropDown" onchange="changeExpenseDropdownsNew('utilities','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Refer to centre-pay deductions">Refer to centre-pay deductions</option>
              <option value="Shared expense, refer shared expense verification">Shared expense, refer shared expense verification</option>
              <option value="Included in Board">Included in Board</option>
              <option value="Not required to pay as living at home with parents">Not required to pay as living at home with parents</option>
              <option value="Lives alone – this covers gas / electricity / water">Lives alone – this covers gas / electricity / water</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="utilities0DropDownDiv" style="display:none;">
           <select id="utilities0DropDown" onchange="changeExpenseDropdownsNew('utilities','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Paid by partner, refer shared expense verification">Paid by partner, refer shared expense verification</option> 
              <option value="Included in Board">Included in Board</option> 
              <option value="Not required to pay as living at home with parents">Not required to pay as living at home with parents</option>
              <option value="Partner pays for utilities">Partner pays for utilities</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('utilities')" style="display:none;" id="utilitiesEditButton"/></td>
</tr>
<tr id="collapseUtilitiesTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(utilitiesTransactions.size > 0,IF(utilitiesTransactions.size == 1,'Last '+TEXT(utilitiesTransactions.size)+' Transaction','Last '+TEXT(utilitiesTransactions.size)+' of ' + npc.numberOfUtilitiesTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!utilitiesTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="variableExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseTravelTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Car / Petrol / Travel (V)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="CarRadio" value="mogoCar" id="MogoCarRadio"/></td>
<td id="MogoCar" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoCar}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="CarRadio" value="crmCar" id="CRMCarRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmCar}" styleClass="carAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('car','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
        <div id="carDropDownDiv" style="display:none;">
           <select id="carDropDown" onchange="changeExpenseDropdownsNew('car','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Does not own a car and uses public transport or walks">Does not own a car and uses public transport or walks</option>
              <option value="Does not own a car and Friends/Relatives drive them around">Does not own a car and Friends/Relatives drive them around</option>
              <option value="Owns car includes petrol, registration and maintenance">Owns car includes petrol, registration and maintenance</option>
              <option value="Does not drive relies on lifts from family and friends and uses public transport">Does not drive relies on lifts from family and friends and uses public transport</option>
              <option value="Uses public transport, including taxis/uber">Uses public transport, including taxis/uber</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="car0DropDownDiv" style="display:none;">
           <select id="car0DropDown" onchange="changeExpenseDropdownsNew('car','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option>
              <option value="Does not own a car and walks everywhere">Does not own a car and walks everywhere</option>
              <option value="Does not own a car and Friends/Relatives drive them around">Does not own a car and Friends/Relatives drive them around</option>
              <option value="Does not drive relies on lifts from family and friends">Does not drive relies on lifts from family and friends</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('car')" style="display:none;" id="carEditButton"/></td>
</tr>
<tr id="collapseTravelTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(travelTransactions.size > 0,IF(travelTransactions.size == 1,'Last '+TEXT(travelTransactions.size)+' Transaction','Last '+TEXT(travelTransactions.size)+' of ' + npc.numberOfTravelTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!travelTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="variableExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseMobileTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Mobile (V)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="MobileRadio" value="mogoMobile" id="MogoMobileRadio"/></td>
<td id="MogoMobile" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoMobile}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="MobileRadio" value="crmMobile" id="CRMMobileRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmMobile}" styleClass="mobileAmount form-control"  style="text-align:left;"  onchange="changeExpenseDropdownsNew('mobile','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
    <div id="mobileDropDownDiv" style="display:none;">
           <select id="mobileDropDown" onchange="changeExpenseDropdownsNew('mobile','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Pre-paid only">Pre-paid only</option>
              <option value="Phone plan">Phone plan</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="mobile0DropDownDiv" style="display:none;">
           <select id="mobile0DropDown" onchange="changeExpenseDropdownsNew('mobile','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Does not have a phone or internet service">Does not have a phone or internet service</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('mobile')" style="display:none;" id="mobileEditButton"/></td>
</tr>
<tr id="collapseMobileTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(mobileTransactions.size > 0,IF(mobileTransactions.size == 1,'Last '+TEXT(mobileTransactions.size)+' Transaction','Last '+TEXT(mobileTransactions.size)+' of ' + npc.numberOfMobileTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!mobileTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="discretionaryExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseClothingTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Clothing (D)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="ClothingRadio" value="mogoClothing" id="MogoClothingRadio"/></td>
<td id="MogoClothing" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoClothing}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="ClothingRadio" value="crmClothing" id="CRMClothingRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmClothing}" styleClass="clothingAmount form-control"   style="text-align:left;"  onchange="changeExpenseDropdownsNew('clothing','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
<div id="clothingDropDownDiv" style="display:none;">
           <select id="clothingDropDown" onchange="changeExpenseDropdownsNew('clothing','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Buys from Op shops and discount stores">Buys from Op shops and discount stores</option>
              <option value="Only buys as required as has enough clothes">Only buys as required as has enough clothes</option>
              <option value="Only buys once or twice per year">Only buys once or twice per year</option>
              <option value="Receives hand me downs from family and friends and only buys new clothes occasionally">Receives hand me downs from family and friends and only buys new clothes occasionally</option>
              <option value="Work Uniform supplied and only buys new clothes occasionally">Work Uniform supplied and only buys new clothes occasionally</option>
              <option value="As needed – Grandparents buy kids new clothes for birthdays and Christmas">As needed – Grandparents buy kids new clothes for birthdays and Christmas</option>
              <option value="Other">Other</option>  
            </select>
        </div>
        <div id="clothing0DropDownDiv" style="display:none;">
           <select id="clothing0DropDown" onchange="changeExpenseDropdownsNew('clothing','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Receives hand me downs from family and friends">Receives hand me downs from family and friends</option> 
              <option value="Work Uniform supplied and does not require any other clothes">Work Uniform supplied and does not require any other clothes</option> 
              <option value="Does not need any new clothes">Does not need any new clothes</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('clothing')" style="display:none;" id="clothingEditButton"/></td>
</tr>
<tr id="collapseClothingTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(clothingTransactions.size > 0,IF(clothingTransactions.size == 1,'Last '+TEXT(clothingTransactions.size)+' Transaction','Last '+TEXT(clothingTransactions.size)+' of ' + npc.numberOfClothingTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!clothingTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="discretionaryExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;">
  <a data-toggle="collapse" href="#collapseTobaccoTransactions" role="button" aria-expanded="false" aria-controls="collapseExample">
    Tobacco / Alcohol / Entertainment (D)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="TobaccoRadio" value="mogoTobacco" id="MogoTobaccoRadio"/></td>
<td id="MogoTobacco" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoTobacco}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="TobaccoRadio" value="crmTobacco" id="CRMTobaccoRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmTobacco}" styleClass="tobaccoAmount form-control"  style="text-align:left;"  onchange="changeExpenseDropdownsNew('tobacco','amount');"/></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
<div id="tobaccoDropDownDiv" style="display:none;">
           <select id="tobaccoDropDown" onchange="changeExpenseDropdownsNew('tobacco','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Social smoker/light drinker">Social smoker/light drinker</option>
              <option value="Smoker or Drinker">Smoker or Drinker</option>
              <option value="Drinks on weekends but does not smoke">Drinks on weekends but does not smoke</option>
              <option value="Smokes but does not drink and uses roll you own to minimise expense">Smokes but does not drink and uses roll you own to minimise expense</option>
              <option value="Smokes rollies to minimize cost">Smokes rollies to minimize cost</option>
              <option value="Other">Other</option>  
            </select>
        </div>
        <div id="tobacco0DropDownDiv" style="display:none;">
           <select id="tobacco0DropDown" onchange="changeExpenseDropdownsNew('tobacco','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Non-smoker/drinker">Non-smoker/drinker</option>
              <option value="Other">Other</option> 
            </select>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('tobacco')" style="display:none;" id="tobaccoEditButton"/></td>
</tr>
<tr id="collapseTobaccoTransactions" class="collapse" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead><tr><td colspan="2"><b>{!IF(tobaccoTransactions.size > 0,IF(tobaccoTransactions.size == 1,'Last '+TEXT(tobaccoTransactions.size)+' Transaction','Last '+TEXT(tobaccoTransactions.size)+' of ' + npc.numberOfTobaccoTransactions + ' transactions.'),'No Transactions')}</b></td><td style="text-align:right;" colspan="5"><b> Statement Period: &nbsp;<apex:outputText value="{!npc.statementPeriod}"/></b></td></tr></thead>
<tbody>
<apex:repeat value="{!tobaccoTransactions}" var="trans"><tr><td>{!trans.dateVal}</td><td colspan="5">{!trans.description}</td><td>${!trans.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr class="discretionaryExpenseRows expenseRows" style="display:none;">
<td style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;" id="otherLabel">
  <a data-toggle="collapse" href="#collapseOtherDetails" role="button" aria-expanded="false" aria-controls="collapseExample">
    Other Discretionary (OD)
  </a>
</td>
<td  style="padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="OtherRadio" value="mogoOther" id="MogoOtherRadio"/></td>
<td id="MogoOther" style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:outputText value="{0, number,currency}"><apex:param value="{!mogoOtherTotal}"/></apex:outputText></td>
<td  style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;"><input type="radio" name="OtherRadio" value="crmOther" id="CRMOtherRadio"/></td>
<td style="padding:5px;text-align:left;vertical-align:middle;border-bottom:1px solid black;"><apex:inputText value="{!crmOtherTotal}" styleClass="otherAmount form-control"  style="text-align:left;"  onchange="changeExpenseDropdownsNew('other','amount');"/></td>
<td style="border-left:1px solid black;padding:5px;vertical-align:middle;text-align:right;border-bottom:1px solid black;">
    <div id="otherDropDownDiv" style="display:none;">
           <select id="otherDropDown" onchange="changeExpenseDropdownsNew('other','dropdown');" class="form-control" style="border:2px solid red;">
              <option value="None">None</option> 
              <option value="Child maintenance">Child maintenance</option>
              <option value="Pay TV">Pay TV</option>
              <option value="Gym membership">Gym membership</option>
              <option value="Internet">Internet</option>
              <option value="School Fees">School Fees</option>
              <option value="Other">Other</option>
            </select>
        </div>
        <div id="other0DropDownDiv" style="display:none;">
           <textarea rows="4" id="other0DropDown" onchange="changeExpenseDropdownsNew('other','dropdown');" class="form-control" style="border:2px solid red;">
           </textarea>
        </div>
</td>
<td style="text-align:right;border-right:1px solid black;border-bottom: 1px solid black;"><img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editOtherComments('other')" style="display:none;" id="otherEditButton"/></td>
</tr>
<tr class="collapse"  id="collapseOtherDetails" data-parent="#accordion">
<td style="border:1px solid black;" colspan="7">
<div>
<table class="table">
<thead>
<tr><th style="text-align:left;" colspan="2">Description</th><th style="text-align:center;">No of Transactions</th><th style="text-align:right;">Transaction Average</th><th style="text-align:right;">Fortnightly Average</th></tr>
</thead>
<tbody>
<apex:repeat value="{!otherExpenseList}" var="expense"><tr><td style="text-align:left;" colspan="2">{!expense.name}</td><td style="text-align:center;">{!expense.numberTransactions}</td><td style="text-align:right;">{!expense.transAverage}</td><td style="text-align:right;">{!expense.amount}</td></tr></apex:repeat>
</tbody>
</table>
</div>
</td>
</tr>
<tr style="border:1px solid black;padding:5px;font-weight:bold;vertical-align:middle;display:none;" class="discretionaryExpenseRows expenseRows">
<td>Other General Notes</td>
<td colspan="6"><apex:inputTextArea value="{!expenseOtherGeneralNotes}" styleclass="form-control" style="border:2px solid red;"/></td>
</tr>
</tbody>
</table>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Income Verification Type">
    <apex:inputfield value="{!Account.Income_Verification_type__c}" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Expense Verification Type">
    <apex:inputfield value="{!Account.Expense_Verification_Type__c}" style="border:2px solid red;"/>
</div>
</div>


<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#otherRentalTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Other Company Rentals 
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="otherRentalTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankOtherRentalMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankOtherRentalMessage','otherrental','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>
            <td width="60%">Other Rental Company Amount</td>
            <td width="40%"><apex:inputfield value="{!Account.Other_Rental_Companies__c}" styleclass="form-control otherRentalCompanyAmount"/></td>
        </tr>
        <tr>
            <td width="60%">Other Rental Company Name</td>
            <td width="40%"><apex:inputfield value="{!Account.Other_Rental_Company_Name__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Other Rental Company Details</td>
            <td width="40%"><apex:inputfield value="{!Account.Other_Rental_Company_Details__c}" styleclass="form-control otherRentalCompanyDetails" style="border:2px solid red;"/></td>
        </tr>
        <tr>
            <td width="60%">Product Other Rental Company</td>
            <td width="40%"><apex:inputField value="{!Account.Product_Other_Rental_Company__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Agmt Comp Date Other Rental Company</td>
            <td width="40%"><apex:inputText styleClass="form-control" html-placeholder="dd/mm/yyyy" value="{!agmtComplOtherRentalDate}" style="width:200px" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/></td>
        </tr>
    </tbody>
</table> 

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#expenseSharingTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Expense Sharing
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="expenseSharingTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankexpSharingMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankexpSharingMessage','expSharing','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>
            <td width="60%">Sharing expenses with others</td>
            <td width="40%"><apex:inputfield value="{!Account.Sharing_expenses_with_others__c}" styleclass="form-control" style="width:20px;height:20px;"/></td>
        </tr>
        <tr>
            <td width="60%">Shared Expense with</td>
            <td width="40%"><apex:inputfield value="{!Account.Shared_Expense_with__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">How did you verify shared expenses?</td>
            <td width="40%"><apex:inputField value="{!Account.How_did_you_verify_shared_expenses__c}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Expense Items in Shared Expense</td>
            <td width="40%"><apex:inputField value="{!Account.Expense_Items_in_Shared_Expense__c}" styleclass="form-control"/></td>
        </tr>
    </tbody>
</table> 

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#r4kRentalTable" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('quickRentalStatement');">
R4K Rental Payment
</a>

<table class="table table-sm table-borderless font-weight-bold collapse" id="r4kRentalTable" data-parent="#tableAccordion">
    <thead>
        <th colspan="2" style="text-align:right;">
            <p style="text-align:right;"><span class="font-weight-bold bankR4KMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.bankR4KMessage','r4k','','');"><i class="far fa-save"></i></a></p>
        </th>
    </thead>
    <tbody>
        <tr>
            <td width="60%">R4K Payment (1)</td>
            <td width="40%"><apex:inputText value="{!newR4KPayment}" styleclass="form-control"/></td>
        </tr>
        <tr>
            <td width="60%">Existing R4K Payment (2)</td>
            <td width="40%">{!existingR4KPayment}</td>
        </tr>
        <tr>
            <td width="60%">Serviceability Comments</td>
            <td width="40%"><apex:inputField value="{!Account.Serviceability_Comments__c}" styleclass="form-control" style="border:2px solid red;"/></td>
        </tr>
        <tr>
            <td width="60%">Notes</td>
            <td width="40%"><apex:inputField value="{!Account.Notes__c}" styleclass="form-control"/></td>
        </tr>
    </tbody>
</table>

<apex:outputPanel rendered="{!IF(account.External_Transfer_Relationship__c != null, true, false)}">
    <a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#extTransferRelationshipDiv" role="button" aria-expanded="false" aria-controls="collapseExample" onclick="toggleIncomeStatements('quickRentalStatement');">
        External Transfers
    </a>
    <div id="extTransferRelationshipDiv" class="collapse" data-parent="#tableAccordion">
        <p class="p-1 mt-1" style="border:1px solid black; border-radius:5px;"><apex:outputText value="{!account.External_Transfer_Relationship__c}" escape="true"/></p>
    </div>
</apex:outputPanel>
</div>
</apex:outputPanel>
<!--------------- Bank ---------------->

<!--------------- RO ---------------->
<apex:outputPanel rendered="{!IF(sectionType=='ro',true,false)}">
<div id="roTableAccordion">
<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#productEnquiryTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Product Enquiry
</a>

<div class="collapse" id="productEnquiryTable" data-parent="#roTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold roProductMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.roProductMessage','product','','');"><i class="far fa-save"></i></a></p>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="What type of Product do you want to Purchase?">
    <apex:inputfield value="{!Account.Product_Interested_In__c}" onchange="changeProductDropDowns();" html-placeholder="Requirement" styleClass="prodRequirement requirementVal form-control" style="border:2px solid red;"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Product Requirements">
    <apex:inputTextArea value="{!objectives}" styleClass="form-control objectivesVal productDescription" html-placeholder="Objectives" style="display:none;"/>
    <div id="phonesDropDownDiv" style="display:none;">
       <select id="phonesDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Needs, reasonably priced, phone to keep in contact with family and friends">Needs, reasonably priced, phone to keep in contact with family and friends</option>
          <option value="Needs phone to keep in contact for work">Needs phone to keep in contact for work</option>
          <option value="Needs phone to be contactable for school age children">Needs phone to be contactable for school age children</option>
          <option value="Needs phone to assist in looking for work and keeping in contact with family and friends">Needs phone to assist in looking for work and keeping in contact with family and friends</option>
          <option value="Old phone broken and requires new one to keep in contact with family and friends">Old phone broken and requires new one to keep in contact with family and friends</option>  
          <option value="Needs High-end phone to use extra features like internet, applicant was offered lower priced product but refused.">Needs “High-end” phone to use extra features like internet, applicant was offered lower priced product but refused.</option>   
          <option value="Other">Other</option>  
        </select>
    </div>
    <div id="fridgeDropDownDiv" style="display:none;">
       <select id="fridgeDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Current one broken and needs replacement to keep food fresh">Current one broken and needs replacement to keep food fresh</option>
          <option value="Moved into new / different home and didn’t have one and is an essential item">Moved into new / different home and didn’t have one and is an essential item</option>
          <option value="Needs a bigger one to cater for the number of people in the home">Needs a bigger one to cater for the number of people in the home</option>
          <option value="Other">Other</option>  
        </select>
    </div>
    <div id="tvDropDownDiv" style="display:none;">
       <select id="tvDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Moved into new home and does not have a TV, required to keep family entertained">Moved into new home and does not have a TV, required to keep family entertained</option>
          <option value="Current TV is broken and requires a new one to keep family entertained">Current TV is broken and requires a new one to keep family entertained</option>
          <option value="Need for family member in another room">Need for family member in another room</option>
          <option value="Other">Other</option>  
        </select>
    </div>
    <div id="washingDropDownDiv" style="display:none;">
       <select id="washingDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Currently does not have one, using Laundromat which is very expensive">Currently does not have one, using Laundromat which is very expensive</option>
          <option value="Current one is broken, essential item required to wash clothes">Current one is broken, essential item required to wash clothes</option>
          <option value="Moved into new /different home and didn’t have one and is an essential item">Moved into new /different home and didn’t have one and is an essential item</option>
          <option value="Need bigger one to keep up the washing for family">Need bigger one to keep up the washing for family</option>
          <option value="Other">Other</option>  
        </select>
    </div>
    <div id="computerDropDownDiv" style="display:none;">
       <select id="computerDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need for self – for entertainment, job search, study">Need for self – for entertainment, job search, study</option>
          <option value="Need for family member for entertainment, study, avert depression">Need for family member for entertainment, study, avert depression</option>
          <option value="Need to keep in touch with medical providers and / or Centrelink">Need to keep in touch with medical providers and / or Centrelink</option>
          <option value="Need to connect to internet for entertainment, job search, study">Need to connect to internet for entertainment, job search, study</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="bedDropDownDiv" style="display:none;">
       <select id="bedDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Bed broken and need to replace to be able to get sleep">Bed broken and need to replace to be able to get sleep</option>
          <option value="Bed broken and sleeping on mattress on the floor – need to get better sleep">Bed broken and sleeping on mattress on the floor – need to get better sleep</option>
          <option value="Kids have grown up and need their own beds">Kids have grown up and need their own beds</option>
          <option value="Doesn’t have bed or mattress – need somewhere to sleep">Doesn’t have bed or mattress – need somewhere to sleep</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="couchDropDownDiv" style="display:none;">
       <select id="couchDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Furniture broken and need somewhere to sit">Furniture broken and need somewhere to sit</option>
          <option value="Moved into different house and need furniture for family">Moved into different house and need furniture for family</option>
          <option value="Need cabinet to put TV on">Need cabinet to put TV on</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="soundDropDownDiv" style="display:none;">
       <select id="soundDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need good sound system for entertainment">Need good sound system for entertainment</option>
          <option value="Current system is broken and needs to be replaced to entertain family and friends">Current system is broken and needs to be replaced to entertain family and friends</option>
          <option value="Need better system for more powerful sounds to entertain family and friends">Need better system for more powerful sounds to entertain family and friends</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="gamingDropDownDiv" style="display:none;">
       <select id="gamingDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need for entertainment of self and / or family">Need for entertainment of self and / or family</option>
          <option value="Cannot leave the home much so need for entertainment">Cannot leave the home much so need for entertainment</option>
          <option value="Need to upgrade current system for entertainment">Need to upgrade current system for entertainment</option>
          <option value="Presents for kids / grand-kids / partner">Presents for kids / grand-kids / partner</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="coolingDropDownDiv" style="display:none;">
       <select id="coolingDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Current system is broken, does not cool the place properly">Current system is broken, does not cool the place properly</option>
          <option value="Need to be cooler to be able to sleep">Need to be cooler to be able to sleep</option>
          <option value="Young kids that need to be able to sleep in hot weather">Young kids that need to be able to sleep in hot weather</option>
          <option value="Living in hot climate, needed for family comfort">Living in hot climate, needed for family comfort</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="bedroomDropDownDiv" style="display:none;">
       <select id="bedroomDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="Need cabinets or drawers to store clothes">Need cabinets or drawers to store clothes</option>
          <option value="Need cabinets or tables for the TVs and lamps">Need cabinets or tables for the TVs and lamps</option>
          <option value="Need cots / basinets for baby to sleep">Need cots / basinets for baby to sleep</option>
          <option value="Item required for baby/ child">Item required for baby/ child</option>
          <option value="Item required for general storage">Item required for general storage</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="diningDropDownDiv" style="display:none;">
       <select id="diningDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need somewhere to sit and eat meals with family">Need somewhere to sit and eat meals with family</option>
          <option value="Moved into new place and need to get table and chairs for kitchen">Moved into new place and need to get table and chairs for kitchen</option>
          <option value="Need to replace table and chairs as current ones are broken or too old">Need to replace table and chairs as current ones are broken or too old</option>
          <option value="Item required to accommodate growing family">Item required to accommodate growing family</option>
          <option value="Other">Other</option>  
        </select>
    </div>
    <div id="mowerDropDownDiv" style="display:none;">
       <select id="mowerDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="Moved into new place and now need to look after the garden">Moved into new place and now need to look after the garden</option>
          <option value="Current one is broken and not worth repairing">Current one is broken and not worth repairing</option>
          <option value="Need to earn money from gardening">Need to earn money from gardening</option>
          <option value="Item required to maintain property in accordance with tenancy requirements">Item required to maintain property in accordance with tenancy requirements</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="gardenDropDownDiv" style="display:none;">
       <select id="gardenDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need somewhere to store gardening tools">Need somewhere to store gardening tools</option>
          <option value="Need somewhere to sit in the garden with family and friends">Need somewhere to sit in the garden with family and friends</option>
          <option value="Need to replace existing things as too old, or broken">Need to replace existing things as too old, or broken</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="treadmillDropDownDiv" style="display:none;">
       <select id="treadmillDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="Needed to get fit">Needed to get fit</option>
          <option value="Current items are broken or too old so need to be replace">Current items are broken or too old so need to be replace</option>
          <option value="Item required to assist with fitness / health for medical reasons">Item required to assist with fitness / health for medical reasons</option>  
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="pramDropDownDiv" style="display:none;">
       <select id="pramDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="New baby and need for transport and sleeping">New baby and need for transport and sleeping</option>
          <option value="Current items are too old or broken and need to be replaced">Current items are too old or broken and need to be replaced</option>
          <option value="Item required to accommodate growing family">Item required to accommodate growing family</option> 
          <option value="Other">Other</option> 
        </select>
    </div>
    <div id="vaccumDropDownDiv" style="display:none;">
       <select id="vaccumDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need to be able to clean house">Need to be able to clean house</option>
          <option value="Current items are too old or broken and need to be replaced to keep home clean.">Current items are too old or broken and need to be replaced to keep home clean.</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="printerDropDownDiv" style="display:none;">
       <select id="printerDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="Need to be able to print out documents for study, work, health providers">Need to be able to print out documents for study, work, health providers</option>
          <option value="Need to upgrade system to be able to do more things with computer">Need to upgrade system to be able to do more things with computer</option>
          <option value="Current system needs to be upgraded as too old or broken">Current system needs to be upgraded as too old or broken</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="bikeDropDownDiv" style="display:none;">
       <select id="bikeDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option>
          <option value="Need to get to work as can’t afford car">Need to get to work as can’t afford car</option>
          <option value="Need to get more exercise due to health or medical reasons">Need to get more exercise due to health or medical reasons</option>
          <option value="Presents for kids / grand-kids / partner">Presents for kids / grand-kids / partner</option>
          <option value="Current bike was lost / stolen / broken">Current bike was lost / stolen / broken</option>
          <option value="Item required for local transport, as do not have a car / licence">Item required for local transport, as do not have a car / licence</option>
          <option value="Other">Other</option>
        </select>
    </div>
    <div id="cameraDropDownDiv" style="display:none;">
       <select id="cameraDropDown" onchange="setProductDescription(this);" class="form-control" style="border:2px solid red;">
          <option value="None">None</option> 
          <option value="Need to replace existing items as too old or broken">Need to replace existing items as too old or broken</option>
          <option value="Need for entertainment / holidays">Need for entertainment / holidays</option>
          <option value="Present for kids / grandkids">Present for kids / grandkids</option>
          <option value="Item required as serious hobby and main source of entertainment">Item required as serious hobby and main source of entertainment</option>
          <option value="Other">Other</option>
        </select>
    </div>
    
    <div style="float:right;">
        <img src="{!$Resource.ExpensesEditIcon}" width="30px" height="30px" onclick="editProductDescription()" style="display:none;" id="productDescriptionEditButton"/>
    </div>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="The requirements & objectives is in relation to the 'Sale of Goods by Instalment Credit Contract' product not the item or goods they are purchasing for personal use. When a customer is considering a sale of goods by instalment credit contract to purchase personal household goods for personal use, here are some common examples that can be used:">
    <apex:inputTextArea value="{!prodRequirement}" styleClass="form-control productRequirement" html-placeholder="Requirements and Objectives" style="display:none;"/>
    <select id="prodReqDropDown" class="form-control" style="border:2px solid red;" onchange="setProductRequirement(this);">
      <option value="None">None</option> 
      <option value="The primary objective is to acquire essential household items for personal use without having to pay the full purchase price upfront." title="The primary objective is to acquire essential household items for personal use without having to pay the full purchase price upfront.">The primary objective is to acquire essential household items for personal use without having to pay the full purchase price upfront.</option>
      <option value="The fortnightly/weekly instalment payments are affordable and fit within my budget." title="The fortnightly/weekly instalment payments are affordable and fit within my budget.">The fortnightly/weekly instalment payments are affordable and fit within my budget.</option>
      <option value="I prefer a contract that requires no down payment as it makes it easier for me to get the items I need without a substantial upfront expense." title="I prefer a contract that requires no down payment as it makes it easier for me to get the items I need without a substantial upfront expense.">I prefer a contract that requires no down payment as it makes it easier for me to get the items I need without a substantial upfront expense.</option>
      <option value="I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a shorter term as I want to pay off my items quickly." title="I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a shorter term as I want to pay off my items quickly.">I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a shorter term as I want to pay off my items quickly.</option>
      <option value="I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a longer term contract as the fortnightly/weekly instalment payments are lower." title="I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a longer term contract as the fortnightly/weekly instalment payments are lower.">I prefer flexibility in payment terms. I would like the ability to choose the duration of the contract. The duration of this contract is a longer term contract as the fortnightly/weekly instalment payments are lower.</option>  
      <option value="I would like a competitive interest rate and minimal additional costs." title="I would like a competitive interest rate and minimal additional costs.">I would like a competitive interest rate and minimal additional costs.</option>   
      <option value="The interest rate is fixed, so I have peace of mind that my interest rate will not increase over the duration of my contract." title="The interest rate is fixed, so I have peace of mind that my interest rate will not increase over the duration of my contract.">The interest rate is fixed, so I have peace of mind that my interest rate will not increase over the duration of my contract.</option>   
      <option value="The interest rate is higher for this item but its an essential household item and I dont have the money to buy the item outright." title="The interest rate is higher for this item but its an essential household item and I dont have the money to buy the item outright.">The interest rate is higher for this item but its an essential household item and I dont have the money to buy the item outright.</option>   
      <option value="My objective is to own the product/s outright." title="My objective is to own the product/s outright.">My objective is to own the product/s outright.</option>   
      <option value="I would like to own this product/s and this contract allows me to own the product/s at the end when I make my final payment to my contract." title="I would like to own this product/s and this contract allows me to own the product/s at the end when I make my final payment to my contract.">I would like to own this product/s and this contract allows me to own the product/s at the end when I make my final payment to my contract.</option>   
      <option value="I require a contract that includes provisions for maintenance, repairs, or warranties, for the items I am purchasing so I know they remain in good working condition during the contract period." title="I require a contract that includes provisions for maintenance, repairs, or warranties, for the items I am purchasing so I know they remain in good working condition during the contract period.">I require a contract that includes provisions for maintenance, repairs, or warranties, for the items I am purchasing so I know they remain in good working condition during the contract period.</option>   
      <option value="I require a quick approval so I can purchase this item that is essential to my livelihood." title="I require a quick approval so I can purchase this item that is essential to my livelihood.">I require a quick approval so I can purchase this item that is essential to my livelihood.</option>   
      <option value="I need my loan approved quickly so I can purchase this item that I cannot purchase outright as I dont have the money to. This contract allows me to view my interest rate and fees before I commit to anything." title="I need my loan approved quickly so I can purchase this item that I cannot purchase outright as I dont have the money to. This contract allows me to view my interest rate and fees before I commit to anything.">I need my loan approved quickly so I can purchase this item that I cannot purchase outright as I dont have the money to. This contract allows me to view my interest rate and fees before I commit to anything.</option>   
    </select>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Loan Purpose">
    <apex:inputTextArea value="{!loanPurpose}" styleClass="form-control loanPurpose" html-placeholder="Loan Purpose" style="border:2px solid red;" rows="4"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Why use a Sale of Goods by Instalment?">
    <apex:inputTextArea value="{!whyConsumerLease}" styleClass="form-control whyConsumerLeaseVal" html-placeholder="Why use a Sale of Goods by Instalment?" style="border:2px solid red;" rows="3"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Benefit of Sale of Goods by Instalment">
    <apex:inputfield value="{!Account.Benefit_of_Consumer_Lease_with_R4K__c}" styleClass="benefitsOfConsumerLease form-control" style="border:2px solid red;" onchange="toggleOtherBenefits(this);"/>
</div>
<div class="form-row mt-4 otherBenefitsOfConsumerLeaseDiv" data-toggle="tooltip" data-placement="top" title="Other Benefits of Sale of Goods by Instalment" style="{!IF(Account.Benefit_of_Consumer_Lease_with_R4K__c = 'Other','display:block;','display:none;')}">
    <apex:inputTextArea value="{!otherBenefitsOfConsumerLease}" styleClass="form-control otherBenefitsOfConsumerLeaseVal" html-placeholder="Other Benefits of Sale of Goods by Instalment" style="border:2px solid red;"/>
</div>
<!--
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Product Interested">
    <apex:inputTextArea value="{!productInterested}" styleClass="form-control productInterestedVal" html-placeholder="Product Interested"/>
</div>
-->
<div class="form-row mt-4 whyNotPhonePlanValDiv" data-toggle="tooltip" data-placement="top" title="Why Not Phone Plan">
    <apex:inputTextArea value="{!whyNotPhonePlan}" styleClass="form-control whyNotPhonePlanVal" html-placeholder="Why Not Phone Plan" style="border:2px solid red;"/>
</div>

<div style="min-height:50px;">&nbsp;</div>
</div>

</div>
</apex:outputPanel>
<!--------------- RO ---------------->

</div>

<div class="col-md-6">
<!--------------- Id ---------------->

<apex:outputPanel rendered="{!sectionType=='id'}">
    <div id="idAssButtonAccordion">
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2 quickRental text-white">ID</a> &nbsp;
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#idBankButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Bank</a>
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#idClinkButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Income</a>
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#idOtherButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Other</a>
        
        <div class="bankButtons collapse" id="idBankButtons" data-parent="#idAssButtonAccordion">
            <apex:repeat value="{!bankAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
        <div class="incomeButtons collapse" id="idClinkButtons" data-parent="#idAssButtonAccordion">
            <apex:repeat value="{!clinkAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
        <div class="otherButtons collapse" id="idOtherButtons" data-parent="#idAssButtonAccordion">
            <apex:repeat value="{!otherAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </div>
    
    <apex:repeat value="{!incomeExpenseAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <apex:repeat value="{!otherAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <div style="display:none;" class="incomeStatements quickRentalStatement">
        <apex:image height="600px" width="90%" value="{!idAtt.url}"/>
    </div>
</apex:outputPanel>

<!--------------- Id ---------------->

<!--------------- RO ---------------->

<apex:outputPanel rendered="{!sectionType=='ro'}">
<div id="roCATableAccordion">

<a style="{!IF(CA_totalAgreements > 0,'','display:none;')}" class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#applicantInfoCA" role="button" aria-expanded="false" aria-controls="collapseExample">
Applicant Info
</a>
<div class="collapse" id="applicantInfoCA" data-parent="#roCATableAccordion"> 
<table class="table table-sm text-center" id="applicantTable1" onclick="openCA();">
    <tbody>
        <tr>
            <td>Agreements</td>
            <td>TAV</td>
            <td>Total Paid</td>
        </tr>
        <tr>
            <td class="h5">{!CA_activeAgreements} / {!CA_totalAgreements}</td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalTAV}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalPaid}"/></apex:outputText></td>
        </tr>
        <tr>
            <td>Rem. Amount</td>
            <td>Sched. Amount</td>
            <td>Last Paid</td>
        </tr>
        <tr>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_totalRemaining}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!CA_scheduledAmount}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}"><apex:param value="{!Account.LastPaymentRecieved__c}"/></apex:outputText></td>
        </tr>      
    </tbody>
</table>

<table class="table table-sm text-center" id="applicantTable2" style="background-color: #dfe0e0;">
    <tbody>
        <tr>
            <td>Arrears Original</td>
            <td>Actual Arrears</td>
            <td>Missed Days</td>
        </tr>
        <tr>
            <td class="h5"><apex:outputText value="{0,number,currency}" style="color:{!IF(CA_actualArrearsOriginal > 0,'#D81E05','green')}"><apex:param value="{!CA_actualArrearsOriginal}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}" style="color:{!IF(CA_actualArrears > 0,'#D81E05','green')}"><apex:param value="{!CA_actualArrears}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{!IF(Account.No_Of_Active_Agreements__c>0 && Account.Days_Since_Expected_Payment__c!=null && Account.Days_Since_Expected_Payment__c >0,ROUND(Account.Days_Since_Expected_Payment__c,0),0)}" style="color:{!IF(Account.No_Of_Active_Agreements__c>0 && Account.Days_Since_Expected_Payment__c!=null && Account.Days_Since_Expected_Payment__c >0,'#D81E05','green')}"/></td>
        </tr>
        <tr>
            <td>Late Fee</td>
            <td>Site Visit</td>
            <td>Termination</td>
        </tr>
        <tr>
            <td class="h5"><apex:outputText value="{0,number,currency}" style="color:{!IF(AND(Account.Missed_Payment__c != null, Account.Missed_Payment__c > 0),'#D81E05','green')}"><apex:param value="{!IF(Account.Missed_Payment__c = null, 0,Account.Missed_Payment__c) }"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}" style="color:{!IF(AND(Account.Site_Visit__c != null, Account.Site_Visit__c > 0),'#D81E05','green')}"><apex:param value="{!IF(Account.Site_Visit__c = null , 0, Account.Site_Visit__c)}"/></apex:outputText></td>
            <td class="h5"><apex:outputText value="{0,number,currency}" style="color:{!IF(AND(Account.Termination__c != null, Account.Termination__c > 0),'#D81E05','green')}"><apex:param value="{!IF(Account.Termination__c = null, 0, Account.Termination__c)}"/></apex:outputText></td>
        </tr>      
    </tbody>
</table>
</div>

<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#existingRO" role="button" aria-expanded="false" aria-controls="collapseExample">
Existing R&amp;O
</a>
<div class="collapse" id="existingRO" data-parent="#roCATableAccordion">  
    <table class="table table-striped table-sm table-condensed">
        <tr>
            <td>Name</td><td>Stage</td><td>R&amp;O</td><td>TAV</td><td>Rem. Amt</td><td>Schd. Amt</td><td>Created</td>
        </tr>
        <apex:repeat value="{!otherAgmts}" var="oag">
            <tr>
                <td>{!oag.Name}</td>
                <td>{!oag.StageName}</td>
                <td>{!oag.Requirements_Objectives__c}</td>
                <td><apex:outputText value="{0,number,currency}"> <apex:param value="{!oag.Amount}" /> </apex:outputText></td>
                <td><apex:outputText value="{0,number,currency}"> <apex:param value="{!oag.Remaining_Amount__c}" /> </apex:outputText></td>
                <td><apex:outputText value="{0,number,currency}"> <apex:param value="{!oag.Scheduled_Amount__c}" /> </apex:outputText></td>
                <td><apex:outputText value="{0,date,dd-MMM-yyyy}"> <apex:param value="{!oag.CreatedDate}" /> </apex:outputText></td>
            </tr>
        </apex:repeat>
    </table>
</div> 
</div>
</apex:outputPanel>

<!--------------- RO ---------------->

<!--------------- Equifax ---------------->

<apex:outputPanel rendered="{!sectionType=='equifax'}">
    <apex:iframe rendered="{!IF(equifaxAtt!=null, true, false)}" height="600px" src="{!equifaxAtt.url}" scrolling="true"/> 
</apex:outputPanel>

<!--------------- Equifax ---------------->

<!--------------- Bank & MyGov ---------------->
<apex:outputPanel rendered="{!sectionType=='bank'}">
    <div id="bankButtonAccordion">
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#bankButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Bank</a>
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#incomeButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Income</a>
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2" data-toggle="collapse" href="#otherButtons" role="button" aria-expanded="false" aria-controls="collapseExample">Other</a>
        <a onclick="toggleIncomeGroups(this);" class="incomeStatementButtonGroups btn btn-primary font-weight-bold mt-2 quickRental text-white">Rental Calculator</a> &nbsp;
        
        <div class="bankButtons collapse" id="bankButtons" data-parent="#bankButtonAccordion">
            <apex:repeat value="{!bankAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
        <div class="incomeButtons collapse" id="incomeButtons" data-parent="#bankButtonAccordion">
            <apex:repeat value="{!clinkAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
        <div class="otherButtons collapse" id="otherButtons" data-parent="#bankButtonAccordion">
            <apex:repeat value="{!otherAttachmentWrapper}" var="att">
                <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
            </apex:repeat>
        </div>
    </div>
    
    <apex:repeat value="{!incomeExpenseAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <apex:repeat value="{!otherAttachmentWrapper}" var="att">
        <div style="display:none;" class="incomeStatements {!att.Id}">
            <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
        </div>                          
    </apex:repeat>
    <div style="display:none;" class="incomeStatements quickRentalStatement">
        <apex:iframe height="850px" src="/apex/QuickRentalCalculatorCMLightning?id={!Account.Id}&pageType=CAM3" scrolling="true"/> 
    </div>
    <!--
    <apex:outputPanel rendered="{!IF(incomeExpenseAttachmentWrapper.size > 0, true, false)}"> 
        <apex:repeat value="{!incomeExpenseAttachmentWrapper}" var="att">
            <a class="incomeStatementButtons btn btn-sm btn-info text-white {!att.Id}" style="font-weight-blod;" onclick="toggleIncomeStatements('{!att.Id}');">{!att.Name}</a> &nbsp;
        </apex:repeat>
        <a class="incomeStatementButtons btn btn-sm btn-info text-white quickRental" style="font-weight-blod;" onclick="toggleIncomeStatements('quickRental');">Rental Calculator</a> &nbsp;
        <hr/>
        <apex:repeat value="{!incomeExpenseAttachmentWrapper}" var="att">
            <div style="display:none;" class="incomeStatements {!att.Id}">
                <apex:iframe rendered="{!IF(att!=null, true, false)}" height="850px" src="{!att.url}" scrolling="true"/> 
            </div>                          
        </apex:repeat>
        <div style="display:none;" class="incomeStatements quickRental">
            <apex:iframe height="850px" src="/apex/QuickRentalCalculatorCMLightning?id={!Account.Id}&pageType=CAM3" scrolling="true"/> 
        </div>
    </apex:outputPanel>
    -->
</apex:outputPanel>
<!--------------- Bank & MyGov ---------------->

</div>

</div>
</apex:outputPanel>


<apex:outputPanel rendered="{!IF(formType=='signing',true,false)}">
<apex:outputPanel rendered="{!IF(sectionType=='sourcing',true,false)}">
<div class="d-flex justify-content-between mt-2 mb-2">
    <a class="btn btn-block btn-success text-white" onclick="savingMessage('','','next','next');">Next</a>
</div>
<apex:outputPanel layout="false" rendered="{!IF(agreementIdForCurrentEnquiry != null && agreementIdForCurrentEnquiry != '', true, false)}">
<div class="d-flex justify-content-between mt-2 mb-2">
    <a class="btn btn-block btn-warning" onclick="window.open('/apex/AddPurchaseReceiptPage?callback=CAM3&oppId={!agreementIdForCurrentEnquiry}','_self');">Add Purchase Receipt</a>
</div>
<div class="d-flex justify-content-between mt-2 mb-2">
    <a class="btn btn-block btn-info text-white" data-toggle="modal" data-target=".docsModal">Add RRP Recceipt</a>
</div>
</apex:outputPanel>
<apex:outputPanel layout="false" rendered="{!IF(NOT(AND(currentApprovalStatus<>null,currentApprovalStatus='Approved')),true,false)}">
<div class="mt-4 bg-danger text-white font-weight-bold" style="padding:10px;">
    Products cannot be added before the approval of the agreement.
</div>
</apex:outputPanel>
</apex:outputPanel>

<apex:outputPanel rendered="{!IF(sectionType=='sign',true,false)}">
<apex:outputPanel rendered="{!IF(AND(currentApprovalStatus<>null,currentApprovalStatus='Approved'),true,false)}">
<div class="d-flex justify-content-between mt-2 mb-2">
    <a href="/apex/R4KOnlineFormReviewPage?id={!agreementIdForCurrentEnquiry}" class="btn btn-block btn-warning">1-Link</a>
</div>
</apex:outputPanel>

<apex:outputPanel layout="false" rendered="{!IF(NOT(AND(currentApprovalStatus<>null,currentApprovalStatus='Approved')),true,false)}">
<div class="mt-4 bg-danger text-white font-weight-bold" style="padding:10px;">
    Cannot Sign before the approval of the agreement.
</div>
</apex:outputPanel>
</apex:outputPanel>
<!--------------- Sourcing ---------------->

<div class="row" style="margin-left:5px;margin-right:5px;">
<div class="col-md-6">
<apex:outputPanel rendered="{!IF(AND(sectionType=='sourcing',currentApprovalStatus<>null,currentApprovalStatus='Approved'),true,false)}">
<div id="agreeemntTableAccordion">
<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#agreementTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Agreement Info
</a>

<div class="collapse" id="agreementTable" data-parent="#agreeemntTableAccordion">
<p style="text-align:right;"><span class="font-weight-bold idAgreementInfoMessage" style="display:none;">Saving!!!&nbsp;</span><a class="btn btn-success" onclick="savingMessage('.idAgreementInfoMessage','info','','');"><i class="far fa-save"></i></a></p>
<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Agreement Name">
    {!opportunity.Name}
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Stage">
    <apex:selectList id="chooseStage" size="1" multiselect="false" value="{!agmtStage}" styleClass="agmtStage form-control">
        <apex:selectOption itemValue="Goods Delivered" itemLabel="Goods Delivered"/>
        <apex:selectOption itemValue="Did Not Proceed" itemLabel="Did Not Proceed"/>  
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Frequency">
    <apex:selectList id="chooseFrequency" size="1" multiselect="false" value="{!agmtFrequency}" styleClass="agmtFrequency form-control">
        <apex:selectOption itemValue="Fortnightly" itemLabel="Fortnightly"/>
        <apex:selectOption itemValue="Weekly" itemLabel="Weekly"/>  
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Term (Months)">
    <apex:selectList id="chooseTerm" size="1" multiselect="false" value="{!agmtTerm}" styleClass="agmtTerm form-control"> 
        <apex:selectOption itemValue="13" itemLabel="13"/>  
        <apex:selectOption itemValue="18" itemLabel="18"/>  
        <apex:selectOption itemValue="24" itemLabel="24"/>  
        <apex:selectOption itemValue="36" itemLabel="36"/>  
    </apex:selectList>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Why was the agreement approved?">
    <apex:inputTextArea value="{!whyWasTheAgreementApproved}" styleClass="form-control whyWasTheAgreementApproved" html-placeholder="Why was the agreement approved?"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Delivery Date">
    <apex:inputText value="{!agmtDeliveryDate}" styleClass="form-control agmtDeliveryDate" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="TAV">
    <b><apex:outputText value="{0, number, currency}"><apex:param value="{!agmtTAV}" /></apex:outputText></b>
</div>

<div class="form-row mt-4" data-toggle="tooltip" data-placement="top" title="Scheduled Amount">
    <b><apex:outputText value="{0, number, currency}"><apex:param value="{!agmtSchdAmt}" /></apex:outputText></b>
</div>
</div>
</div>
<div id="sourcingTableAccordion">
<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#sourcingTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Sourcing Links
</a>

<div class="collapse" id="sourcingTable" data-parent="#sourcingTableAccordion">

<ul class="list-group">
  <li class="list-group-item"><a href="/apex/ProductOrderEmailPage?supplier=HNC&id={!agreementIdForCurrentEnquiry}" target="_blank">Harvey Normal Commercial (HNC)</a></li>
  <li class="list-group-item"><a href="/apex/ProductOrderEmailPage?supplier=CMI&id={!agreementIdForCurrentEnquiry}" target="_blank">CMI</a></li>
  <li class="list-group-item"><a href="https://www.harveynorman.com.au" target="_blank">Harvey Norman</a></li>
  <li class="list-group-item"><a href="https://www.jbcommercial.com.au/" target="_blank">JB HI-FI Commercial</a></li>
  <li class="list-group-item"><a href="https://www.jbhifi.com.au" target="_blank">JB HI-FI</a></li>
  <li class="list-group-item"><a href="https://www.thegoodguys.com.au" target="_blank">Good Guys</a></li>
</ul>
</div>

</div>

<div id="quickRentalTableAccordion">
<a class="btn btn-block btn-secondary font-weight-bold mt-2" data-toggle="collapse" href="#quickRentalTable" role="button" aria-expanded="false" aria-controls="collapseExample">
Quick Rental Calculator
</a>

<div class="collapse" id="quickRentalTable" data-parent="#quickRentalTableAccordion">
<apex:iframe height="850px" src="/apex/QuickRentalCalculatorCMLightning?id={!Account.Id}&pageType=CAM3" scrolling="true"/>
</div>

</div>
</apex:outputPanel>
</div>
<!--------------- Sourcing ---------------->

<!--------------- Sourcing ---------------->
<div class="col-md-6">
<apex:outputPanel rendered="{!AND(sectionType=='sourcing',currentApprovalStatus<>null,currentApprovalStatus='Approved')}">
<div>
<a class="btn btn-block btn-secondary font-weight-bold mt-2" href="/apex/AddProductRedirectPage?callback=CAM&Id={!agreementIdForCurrentEnquiry}" role="button">
Add Products
</a>
</div>
    <apex:outputPanel rendered="{!IF(products.size>0,true,false)}">
    <div>  
        <table class="table table-striped table-sm table-condensed">
            <tr>
                <td>Product</td><td>Description</td><td>Serial Number</td><td>Rental Period (Months)</td><td>No of payments</td><td>Rental per Fortnight (inc GST)</td><td>Total Rental payable($)*</td>
            </tr>
            <apex:repeat value="{!products}" var="prd">
                <tr onclick="editProductFuncJS('{!prd.Id}')">
                    <td>{!prd.Name}</td>
                    <td>{!prd.Description}</td>
                    <td>{!prd.Serial_Number__c}</td>
                    <td>{!FLOOR(prd.Term_Months__c)}</td>
                    <td><apex:outputText value="{0, number,###,###,##0}"><apex:param value="{!prd.Opportunity.Number_Of_SP_for_Cross_Check__c}"/></apex:outputText></td>
                    <td><apex:outputField value="{!prd.Actual_Per_Fortnight__c}"/></td>
                    <td><apex:outputField value="{!prd.TotalPrice}"/></td>
                </tr>
            </apex:repeat>
        </table>
    </div> 
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(products.size=0,true,false)}">
        <b>No products added</b>
    </apex:outputPanel>
</apex:outputPanel>
</div>
<!--------------- Sourcing ---------------->
</div>
<!--------------- Sourcing ---------------->

<!--------------- Signing ---------------->

<div class="row" style="margin-left:5px;margin-right:5px;">
<div class="col-md-6">
<apex:outputPanel rendered="{!IF(AND(sectionType=='sign',currentApprovalStatus<>null,currentApprovalStatus='Approved'),true,false)}">
<div id="sourcingTableAccordion">
<a class="btn btn-block btn-secondary font-weight-bold mt-2">
Signing Status
</a>

<ul class="list-group">
  <li class="list-group-item"><p class="{!IF(account.Application_Signed_Date__c!=null,'text-success','text-danger')}">Application Form</p></li>
  <li class="list-group-item"><p class="{!IF(opportunity!=null && opportunity.TaxInvoice_Signed_DateTime__c!=null,'text-success','text-danger')}">Tax Invoice</p></li>
  <li class="list-group-item"><p class="{!IF(opportunity!=null && opportunity.Is_Consent_Signed__c,'text-success','text-danger')}">Consent Form</p></li>
  <li class="list-group-item"><p class="{!IF(opportunity!=null && opportunity.Is_Signed_Deduction_Form_Attached__c,'text-success','text-danger')}">Deduction Form</p></li>
</ul>

</div>
</apex:outputPanel>
</div>
</div>
<!--------------- Signing ---------------->
</apex:outputPanel>

<!-- Reset Hybrid Modal -->
<div class="modal fade" id="resetHybridModal" tabindex="-1" role="dialog" aria-labelledby="resetModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Reset &amp; Resend Link</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <apex:inputCheckbox value="{!resetHybridLinkId}" style="width:25px;height:25px;"/> <b>Id</b> <br/><br/>
        <apex:inputCheckbox value="{!resetHybridLinkBank}" style="width:25px;height:25px;"/> <b>Bank</b> <br/><br/>
        <apex:inputCheckbox value="{!resetHybridLinkMygov}" style="width:25px;height:25px;"/> <b>{!IF(account.State_Master_State__c = 'NZ','Proof Of Income','Mygov')}</b> <br/><br/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <apex:commandButton styleClass="btn btn-primary" action="{!resendHybridLink}" value="Resend Hybrid Link"/>
      </div>
    </div>
  </div>
</div>
<!-- Reset Hybrid Modal -->


<!-- Reset Online Modal -->
<div class="modal fade" id="resetOnlineModal" tabindex="-1" role="dialog" aria-labelledby="resetModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Reset &amp; Resend Link</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
            <table class="table table-sm">
                <thead class="bg-dark text-white font-weight-bold">
                    <th>Reset</th>
                    <th>Section</th>
                </thead>
                <tbody>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkId}" styleClass="resetLinkId" style="width:25px;height:25px;"/></td>
                        <td>Id</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkBank}" styleClass="resetLinkBank" style="width:25px;height:25px;"/></td>
                        <td>Bank</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkMygov}" styleClass="resetLinkMygov" style="width:25px;height:25px;"/></td>
                        <td>{!IF(account.State_Master_State__c = 'NZ','Proof Of Income','Mygov')}</td>
                    </tr>
                    <!--<tr>
                        <td><apex:inputCheckbox value="{!resetLinkRO}" styleClass="resetLinkRO" style="width:25px;height:25px;"/></td>
                        <td>R&amp;O</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkBasic}" styleClass="resetLinkBasic" style="width:25px;height:25px;"/></td>
                        <td>Basic Information</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkExpense}" styleClass="resetLinkExpense" style="width:25px;height:25px;"/></td>
                        <td>Expense</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkIncome}" styleClass="resetLinkIncome" style="width:25px;height:25px;"/></td>
                        <td>Income</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkReferees}" styleClass="resetLinkReferees" style="width:25px;height:25px;"/></td>
                        <td>Referees</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!resetLinkEquifax}" styleClass="resetLinkEquifax" style="width:25px;height:25px;"/></td>
                        <td>Equifax</td>
                    </tr>-->
                </tbody>    
            </table>  
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <apex:commandButton styleClass="btn btn-primary" action="{!resendOnlineLink}" value="Resend Online Link" onclick="return validateResetOnlineLink();"/>
            </div>
        </div>
    </div>
</div>
<!-- Reset Online Modal -->


<!-- Reset Doc Modal -->
<div class="modal fade" id="resetDocModal" tabindex="-1" role="dialog" aria-labelledby="resetModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Reset &amp; Resend doc-Link</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
            <table class="table table-sm">
                <thead class="bg-dark text-white font-weight-bold">
                    <th>Reset</th>
                    <th>Section</th>
                </thead>
                <tbody>                    
                    <tr>
                        <td><apex:inputCheckbox value="{!sendMOGOMyGovSMS}" styleClass="sendMOGOMyGovSMS" style="width:25px;height:25px;"/></td>
                        <td>Mygov</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox value="{!sendMOGOBankSMS}" styleClass="sendMOGOBankSMS" style="width:25px;height:25px;"/></td>
                        <td>Bank</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox selected="true" style="width:25px;height:25px;" disabled="true"/></td>
                        <td>Other Document</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox selected="true" style="width:25px;height:25px;" disabled="true"/></td>
                        <td>Photo Id</td>
                    </tr>
                    <tr>
                        <td><apex:inputCheckbox selected="true" style="width:25px;height:25px;" disabled="true"/></td>
                        <td>Equifax Consent</td>
                    </tr>
                </tbody>    
            </table>  
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <apex:commandButton styleClass="btn btn-primary" action="{!createConsentLink}" value="Resend doc-Link"/>
            </div>
        </div>
    </div>
</div>
<!-- Reset Doc Modal -->


<!----- Default Modal ----->
<div class="modal fade bd-example-modal-lg" id="editDefaultModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <apex:outputPanel id="editDefaultModalContent">
      <!-- Modal Header -->
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
      <div class="table-responsive"> 
        <table class="table table-striped">
            <tr>
                <td width="30%">Company Name</td>
                <td width="70%"><apex:inputText value="{!selectedDefaultCompanyName}" styleClass="form-control selectedDefaultCompanyName"/></td>
            </tr>
            <tr>
                <td width="30%">Company Type</td>
                <td width="70%">
                    <apex:selectList value="{!selectedDefaultCompanyType}" styleClass="selectedDefaultCompanyType" size="1" multiselect="false">
                        <apex:selectOption itemLabel="--None--" itemValue="--None--"/>
                        <apex:selectOption itemLabel="Non-Rental" itemValue="Non-Rental"/>
                        <apex:selectOption itemLabel="Rental" itemValue="Rental"/>
                    </apex:selectList>
                </td>
            </tr>
            <tr>
                <td width="30%">Default Date</td>
                <td width="70%"><apex:inputText value="{!selectedDefaultDate}" styleClass="form-control selectedDefaultDate" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/></td>
            </tr>
            <tr>
                <td width="30%">Status</td>
                <td width="70%">
                    <apex:selectList value="{!selectedDefaultStatus}" styleClass="selectedDefaultStatus" size="1" multiselect="false">
                        <apex:selectOption itemLabel="--None--" itemValue="--None--"/>
                        <apex:selectOption itemLabel="Current" itemValue="Current"/>
                        <apex:selectOption itemLabel="Outstanding" itemValue="Outstanding"/>
                        <apex:selectOption itemLabel="Paid" itemValue="Paid"/>
                        <apex:selectOption itemLabel="Settled" itemValue="Settled"/>
                        <apex:selectOption itemLabel="New Arrangement - Varied" itemValue="New Arrangement - Varied"/>
                        <apex:selectOption itemLabel="New Arrangement - New Account" itemValue="New Arrangement - New Account"/>
                    </apex:selectList>
                </td>
            </tr>
            <tr>
                <td width="30%">Default Amount</td>
                <td width="70%"><apex:inputText value="{!selectedDefaultAmount}" styleClass="form-control selectedDefaultAmount"/></td>
            </tr>
            <tr>
                <td width="30%">Default Notes</td>
                <td width="70%"><apex:inputTextArea value="{!selectedDefaultNotes}" styleClass="form-control selectedDefaultNotes"/></td>
            </tr>
        </table>
        </div>
      </div>
    </apex:outputPanel>
      <!-- Modal footer -->
      <div class="modal-footer d-flex justify-content-between mt-2 mb-2">
        <apex:commandButton value="Delete" action="{!deleteEditedDefault}" styleClass="btn btn-danger" rendered="{!IF(editDefault <> null,true,false)}"/>
        <apex:commandButton value="Save" action="{!saveEditedDefault}" styleClass="btn btn-success"/>
      </div>

    </div>
  </div>
</div>
<!----- Default Modal ----->

<!----- Product Modal ----->
<div class="modal fade bd-example-modal-lg" id="editProductModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
        <apex:outputPanel id="editProductModalContent">
      <!-- Modal Header -->
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
      <div class="table-responsive"> 
        <table class="table table-striped">
            <tr>
                <td width="30%">Description</td>
                <td width="70%"><apex:inputText value="{!prodDescription}" styleClass="form-control prodDescription"/></td>
            </tr>
            <tr>
                <td width="30%">Model No.</td>
                <td width="70%"><apex:inputText value="{!prodmodelNo}" styleClass="form-control prodmodelNo"/></td>
            </tr>
            <tr>
                <td width="30%">IMEI No.</td>
                <td width="70%"><apex:inputText value="{!prodimeiNo}" styleClass="form-control prodimeiNo"/></td>
            </tr>
            <tr>
                <td width="30%">Serial No.</td>
                <td width="70%"><apex:inputText value="{!prodserialNo}" styleClass="form-control prodserialNo"/></td>
            </tr>
            <tr>
                <td width="30%">Invoice No.</td>
                <td width="70%"><apex:inputText value="{!prodinvoiceNumber}" styleClass="form-control prodinvoiceNumber"/></td>
            </tr>
            <tr>
                <td width="30%">Invoice Date</td>
                <td width="70%"><apex:inputText value="{!prodinvoiceDate}" styleClass="form-control prodinvoiceDate" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/></td>
            </tr>
        </table>
        </div>
      </div>
    </apex:outputPanel>
      <!-- Modal footer -->
      <div class="modal-footer d-flex justify-content-between mt-2 mb-2">
        <apex:commandButton value="Save" action="{!saveEditedProduct}" styleClass="btn btn-success"/>
      </div>

    </div>
  </div>
</div>
<!----- Product Modal ----->

<!-- Referee Modal -->

<div class="modal fade bd-example-modal-lg refereeModal">
  <div class="modal-dialog modal-lg">
  <div class="modal-content">
  <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Referees Added</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
  </div>
    <div class="modal-body">
        <table class="table table-sm table-striped">
            <thead>
                <th>Name</th>
                <th>Phone</th>
                <th>Relationship</th>
                <th>Added Date</th>
                <th>Contacted</th>
                <th>Contacted Date</th>
                <th></th>
            </thead>
            <tbody>
            <apex:repeat value="{!totalRefAdded}" var="ref">
                <tr>
                    <td><a href="/{!ref.Id}" target="_blank">{!ref.Referee_Name__r.Name}</a></td>
                    <td>{!ref.Phone__c}</td>
                    <td>{!ref.Relationship__c}</td>
                    <td><apex:outputText value="{0, date, dd/MM/yyyy}"><apex:param value="{!ref.Referee_Added_Datetime__c}"/></apex:outputText></td>
                    <td>{!ref.Contacted__c}</td>
                    <td><apex:outputText value="{0, date, dd/MM/yyyy}"><apex:param value="{!ref.Contacted_On_Date__c}"/></apex:outputText></td>
                    <apex:outputPanel rendered="{!IF(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'NZ',Account.Territory_Number__r.State_Master_State__c = 'QLD',Account.Territory_Number__r.State_Master_State__c = 'WA'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),true,false)}" layout="none">
                        <td style="text-align:center;">
                            <a class="btn btn-success text-white" onclick="updateRefereeSMSStatus('{!ref.Id}',this);">Send SMS</a> <apex:image value="{!$Resource.TickIcon}" width="30" height="30" styleClass="{!ref.Id}" style="display:none;"/>
                        </td>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!IF(OR(AND(OR(Account.Territory_Number__r.State_Master_State__c = 'VIC',Account.Territory_Number__r.State_Master_State__c = 'SA',Account.Territory_Number__r.State_Master_State__c = 'NSW',Account.Territory_Number__r.State_Master_State__c = 'NZ',Account.Territory_Number__r.State_Master_State__c = 'QLD',Account.Territory_Number__r.State_Master_State__c = 'WA'),Account.Territory_Number__r.Company_Territory__c), Account.Territory_Number__r.Short_Name__c = 'Greensborough', Account.Territory_Number__r.Short_Name__c = 'Wide Bay'),false,true)}" layout="none">
                        <td style="text-align:center;">
                            <a class="btn btn-success text-white" href="/apex/RefereeContactFormPage?rf={!ref.Id}" target="_blank">Contact</a>
                        </td>
                    </apex:outputPanel>
                </tr>
            </apex:repeat>  
            </tbody> 
        </table>  
    </div>
    </div>
  </div>
</div>

<!-- Referee Modal -->

<!-- Attachment Modal -->
<div class="modal fade bd-example-modal-lg docsModal">
  <div class="modal-dialog modal-lg">
  <div class="modal-content">
  <div class="modal-header">
        <h5 class="modal-title">Add {!IF(sectionType='id','Photo Id',IF(sectionType='bank','Bank Statement',IF(sectionType='mygov','myGov Statement',IF(sectionType='sourcing','RRP Receipt',''))))}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
  </div>
    <div class="modal-body">
        <div class="attachmentComponent">
            <c:AddAttachmentComponent modalSize="large" id="pt" parentId="{!IF(sectionType='sourcing',agreementIdForCurrentEnquiry,acctId)}" DragDropHeight="60px" FileName="{!IF(sectionType='id','Photo Id',IF(sectionType='bank',IF(bankStatementAttached,'Other File','BankStatement_R4K_'),IF(sectionType='mygov',IF(myGovAttached,'Other File','myGov_'),IF(sectionType='sourcing','RRP Receipt',''))))}{!IF((sectionType='bank' && !bankStatementAttached) || (sectionType='mygov' && !myGovAttached),account.FirstName&' '&account.LastName&'_'&todayDateString,'')}"/>
        </div>
        
        <p style="display:none;" class="uploadingDocs">Please wait till upload is completed...</p>
        
        <div style="display:none;" class="overrideDocs">
            <apex:inputCheckbox value="{!overrideDocs}" style="width:20px;height:20px;"/>&nbsp;&nbsp;Override {!IF(sectionType='id','Photo Id',IF(sectionType='bank','Bank Statement',IF(sectionType='mygov','myGov Statement','')))}
        </div>
        
        <div style="display:none;" class="uploadingDocsFinish">
            <apex:commandButton action="{!overrideDocs}" styleClass="btn btn-block btn-success mt-2" value="Finish"/>
        </div>
    </div>
    </div>
  </div>
</div>
<!-- Attachment Modal -->

</apex:form>

<script>
    
function openEditDefaultModal()
{
    $('#editDefaultModal').modal(
        {}
    );
}

function openEditProductModal()
{
    $('#editProductModal').modal(
        {}
    );
}

function editDefaultFuncJS(paramId)
{
    console.log('Default Id : ' + paramId);
    editDefaultFunc(paramId);
}

function editProductFuncJS(paramId)
{
    console.log('Product Id : ' + paramId);
    editProductFunc(paramId);
}

function idTypeChanged()
{
    if($('.idTypeVal').val() == 'Other')
    {
        $('.idTypeValOther-row').css('display','');
    }else
    {
        $('.idTypeValOther-row').css('display','none');
    }
}

var placeSearch, autocomplete, autocompletePrevious;

var componentForm = {
street_number: 'short_name',
route: 'long_name',
locality: 'long_name',
administrative_area_level_1: 'short_name',
country: 'long_name',
postal_code: 'short_name'
};

var countryVal;
var currentStreetAddress;
var currentSuburb;
var currentState;
var currentPostcode;
var currentCountry;
var currentLatitude;
var currentLongitude;

if('{!sectionType}' == 'id' && '{!formType}' == 'assessment')
{
    countryVal = '{!stateMasterState}' == 'NZ' ? 'NZ' : 'AU';
    currentStreetAddress = document.getElementById("{!$Component.theForm.currentStreetAddress}");
    currentSuburb = document.getElementById("{!$Component.theForm.currentSuburb}");
    currentState = document.getElementById("{!$Component.theForm.currentState}");
    currentPostcode = document.getElementById("{!$Component.theForm.currentPostcode}");
    currentCountry = document.getElementById("{!$Component.theForm.currentCountry}");
    currentLatitude = document.getElementById("{!$Component.theForm.currentLatitude}");
    currentLongitude = document.getElementById("{!$Component.theForm.currentLongitude}");
}

function initAutocomplete() 
{
    if('{!formType}' == 'assessment' && '{!sectiontype}' == 'id')
    {
        autocomplete = new google.maps.places.Autocomplete(
        document.getElementById('txtHomeAddress'), {types: ['geocode'],componentRestrictions: {country: countryVal}});
    
        autocomplete.setFields(['address_component']);
        autocomplete.addListener('place_changed', fillInAddress);
    }
}

function fillInAddress() 
{
    var place = autocomplete.getPlace();
    var addressStr = '';
    var streetAddressStr = '';

    for (var i = 0; i < place.address_components.length; i++) 
    {
        var addressType = place.address_components[i].types[0];
        //alert(addressType);
        if (componentForm[addressType]) {
        var val = place.address_components[i][componentForm[addressType]];
        console.log(addressType+" *** "+val);
        if(addressType=='street_number')
            streetAddressStr = streetAddressStr + val;
        else if(addressType=='route')
            streetAddressStr = streetAddressStr + ' '+val;
        else if(addressType=='locality')
            currentSuburb.value = val;
        else if(addressType=='administrative_area_level_1')
            currentState.value = val;
        else if(addressType=='country')
            currentCountry.value = val;
        else if(addressType=='postal_code')
            currentPostcode.value = val;
        
        addressStr = addressStr + ' '+ val;
        }
    }
    console.log('text: ' + $('.txtHomeAddress').val());

    currentStreetAddress.value = '';
    var actualAddress = $('.txtHomeAddress').val().toUpperCase();

    if(actualAddress.indexOf(streetAddressStr.toUpperCase()) > 0)
    {
        var matchingIndex = actualAddress.indexOf(streetAddressStr.toUpperCase());
        currentStreetAddress.value += actualAddress.substring(0, matchingIndex);
    }

    currentStreetAddress.value += streetAddressStr;
    console.log('addressStr: '+addressStr);
    console.log('streetAdd: '+currentStreetAddress.value + ' suburb: '+currentSuburb.value+' state: '+currentState.value+' postcode: '+currentPostcode.value+' country: '+currentCountry.value);

    var geocoder = new google.maps.Geocoder;
    geocoder.geocode({'address': addressStr}, function(results, status) {
        if(status === 'OK') 
        {
            if(results[0])
            {
                currentLatitude.value = results[0].geometry.location.lat();
                currentLongitude.value = results[0].geometry.location.lng(); 
                console.log('LatLng: '+currentLatitude.value+' *** '+currentLongitude.value);          
            }
        }else
        {
        
        }
    });
}

function getLatLonFromAddress(address) 
{
    var geocoder = new google.maps.Geocoder;
    geocoder.geocode({'address': address}, function(results, status) {
        if(status === 'OK') 
        {
            if(results[0])
            {
                document.getElementById("{!$Component.theForm.currentLatitude}").value = results[0].geometry.location.lat();
                document.getElementById("{!$Component.theForm.currentLongitude}").value = results[0].geometry.location.lng();          
            }
        }
    });
}

$(document).ready(
    function()
    {
        $('[data-toggle="tooltip"]').tooltip();
        
        if('{!formType}' == 'docs' || '{!formType}' == 'assessment' || '{!formType}' == 'signing')
        {
            if('{!sectionType}' == 'id')
            {
                $('.docs-id-title').addClass('font-weight-bold');
                $('.docs-id-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'bank')
            {
                $('.docs-bank-title').addClass('font-weight-bold');
                $('.docs-bank-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'mygov')
            {
                $('.docs-mygov-title').addClass('font-weight-bold');
                $('.docs-mygov-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'equifax')
            {
                $('.docs-equifax-title').addClass('font-weight-bold');
                $('.docs-equifax-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'referees')
            {
                $('.docs-referees-title').addClass('font-weight-bold');
                $('.docs-referees-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'ro')
            {
                $('.docs-ro-title').addClass('font-weight-bold');
                $('.docs-ro-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'credit')
            {
                $('.docs-credit-title').addClass('font-weight-bold');
                $('.docs-credit-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'sourcing')
            {
                $('.adding-prods-title').addClass('font-weight-bold');
                $('.adding-prods-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'sign')
            {
                $('.signing-docs-title').addClass('font-weight-bold');
                $('.signing-docs-title').css('border-bottom','4px solid #0275d8');
            }
            else if('{!sectionType}' == 'confirmation')
            {
                $('.docs-confirmation-title').addClass('font-weight-bold');
                $('.docs-confirmation-title').css('border-bottom','4px solid #0275d8');
            }
            $('.docs-confirmation').addClass('js-danger');
        }
        
        if('{!idAttached}' == 'true')
        {
            $('.docs-id').removeClass('js-active');
            $('.docs-id').addClass('js-success');
        }else
        {
            $('.docs-id').removeClass('js-active');
            $('.docs-id').addClass('js-danger');
        }
        
        if('{!bankStatementAttached}' == 'true')
        {
            $('.docs-bank').removeClass('js-active');
            $('.docs-bank').addClass('js-success');
        }else
        {
            $('.docs-bank').removeClass('js-active');
            $('.docs-bank').addClass('js-danger');
        }
        
        if('{!myGovAttached}' == 'true')
        {
            $('.docs-mygov').removeClass('js-active');
            $('.docs-mygov').addClass('js-success');
        }else
        {
            $('.docs-mygov').removeClass('js-active');
            $('.docs-mygov').addClass('js-danger');
        }
        
        if('{!equifaxAttached}' == 'true')
        {
            $('.docs-equifax').removeClass('js-active');
            $('.docs-equifax').addClass('js-success');
        }else
        {
            $('.docs-equifax').removeClass('js-active');
            $('.docs-equifax').addClass('js-danger');
        }
        
        if('{!Account.CAM_Equifax__c}' == 'true')
        {
            $('.assess-equifax').removeClass('js-active');
            $('.assess-equifax').addClass('js-success');
        }else
        {
            $('.assess-equifax').removeClass('js-active');
            $('.assess-equifax').addClass('js-danger');
        }
        
        if('{!Account.CAM_Expense__c}' == 'true')
        {
            $('.assess-bank').removeClass('js-active');
            $('.assess-bank').addClass('js-success');
        }else
        {
            $('.assess-bank').removeClass('js-active');
            $('.assess-bank').addClass('js-danger');
        }
        
        if('{!Account.CAM_Basic__c}' == 'true')
        {
            $('.assess-id').removeClass('js-active');
            $('.assess-id').addClass('js-success');
        }else
        {
            $('.assess-id').removeClass('js-active');
            $('.assess-id').addClass('js-danger');
        }
        
        if('{!currentApprovalStatus}' == 'Approved')
        {
            $('.assess-credit').removeClass('js-active');
            $('.assess-credit').addClass('js-success');
        }else
        {
            $('.assess-credit').removeClass('js-active');
            $('.assess-credit').addClass('js-danger');
        }

        if(parseInt('{!refereesContacted}') >= parseInt('{!creditMinTotalReferees}'))
        {
            $('.docs-referees').removeClass('js-active');
            $('.docs-referees').addClass('js-success');
        }else
        {
            $('.docs-referees').removeClass('js-active');
            $('.docs-referees').addClass('js-danger');
        }
        
        if('{!isProductsAddedForAgreement}' == 'true')
        {
            $('.adding-prods').removeClass('js-active');
            $('.adding-prods').addClass('js-success');
        }else
        {
            $('.adding-prods').removeClass('js-active');
            $('.adding-prods').addClass('js-danger');
        }
        
        if('{!allDocsSigned}' == 'true')
        {
            $('.signing-docs').removeClass('js-active');
            $('.signing-docs').addClass('js-success');
        }else
        {
            $('.signing-docs').removeClass('js-active');
            $('.signing-docs').addClass('js-danger');
        }
        
        if('{!isROFilled}' == 'true')
        {
            $('.docs-ro').removeClass('js-active');
            $('.docs-ro').addClass('js-success');
        }else
        {
            $('.docs-ro').removeClass('js-active');
            $('.docs-ro').addClass('js-danger');
        }
        
        if('{!sectionType}' == 'ro' && '{!formType}' == 'assessment')
        {
            changeProductDropDowns();
        }
        
        if('{!sectionType}' == 'bank' && '{!formType}' == 'assessment')
        {
            initializeExpenseDropdowns();

            //Loan
            document.getElementById("MogoLoanRadio").addEventListener("click", function(){
            $(".loanAmount").val(''+$('#MogoLoan').html().substring(1));
            });
            document.getElementById("CRMLoanRadio").addEventListener("click", function(){
            $(".loanAmount").val('{!Account.Loan_Payments__c}');
            $('#MogoLoan').html('$'+''+'{!mogoLoan}');
            });

            //Rent
            document.getElementById("MogoRentRadio").addEventListener("click", function(){
            $(".rentAmount").val(''+$('#MogoRent').html().substring(1));
            });
            document.getElementById("CRMRentRadio").addEventListener("click", function(){
            $(".rentAmount").val('{!Account.Rent_Mortgage_Board__c}');
            $('#MogoRent').html('$'+''+'{!mogoRent}');
            });

            //Clothing
            document.getElementById("MogoClothingRadio").addEventListener("click", function(){
            $(".clothingAmount").val(''+$('#MogoClothing').html().substring(1));
            });
            document.getElementById("CRMClothingRadio").addEventListener("click", function(){
            $(".clothingAmount").val('{!Account.Clothing__c}');
            $('#MogoClothing').html('$'+'{!mogoClothing}');
            });

            //Utilities
            document.getElementById("MogoUtilitiesRadio").addEventListener("click", function(){
            $(".utilitiesAmount").val(''+$('#MogoUtilities').html().substring(1));
            });
            document.getElementById("CRMUtilitiesRadio").addEventListener("click", function(){
            $(".utilitiesAmount").val('{!Account.Utilities__c}');
            $('#MogoUtilities').html('$'+'{!mogoUtilities}');
            });

            //Tobacco
            document.getElementById("MogoTobaccoRadio").addEventListener("click", function(){
            $(".tobaccoAmount").val(''+$('#MogoTobacco').html().substring(1));
            });
            document.getElementById("CRMTobaccoRadio").addEventListener("click", function(){
            $(".tobaccoAmount").val('{!Account.Tobacco_Alcohol__c}');
            $('#MogoTobacco').html('$'+'{!mogoTobacco}');
            });

            //Credit Card
            document.getElementById("MogoCreditRadio").addEventListener("click", function(){
            $(".creditAmount").val(''+$('#MogoCredit').html().substring(1));
            });
            document.getElementById("CRMCreditRadio").addEventListener("click", function(){
            $(".creditAmount").val('{!Account.Credit_Card__c}');
            $('#MogoCreditCard').html('$'+'{!mogoCredit}');
            });

            //Insurance
            document.getElementById("MogoInsuranceRadio").addEventListener("click", function(){
            $(".insuranceAmount").val(''+$('#MogoInsurance').html().substring(1));
            });
            document.getElementById("CRMInsuranceRadio").addEventListener("click", function(){
            $(".insuranceAmount").val('{!Account.Insurance__c}');
            $('#MogoInsurance').html('$'+'{!mogoInsurance}');
            });

            //Mobile
            document.getElementById("MogoMobileRadio").addEventListener("click", function(){
            $(".mobileAmount").val(''+$('#MogoMobile').html().substring(1));
            });
            document.getElementById("CRMMobileRadio").addEventListener("click", function(){
            $(".mobileAmount").val('{!Account.Mobile_Expenses__c}');
            $('#MogoMobile').html('$'+'{!mogoMobile}');
            });

            //Food
            document.getElementById("MogoHouseholdRadio").addEventListener("click", function(){
            $(".householdAmount").val(''+$('#MogoHousehold').html().substring(1));
            });
            document.getElementById("CRMHouseholdRadio").addEventListener("click", function(){
            $(".householdAmount").val('{!Account.Food__c}');
            $('#MogoHousehold').html('$'+'{!mogoHousehold}');
            });

            //Car
            document.getElementById("MogoCarRadio").addEventListener("click", function(){
            $(".carAmount").val(''+$('#MogoCar').html().substring(1));
            });
            document.getElementById("CRMCarRadio").addEventListener("click", function(){
            $(".carAmount").val('{!Account.Car_Lease_Loan_Payment__c}');
            $('#MogoCar').html('$'+'{!mogoCar}');
            });

            //Other
            document.getElementById("MogoOtherRadio").addEventListener("click", function(){
            $(".otherAmount").val(''+$('#MogoOther').html().substring(1));
            });
            document.getElementById("CRMOtherRadio").addEventListener("click", function(){
            $(".otherAmount").val('{!Account.OtherOutgoings__c}');
            $('#MogoOther').html('$'+'{!mogoOtherTotal}');
            });
            
            if('{!stateMasterState}' != 'NZ' && ('{!Account.CAM_Expense__c}' == 'false' || '{!otherRentalCompanyDetails}' == '' || '{!otherRentalCompanyDetails}'.length < 10)){
                swal({
                  position: 'top',
                  title: "IMPORTANT REMINDER!!!",
                  text: "Ensure ALL fortnightly consumer lease repayments are included in the application, even those to other rental companies. New rules require it or your lease could be void.",
                  type: "warning",
                  confirmButtonText: "Cool"
                }); 
            }           
        }
    }
);

function changeExpenseDropdownsNew(expenseType,changeType)
{
    var amountSelector = '';
    var divToShowSelector = '';
    var divToHideSelector = '';
    var dropDownSelector = '';
    var existingDetailsSelector = '';
    var editButtonSelector = '';
    var existingDetails = '';
    var detailsMatchingLength = 0;
    var dropDownId = '';
    var currentEditDisplay = '';
    
    console.log('expenseType ' + expenseType);
    
    amountSelector = ('.' + expenseType + 'Amount');
    existingDetailsSelector = ('.' + expenseType + 'DetailsHidden');
    
    console.log('amountSelector ' + amountSelector);
    console.log('existingDetailsSelector ' + existingDetailsSelector);
    
    if(isNaN(parseFloat($(amountSelector).val())) || parseFloat($(amountSelector).val()) == 0)
    {
        divToHideSelector = ('#' + expenseType + 'DropDownDiv');
        divToShowSelector = ('#' + expenseType + '0DropDownDiv');
        dropDownId = expenseType + '0DropDown';
        dropDownSelector = '#' + dropDownId;
        editButtonSelector = '#' + expenseType + 'EditButton';    
    }else
    {
        divToHideSelector = ('#' + expenseType + '0DropDownDiv');
        divToShowSelector = ('#' + expenseType + 'DropDownDiv');
        dropDownId = '' + expenseType + 'DropDown';
        dropDownSelector = '#' + dropDownId;
        editButtonSelector = '#' + expenseType + 'EditButton'; 
    }
    
    console.log('divToHideSelector ' + divToHideSelector);
    console.log('divToShowSelector ' + divToShowSelector);
    console.log('dropDownId ' + dropDownId);
    console.log('editButtonSelector ' + editButtonSelector);
    
    currentEditDisplay = $(editButtonSelector).css('display');
    
    $(divToShowSelector).css('display','');
    $(divToHideSelector).css('display','none');
    $(editButtonSelector).css('display','none');
    
    existingDetails = $(existingDetailsSelector).val();
    existingDetails = existingDetails.replace(/[\r\n]/g, '. ');
    console.log('existingDetails ' + existingDetails);
    
    if(window.changeExpensesMethodCalledCount == 0)
    {
        if(expenseType == 'other' && divToShowSelector == '#other0DropDownDiv')
        {
            $(dropDownSelector).val(existingDetails);
        }else{
            var sel = document.getElementById(dropDownId);
            for(var i = 0; i < sel.options.length; i++)
            {
                if(existingDetails == sel.options[i].value)
                {
                    detailsMatchingLength++;
                }
            }
            if(detailsMatchingLength > 0){
                console.log('This option exists');
                if(existingDetails == 'Other')
                {
                    $(dropDownSelector).val('None');    
                }else{
                    $(dropDownSelector).val(existingDetails);
                }
            }else{
                console.log('This option does not exists');
                
                if(existingDetails.startsWith('Other - '))
                {
                    var label = '' + existingDetails.slice(0,50);
                    if(existingDetails.length > 50)
                    {
                        label += '....';
                    } 
                    
                    $(dropDownSelector).append('<option value="' + existingDetails + '">' + label + '</option>');
                    $(dropDownSelector).val(existingDetails);
                    $(editButtonSelector).css('display','');
                }else{
                    $(dropDownSelector).val('None');
                }    
            }
        }
    }else{
        if($(dropDownSelector).val().startsWith('Other'))
        {
            if($(dropDownSelector).val() == 'Other')
            {
                $(existingDetailsSelector).val('');
                
                /*
                if(dropDownId != 'other0DropDown')
                {
                    var sel = document.getElementById(dropDownId);
                    
                    for(var i = 0; i < sel.options.length; i++)
                    {
                        if(sel.options[i].value.startsWith('Other -'))
                        {
                            var removeSelector = dropDownSelector + ' option:gt(' + (i-1) + ')';
                            $(removeSelector).remove();
                        }
                    }
                }
                */
            }else{
                $(existingDetailsSelector).val($(dropDownSelector).val());
            }
            
            console.log('******display ' + $(editButtonSelector).css('display') + '****');
            
            if((currentEditDisplay == 'none' && !$(dropDownSelector).val().startsWith('Other -')) || changeType == 'dropdown')
            {
                editOtherComments(expenseType);
            }
            
            $(editButtonSelector).css('display','');
        }else{
            $(existingDetailsSelector).val($(dropDownSelector).val());
            $(editButtonSelector).css('display','none');
        }
        
    }

}

function initializeExpenseDropdowns()
{
    if('{!sectionType}' == 'bank' && '{!formType}' == 'assessment')
    {
        changeExpenseDropdownsNew('rent');
        changeExpenseDropdownsNew('loan');
        changeExpenseDropdownsNew('credit');
        changeExpenseDropdownsNew('insurance');
        changeExpenseDropdownsNew('centrepay');
        changeExpenseDropdownsNew('household');
        changeExpenseDropdownsNew('utilities');
        changeExpenseDropdownsNew('car');
        changeExpenseDropdownsNew('mobile');
        changeExpenseDropdownsNew('clothing');
        changeExpenseDropdownsNew('tobacco');
        changeExpenseDropdownsNew('other');
        
        window.changeExpensesMethodCalledCount++; 
    }
}

function validateExpenses()
{
    $('#rentDropDown').css('border','');
    $('#rent0DropDown').css('border','');
    $('#loanDropDown').css('border','');
    $('#loan0DropDown').css('border','');
    $('#creditDropDown').css('border','');
    $('#credit0DropDown').css('border','');
    $('#householdDropDown').css('border','');
    $('#household0DropDown').css('border','');
    $('#clothingDropDown').css('border','');
    $('#clothing0DropDown').css('border','');
    $('#utilitiesDropDown').css('border','');
    $('#utilities0DropDown').css('border','');
    $('#mobileDropDown').css('border','');
    $('#mobile0DropDown').css('border','');
    $('#carDropDown').css('border','');
    $('#car0DropDown').css('border','');
    $('#tobaccoDropDown').css('border','');
    $('#tobacco0DropDown').css('border','');
    $('#insuranceDropDown').css('border','');
    $('#insurance0DropDown').css('border','');
    $('#otherDropDown').css('border','');
    $('#other0DropDown').css('border','');
    $('#centrepayDropDown').css('border','');
    $('#centrepay0DropDown').css('border','');

    if($('.rentDetailsHidden').val() == 'None' || $('.rentDetailsHidden').val() == ''){
        
        swal({
          position: 'top',  
          title: "Warning!",
          text: 'Please Enter Rent/Mortgage/Board Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".rentAmount").offset().top
                }, 1000);
                $('#rentDropDown').css('border','3px solid red');
              $('#rent0DropDown').css('border','3px solid red');
          }
        });
        
        
        return false;   
    }
    if($('.loanDetailsHidden').val() == 'None' || $('.loanDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Loan Payments Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".loanAmount").offset().top
                }, 1000);
                $('#loanDropDown').css('border','3px solid red');
              $('#loan0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if($('.creditDetailsHidden').val() == 'None' || $('.creditDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Credit Card Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".creditAmount").offset().top
                }, 1000);
                $('#creditDropDown').css('border','3px solid red');
              $('#credit0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if($('.householdDetailsHidden').val() == 'None' || $('.householdDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Household Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".householdAmount").offset().top
                }, 1000);
                $('#householdDropDown').css('border','3px solid red');
              $('#household0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if($('.clothingDetailsHidden').val() == 'None' || $('.clothingDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Clothing Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".clothingAmount").offset().top
                }, 1000);
                $('#clothingDropDown').css('border','3px solid red');
              $('#clothing0DropDown').css('border','3px solid red');
          }
        });
        console.log($('#clothingDropDown').val());
        console.log($('#clothing0DropDown').val());
        return false;    
    }
    if($('.utilitiesDetailsHidden').val() == 'None' || $('.utilitiesDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Utilities Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".utilitiesAmount").offset().top
                }, 1000);
                $('#utilitiesDropDown').css('border','3px solid red');
              $('#utilities0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if($('.mobileDetailsHidden').val() == 'None' || $('.mobileDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Mobile Expenses Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".mobileAmount").offset().top
                }, 1000);
                $('#mobileDropDown').css('border','3px solid red');
              $('#mobile0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if( $('.carDetailsHidden').val() == 'None' || $('.carDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Car/Petrol/Maintenance/Travel Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".carAmount").offset().top
                }, 1000);
                $('#carDropDown').css('border','3px solid red');
              $('#car0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if( $('.tobaccoDetailsHidden').val() == 'None' || $('.tobaccoDetailsHidden').val() == '' ){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Tobacco / Alcohol Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".tobaccoAmount").offset().top
                }, 1000);
                
              $('#tobaccoDropDown').css('border','3px solid red');
              $('#tobacco0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
        if( $('.insuranceDetailsHidden').val() == 'None' || $('.insuranceDetailsHidden').val() == '' ){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please Enter Insurance Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".insuranceAmount").offset().top
                }, 1000);
                $('#insuranceDropDown').css('border','3px solid red');
              $('#insurance0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
    if($('.otherDetailsHidden').val() == 'None' || $('.otherDetailsHidden').val() == ''){
        swal({
          position: 'top',
          title: "Warning!",
          text: 'Please enter Other Expenses Details',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(".otherAmount").offset().top
                }, 1000);
                $('#otherDropDown').css('border','3px solid red');
              $('#other0DropDown').css('border','3px solid red');
          }
        });
        return false;    
    }
}

function editOtherComments(expenseType)
{
    var title = '' + expenseType.charAt(0).toUpperCase() + expenseType.slice(1);
    if(expenseType == 'credit')
    {
        title += ' Card';    
    }
    title += ' Comments';
    
    var existingDetailsSelector =  '.' + expenseType + 'DetailsHidden';
    var existingDetails = $(existingDetailsSelector).val();
    var dropDownToUpdateSelector = '';
    var dropDownToUpdate = '';
    
    var tempSelector = '#' + expenseType + 'DropDownDiv';
    
    if($(tempSelector).css('display') == 'none'){
        dropDownToUpdateSelector = '#' + expenseType + '0DropDown';
        dropDownToUpdate = expenseType + '0DropDown';
    }else{
        dropDownToUpdateSelector = '#' + expenseType + 'DropDown';
        dropDownToUpdate = expenseType + 'DropDown';
    }
    
    if(existingDetails.startsWith('Other - '))
    {
        existingDetails = existingDetails.substring(8);
    }
    
    console.log('title ' + title);
    console.log('existingDetailsSelector ' + existingDetailsSelector);
    console.log('existingDetails ' + existingDetails);
    console.log('dropDownToUpdate ' + dropDownToUpdate);
    console.log('dropDownToUpdateSelector ' + dropDownToUpdateSelector);
    
    swal({
      title: title,
      input: "textarea",
      inputPlaceholder: 'Enter comments here...',
      inputValue: existingDetails,
      showCancelButton: true,
      cancelButtonText: 'Cancel',
      confirmButtonText: "Save",
      position: "top-start",
      backdrop: false,
      inputValidator: function(value) { 
        return new Promise(function(resolve, reject) {
          if (value != '' && value != null) {
            var inputText = 'Other - ' + value.replace(/[\r\n]/g, '. ');
            var sel = document.getElementById(dropDownToUpdate);
            
            for(var i = 0; i < sel.options.length; i++)
            {
                if(sel.options[i].value.startsWith('Other -'))
                {
                    var removeSelector = dropDownToUpdateSelector + ' option:gt(' + (i-1) + ')';
                    $(removeSelector).remove();
                    console.log('removeSelector ' + removeSelector);
                }
            }
            
            var label = '' + inputText.slice(0,50);
            if(inputText.length > 50)
            {
                label += '....';
            }      
            
            /*    
            for(var i = 0; i < sel.options.length; i++)
            {
                if(inputText.startsWith(sel.options[i].value) && sel.options[i].value != 'Other')
                {
                    var removeSelector = dropDownToUpdateSelector + ' option:gt(' + (i-1) + ')';
                    $(removeSelector).remove();
                    console.log('removeSelector ' + removeSelector);
                }
            }
            */

            $(dropDownToUpdateSelector).append('<option value="' + inputText + '">' + label + '</option>');
            $(existingDetailsSelector).val(inputText);
            $(dropDownToUpdateSelector).val(inputText);
          }
          swal.closeModal();
        });
      }
    });
}

function toggleExpenseRows(expenseType,elem)
{
    $('.expenseButtonGroups').removeClass('btn-success');
    $('.expenseButtonGroups').addClass('btn-primary');
    $('.expenseRows').css('display','none');
    
    if(!$(elem).hasClass('btn-success'))
    {
        $(elem).addClass('btn-success');
        $('.' + expenseType + 'ExpenseRows').css('display','');
    }
}

function toggleIncomeGroups(elem)
{
    $('.incomeStatementButtonGroups').removeClass('btn-success');
    $('.incomeStatementButtonGroups').addClass('btn-primary');
    $('.incomeStatements').css('display','none');
    $('.incomeStatementButtons').css('display','');
    
    if(!$(elem).hasClass('btn-success'))
    {
        $(elem).addClass('btn-success');
        if($(elem).hasClass('quickRental'))
        {
            $('.quickRentalStatement').css('display','');
            $('.incomeStatementButtons').css('display','none');
        }else
        {
            $('.quickRentalStatement').css('display','none');
        }
    }
}

function toggleIncomeStatements(statementId)
{
    var classSelector = '.' + statementId;
    var btnclassSelector = '.btn.' + statementId;
    $('.incomeStatements').css('display','none');
    $(classSelector).css('display',''); 

    $('.incomeStatementButtons').removeClass('btn-success');
    $('.incomeStatementButtons').addClass('btn-info');

    $(btnclassSelector).removeClass('btn-info');
    $(btnclassSelector).addClass('btn-success'); 
}

function savingMessage(elem,accordionType,nextFormType,nextSectionType)
{
    if('{!sectionType}' == 'bank' && '{!formType}' == 'assessment'){
        if($('.otherRentalCompanyAmount').val() == '' || isNaN($('.otherRentalCompanyAmount').val()) || parseFloat($('.otherRentalCompanyAmount').val()) <= 0){
            if(parseFloat('{!mygovRentalsAmt}') > 0 && ($('.otherRentalCompanyDetails').val() == '' || $('.otherRentalCompanyDetails').val().length < 10)){
                swal({
                  position: 'top',
                  title: "Error!",
                  text: 'We have noticed that there are some rental company deductions from mygov. Please enter a proper explanation for Other Rental Company Details',
                  type: "warning",
                  confirmButtonText: "Cool"
                });
                return false;    
            }
        }
        if($('.otherRentalCompanyDetails').val() == '' || $('.otherRentalCompanyDetails').val().length < 10){
            swal({
              position: 'top',
              title: "Error!",
              text: 'Please enter a proper explanation for Other Rental Company Details',
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
    }
    
    if(nextFormType == '')
    {
        $(elem).css('display','');
        setTimeout(function(){ $(elem).css('display','none'); }, 5000);
    }
    updateAccountFunc(accordionType,nextFormType,nextSectionType);
}

function doSearchForProducts() {
//alert($(".prodCategory").val());
$('.addBlackFont').css("color", "#000000");
$('.prodCriteria').text('Select product from the list');
searchServerForProducts(
  $(".prodCategory").val()
  );
}

function clickElemForProduct(elem){
    $('tr').removeClass('ui-state-highlight');
    $(elem).addClass('ui-state-highlight');
    $(".prodCategory").val($(elem).find(".pname").text());
    $(".prodCriteria").text($(elem).find(".pCategory").text());
    $(".prodCriteriaHidden").val($(elem).find(".pCategory").text());
    $('.addBlackFont').css("color", "#000000");
    hideSearchListForProducts();
}

function checkRentalLimit(){
    var errorMsg = '';
    if('{!territoryNo}' == '704' || '{!territoryNo}' == '706' || '{!territoryNo}' == '707'){
        errorMsg = 'You cannot proceed with this agreement';
    }
    /*
    else if('{!stateMasterState}' != 'NZ'){
        var totalIncomeAmt = parseFloat('{!totalIncomeAmt}');
        var totalRentalsAmt = parseFloat('{!totalRentalsAmt}');
        var currentSchedAmt;
        if(isNaN($('.txtRent').val())){
            currentSchedAmt = 0;
        }else{
            currentSchedAmt = parseFloat($('.txtRent').val());
        }
        console.log('totalIncomeAmt : ' + totalIncomeAmt);
        console.log('totalRentalsAmt : ' + totalRentalsAmt);
        console.log('currentSchedAmt : ' + currentSchedAmt);
        
        if((totalRentalsAmt + currentSchedAmt)  > (totalIncomeAmt * 0.1)){
            if(totalRentalsAmt > (totalIncomeAmt * 0.1)){
                errorMsg = 'Rental Payments exceed 10% of the total income. You cannot proceed with this agreement';
            }else if(((totalIncomeAmt * 0.1) - totalRentalsAmt) > 0){
                errorMsg = 'Rental Payments exceed 10% of the total income. FN Scheduled Amount cannot be more than $' + Math.floor((totalIncomeAmt * 0.1) - totalRentalsAmt);
            }
        }
    }
    */
    console.log('errorMsg : ' + errorMsg);
    return errorMsg;
}

$(".extrabuttonCM").click(
    function()
    {
        var rentalErrorMsg = checkRentalLimit();
        if(rentalErrorMsg != ''){
            swal({
              position: 'top',
              title: "Error!",
              text: rentalErrorMsg,
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if('{!dobVal}' == '' || '{!dobVal}' == 'null')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Please go to the Id section and enter DOB before checking RAM Assistance",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(parseFloat('{!ageVal}') < 18)
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "No product can be serviced as the Applicant is less than 18 years old",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        var equifaxScore= "{!Account.Score_of_Equifax__c}";
        var defaultRental="{!Account.Equifax_No_of_Unpaid_Default_Rental__c}";
        var defaultNonRental="{!Account.Equifax_No_of_Unpaid_Default_NonRental__c}";
        var rentalCount = "{!equifaxRentalCount}"; //variable that stores rental count from the list
        var nonRentalCount ="{!equifaxNonRentalCount}"; ////variable that stores non-rental count from the list
        
        console.log('defaultRental : ' + defaultRental);
        console.log('defaultNonRental : ' + defaultNonRental);
        console.log('rentalCount : ' + rentalCount);
        console.log('nonRentalCount : ' + nonRentalCount);
        
        var message = "Enter the following fields: \n";
        
        if(equifaxScore == "")
        {
            message += "Equifax Score \n";
        }
        if(defaultRental == "" || parseInt(defaultRental) != parseInt(rentalCount))
        {
            message += "Unpaid Default Rental \n";
        }
        if(defaultNonRental == "" || parseInt(defaultNonRental) != parseInt(nonRentalCount))
        {
            message += "Unpaid Default Non-Rental \n";
        }
        if(message != "Enter the following fields: \n")
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: message,
              type: "warning",
              confirmButtonText: "Cool"
            });
            
            //call functions to set booleans
            setEquifaxBoolean();                        
            return false;
        }
        
        swal({
          position: 'top',
          title: "Success!",
          text: "A new agreement has been created",
          type: "success",
          confirmButtonText: "Cool"
        });

    }
);
/////////////////////////////////////////////////

$(".nextbuttonCM").click(function() {
    var rentalErrorMsg = checkRentalLimit();
    if(rentalErrorMsg != ''){
        swal({
          position: 'top',
          title: "Error!",
          text: rentalErrorMsg,
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if('{!dobVal}' == '' || '{!dobVal}' == 'null')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Please go to the Id section and enter DOB before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if(parseFloat('{!ageVal}') < 18)
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "No product can be serviced as the Applicant is less than 18 years old",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    var prodCriteria = $('.prodCriteria').text();
    var prodName = $('.prodName').val();
    var checkedCriteriaforCM="{!checkedCriteriaforCM}";
    
    var redAny = "{!redAny}";
    var redDishonours = "{!redDishonours}";
    var redGambling = "{!redGambling}";
    var redCollectionConsolidation = "{!redCollectionConsolidation}";
    var redOverdrawn = "{!redOverdrawn}";
    var redNonRentalDefault = "{!redNonRentalDefault}";
    var redRentalDefault = "{!redRentalDefault}";
    var redBankruptcy = "{!redBankruptcy}";
    var redEquifaxScore = "{!redEquifaxScore}";
    var redJobseeker = "{!redJobseeker}";
    var redDebtRatio = "{!redDebtRatio}";
    var redServiceability = "{!redServiceability}";
    var redNoOfMissedPayments = "{!redNoOfMissedPayments}";
    var redScheduledAmount = "{!redScheduledAmount}";
    
    var CM_DishonourComments = $('.CM_DishonourComments').val();
    var CM_GamblingComments = $('.CM_GamblingComments').val();
    var CM_CollectionComments = $('.CM_CollectionComments').val();
    var CM_OverdrawnComments = $('.CM_OverdrawnComments').val();
    var CM_JobseekerComments = $('.CM_JobseekerComments').val();
    var debtRatioComments = $('.debtRatioComments').val();
    var defaultRentalComments = $('.defaultRentalComments').val();
    var defaultNonRentalComments = $('.defaultNonRentalComments').val();
    var equifaxScoreComments = $('.equifaxScoreComments').val();
    var bankruptcyComments = $('.bankruptcyComments').val();
    var noOfMissedPaymentsComments = $('.noOfMissedPaymentsComments').val();
    var serviceabilityComments = $('.serviceabilityComments').val();
    var scheduledAmountComments = $('.scheduledAmountComments').val();
    
    var ramTerm = $('.ddlTerm').val();
    
    if(prodCriteria=='Select product from the list' || prodCriteria=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Check RAM Assistance before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    else if(prodName=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Product Name (Agreement) before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    else if(checkedCriteriaforCM!='true')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Check RAM Assistance before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }else if(window.cmCommentsChanged == 'yes')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Check RAM Assistance before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }else if((ramTerm != '24' && ramTerm != '36') && '{!Account.Territory_Number__r.State_Master_State__c}' == 'NZ')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Term can only be 24 or 36 months",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if(redAny == 'true'){
        if(redDishonours=='true' && CM_DishonourComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Number of Dishonours comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redGambling=='true' && CM_GamblingComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Gambling comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redCollectionConsolidation=='true' && CM_CollectionComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Number of Collection & Consolidation comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redOverdrawn=='true' && CM_OverdrawnComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Overdrawn comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redNonRentalDefault=='true' && defaultNonRentalComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Non Rental Default comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redRentalDefault=='true' && defaultRentalComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Rental Default comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redBankruptcy=='true' && bankruptcyComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Bankruptcy comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redEquifaxScore=='true' && equifaxScoreComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Equifax score comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redJobseeker=='true' && CM_JobseekerComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Jobseeker comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redDebtRatio=='true' && debtRatioComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add Debt Ratio comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redServiceability=='true' && serviceabilityComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add serviceability comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redNoOfMissedPayments=='true' && noOfMissedPaymentsComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add No. of Payments Missed comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
        if(redScheduledAmount=='true' && scheduledAmountComments=='')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Add FN Scheduled Amount comments before submitting",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
    }
});

$(".miscbuttonCM").click(function() {
    var rentalErrorMsg = checkRentalLimit();
    if(rentalErrorMsg != ''){
        swal({
          position: 'top',
          title: "Error!",
          text: rentalErrorMsg,
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if('{!dobVal}' == '' || '{!dobVal}' == 'null')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Please go to the Id section and enter DOB before checking RAM Assistance",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if(parseFloat('{!ageVal}') < 18)
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "No product can be serviced as the Applicant is less than 18 years old",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    ////added by mohit
    var defaultRentalTextBoxShown = "{!showDefaultRental}"; //boolean variable whether rental text box is displayed 
    var defaultNonRentalTextBoxShown = "{!showDefaultNonRental}"; //boolean variable whther non-rental text box is displayed 
    
    var message = "Go back to the equifax page and add details of \n"; //message string variable to display in the pop-up
    var rentalCount = "{!equifaxRentalCount}"; //variable that stores rental count from the list
    var nonRentalCount ="{!equifaxNonRentalCount}"; ////variable that stores non-rental count from the list
    
    var rentalInputValue=$(".defaultRentalInput").val();
    var nonRentalInputValue=$(".defaultNonRentalInput").val();
    
    //alert('nonRentalInputValue: '+nonRentalInputValue+'   nonRentalCount: '+nonRentalCount);
    
    //below if conditionals check whether the text boxes are displayed or not 
    //they also check whether the values entered in the text box are different to the ones mentioned in the list size.
    if((defaultRentalTextBoxShown=="true" && defaultNonRentalTextBoxShown=="true") && (rentalInputValue != rentalCount && nonRentalInputValue != nonRentalCount))
    {
        swal({
              position: 'top',
              title: "Warning!",
              text: "Go back to the Equifax section and add Rental and Non-Rental Defaults",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;        
    }
    else if(defaultRentalTextBoxShown=="true" && rentalInputValue != rentalCount)
    {
        swal({
              position: 'top',
              title: "Warning!",
              text: "Go back to the Equifax section and add Rental Defaults",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;        
    }
    else if(defaultNonRentalTextBoxShown=="true" && nonRentalInputValue != nonRentalCount)
    {
        swal({
              position: 'top',
              title: "Warning!",
              text: "Go back to the Equifax section and add Non-Rental Defaults",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;        
    }
    /////////////////////////////////////////////////////////////////////////////////
       
    var prodCriteria = $('.prodCriteria').text();
    
    if(prodCriteria=='Select product from the list' || prodCriteria=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Select a product from the product list to check RAM Assistance",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    //alert('{!criteriaType}');
    
    if('{!Account.AgreementId_for_Current_Enquiry__c}'.trim() == '' || '{!Account.AgreementId_for_Current_Enquiry__c}'.trim() == 'null')
    {
        checkCriteriaBeforeCreatingAgreement(); 
    }else{
        checkCriteriaAndCreateAgreement(); 
    }
});

function changeCOGS(elem)
{
    $('.addBlackFont').css("color", "#000000");
    //alert($(elem).val());
    var term=$(".ddlTerm").val();
    var cost=$(".txtCostOfGoods").val();
    var rrp=$(".txtRRP").val();
    var deliveryFee = $(".txtDeliveryFee").val();
    var prodCat = $(".prodCategory").val();  
    var rent=0;
    var tav=0;
    cost=cost.replace(/\,/g,'');
    rrp=rrp.replace(/\,/g,'');
    deliveryFee=deliveryFee.replace(/\,/g,'');
    if(isNaN(deliveryFee) || deliveryFee==""){
        deliveryFee = 0;
    }
    if(isNaN(cost) || cost=="")
    {
        cost=0;
        $(".txtCostOfGoods").val('0');
        $(".txtRent").val('0');
        //$("#txtTAV").val('0');
    }
    var paymentFrequency = $('.paymentFrequency').val();
    if('{!Account.Territory_Number__r.State_Master_State__c}' == 'NZ')
    {
        var rrpTAVFactor = 1.550943;
        var newAAF = 0;
        var minTAV = 0;
        var rrpCalculatedTAV = 0;
        var tav = 0;
        var nzCOGS = 0;
        var slots = 1;
        rrp = parseFloat(rrp);
        
        if(isNaN(rrp) || rrp=="")
        {
            rrp = parseFloat(cost);
        }

        if(term=='24'){
            slots = 52;
            newAAF = 90 + (2.1 * 52 * 2) + 15;
            if(paymentFrequency=="Fortnightly")
            {
                rrpTAVFactor = 1.550943;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/slots).toFixed(2);
                rrpCalculatedTAV = (rent * slots).toFixed(2);
            }
            else if(paymentFrequency=="Weekly")
            {
                rrpTAVFactor = 1.546767;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/(slots*2)).toFixed(2);
                rrpCalculatedTAV = (rent * (slots*2)).toFixed(2);
            }
            
        }else if(term=='36'){
            slots = 78;
            newAAF = 90 + (2.1 * 52 * 3) + 15;
            if(paymentFrequency=="Fortnightly")
            {
                rrpTAVFactor = 1.873100;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/slots).toFixed(2);
                rrpCalculatedTAV = (rent * slots).toFixed(2);
            }
            else if(paymentFrequency=="Weekly")
            {
                rrpTAVFactor = 1.869269;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/(slots*2)).toFixed(2);
                rrpCalculatedTAV = (rent * (slots*2)).toFixed(2);
            }
        }
        console.log(rrp, rrpTAVFactor, newAAF, nzCOGS, rrpCalculatedTAV, rent);
    }else
    {        
        let apr_cashPrice = parseFloat(cost) + parseFloat(deliveryFee);
        console.log("apr_cashPrice: "+apr_cashPrice);
        var apr_fees = JSON.parse(aprUtil.getFees(apr_cashPrice,parseInt(term)));
        console.log("apr_fees: "+apr_fees);
        console.log("apr_fees.totalFees: "+apr_fees.totalFees);
        var result = JSON.parse(aprUtil.calculateAPR(apr_cashPrice, apr_fees.totalFees, parseInt(term) ,paymentFrequency));
        console.log("result: "+result);
        console.log("result: "+result.tav);
        console.log("result: "+result.rent);
        rrpCalculatedTAV = result.tav;
        tav = rrpCalculatedTAV;
        minTAV = rrpCalculatedTAV;
        rent = result.rent;
    }
    console.log('tav: '+tav+' rrpCalculatedTAV: '+rrpCalculatedTAV+' minTAV: '+minTAV+' rent: ' + rent);
    if(paymentFrequency == 'Weekly'){
        $(".txtRent").val((parseFloat(rent) * 2).toFixed(2));
    }else{
        $(".txtRent").val(parseFloat(rent).toFixed(2));
    }
    //$(".txtRent").val(Math.ceil(rent));
    //$(".txtTAV").val(minTAV.toFixed(2));
    //window.cmCommentsChanged = 'yes';
    $('.nextbuttonCM').css('display','none');  
}

function openCA()
{
    if('{!Account.Last_Collection_Activity__c}' != '' && '{!Account.Last_Collection_Activity__c}' != 'null' && '{!Account.Last_Collection_Activity__r.Collection_Outcome1__c}' == 'In Progress')
    {
        window.open('/apex/CollectionActivityPage?id={!Account.Last_Collection_Activity__c}','_blank');
    }else{
        alert('No Open Collection Activity');
    }
}

function getMatchData(match){
    $('tr').removeClass('ui-state-highlight');
    $(match).addClass('ui-state-highlight');
    
    var message = 'You have selected: ' + $(match).find(".matchFirstName").html().trim() + ' ' +$(match).find(".matchFamilyName").html().trim() + ' residing at ' + '\n' + $(match).find(".matchCurrentAddress").html().trim();
    $("p").text('You have selected: ' + $(match).find(".matchFirstName").html().trim() + ' ' +$(match).find(".matchFamilyName").html().trim() + ' residing at ' + $(match).find(".matchCurrentAddress").html().trim());

    var fileNumber = $(match).find(".matchBureauReference").html().trim();
    var gen = $(match).find(".matchGender").html().trim();
    var pmdob = $(match).find(".matchdob").html().trim();
    var lic = $(match).find(".matchLicense").html().trim();
    var currentAddress = $(match).find(".matchCurrentAddress").html().trim();
    
    var r = confirm(message + '.' + '\n' + 'Click OK to continue with Equifax Search.');
    if (r == true) {
        swal({
          position: 'top',
          title: "Success!",
          text: "All current Equifax Defaults will be overridden.",
          type: "success",
          confirmButtonText: "Cool"
        });
        
        if('{!stateMasterState}' == 'NZ'){
            getEquifaxPDFNZFunc();
        }else{
            possibleMatchSearchFunc(fileNumber,gen,lic,pmdob,currentAddress);
        }
    }    
}

function getPrimaryMatchData(match){
    $('tr').removeClass('ui-state-highlight');
    $(match).addClass('ui-state-highlight');
    $(".vedaNumber").val('' + $(match).find(".pmBureauReference").html().trim());
    $(".license").val('' + $(match).find(".pmLicense").html().trim());
    $(".gender").val('' + $(match).find(".pmGender").html().trim());
    $(".dob").val('' + $(match).find(".pmdob").html().trim());
    var message = 'You have selected: ' + $(match).find(".pmFirstName").html().trim() + ' ' +$(match).find(".pmFamilyName").html().trim() + ' residing at ' + '\n' + $(match).find(".pmCurrentAddress").html().trim();
    $("p").text('You have selected: ' + $(match).find(".pmFirstName").html().trim() + ' ' +$(match).find(".pmFamilyName").html().trim() + ' residing at ' + $(match).find(".pmCurrentAddress").html().trim());
    var r = confirm(message + '.' + '\n' + 'Click OK to continue with Equifax Search.');
    if (r == true) {
        if('{!stateMasterState}' == 'NZ'){
            getEquifaxPDFNZFunc();
        }else{
            primaryMatchSelectedFunc();
        }
    }
}

function miscbuttonApprovalFunc() {
    var reasonToGoAhead = $('.reasonToGoAhead').val();
    var ddlRepName=$('.ddlRepName').val();
    var rentalErrorMsg = checkRentalLimit();
    if(rentalErrorMsg != ''){
        swal({
          position: 'top',
          title: "Error!",
          text: rentalErrorMsg,
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if('{!dobVal}' == '' || '{!dobVal}' == 'null')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Please go to the Id section and enter DOB before submitting",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if(parseFloat('{!ageVal}') < 18)
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "No product can be serviced as the Applicant is less than 18 years old",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if(reasonToGoAhead=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter the reason to go ahead with the Application",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    if(ddlRepName=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter the Representative Name",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!showAnswersToCreditOfficerComments}' == 'true')
    {
        var answersToCreditOfficerComments = $('.answersToCreditOfficerComments').val();
        if(!(/[a-z]/.test(answersToCreditOfficerComments.toLowerCase())))
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Enter the Answers To Credit Officer Comments",
              type: "warning",
              confirmButtonText: "Cool"
            });
            return false;
        }
    }

    var ddlRepName=$('.ddlRepName').val();

    if(ddlRepName=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter the Representative Name",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!maritalStatusMissing}' == 'true' && ($('.maritalStatusFinal').val() == '' || $('.maritalStatusFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter the Marital Status",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!lengthOfStayMissing}' == 'true' && ($('.lengthofStayFinal').val() == '' || $('.lengthofStayFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Length of Stay",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!addressVerificationMissing}' == 'true' && ($('.addressVerificationFinal').val() == '' || $('.addressVerificationFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Address Verification Type",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!incomeVerificationMissing}' == 'true' && ($('.incomeVerificationFinal').val() == '' || $('.incomeVerificationFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Income Verification Type",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!expenseVerificationMissing}' == 'true' && ($('.expenseVerificationFinal').val() == '' || $('.expenseVerificationFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Expense Verification Type",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!serviceabilityCommentsMissing}' == 'true' && ($('.serviceabilityCommentsFinal').val() == '' || $('.serviceabilityCommentsFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Serviceability Comments",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!employerNameMissing}' == 'true' && ($('.employerNameFinal').val() == '' || $('.employerNameFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Employer Name",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if('{!employmentDateMissing}' == 'true' && ($('.employmentStartDateFinal').val() == '' || $('.employmentStartDateFinal').val() == '--None--'))
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Employment Commencement Date",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    document.getElementsByClassName('miscButtonApproval')[0].style.display = 'none'; 
}

function setProductRequirement(elem)
{
    $('.productRequirement').val($(elem).val());
    $('.loanPurpose').val('I am looking to purchase the following ' + $('.prodRequirement').val().toLowerCase() + '.\n' + 'I would like to purchase this product because ' + $('.productDescription').val() + '.\n' + 'To purchase this product I require a sale of goods by instalment as ' + $('.productRequirement').val());
}

function setProductDescription(elem)
{
    //delete old other comments
    for(var i = 0; i < elem.options.length; i++)
    {
        if(elem.options[i].value.startsWith('Other -'))
        {
            $(elem.options[i]).remove();
        }
    }
    
    $('.productDescription').val('');   
    $('#productDescriptionEditButton').css('display','none');        
    
    if($(elem).val() == 'Other')
    {        
        swal({
          title: 'Reason for the product',
          input: "textarea",
          inputPlaceholder: 'Enter reason here...',
          inputValue: '',
          showCancelButton: true,
          cancelButtonText: 'Cancel',
          confirmButtonText: "Save",
          inputValidator: function(value) 
          { 
            return new Promise(function(resolve, reject) 
            {
                if (value != '' && value != null) 
                {
                    var objective = 'Other - ' + value.replace(/[\r\n]/g, '. ');
                    var label = objective.slice(0,50);
                    $('.productDescription').val(objective);
                    $(elem).append('<option value="' + objective + '">' + label + '</option>');
                    $(elem).val(objective);
                    //$('#productDescriptionEditButton').css('display','');
                }
                swal.closeModal();
            });
          }
        });
        
        $('#productDescriptionEditButton').css('display','');
    }else
    {
        $('.productDescription').val($(elem).val());
    }
    
    $('.loanPurpose').val('I am looking to purchase the following ' + $('.prodRequirement').val().toLowerCase() + '.\n' + 'I would like to purchase this product because ' + $('.productDescription').val() + '.\n' + 'To purchase this product I require a sale of goods by instalment as ' + $('.productRequirement').val());
}

function changeProductDropDowns()
{
    $('#phonesDropDownDiv').css('display','none');
    $('#fridgeDropDownDiv').css('display','none');
    $('#tvDropDownDiv').css('display','none');
    $('#washingDropDownDiv').css('display','none');
    $('#computerDropDownDiv').css('display','none');
    $('#bedDropDownDiv').css('display','none');
    $('#couchDropDownDiv').css('display','none');
    $('#soundDropDownDiv').css('display','none');
    $('#gamingDropDownDiv').css('display','none');
    $('#coolingDropDownDiv').css('display','none');
    $('#bedroomDropDownDiv').css('display','none');
    $('#diningDropDownDiv').css('display','none');
    $('#mowerDropDownDiv').css('display','none');
    $('#gardenDropDownDiv').css('display','none');
    $('#treadmillDropDownDiv').css('display','none');
    $('#pramDropDownDiv').css('display','none');
    $('#vaccumDropDownDiv').css('display','none');
    $('#printerDropDownDiv').css('display','none');
    $('#bikeDropDownDiv').css('display','none');
    $('#cameraDropDownDiv').css('display','none');
    
    if(window.changeProductMethodCalledCount > 0){
        $('.loanPurpose').val('');
    }else if($('.loanPurpose').val().trim() == ''){
        $('.loanPurpose').val('I am looking to purchase the following ' + $('.prodRequirement').val().toLowerCase() + '.\n' + 'I would like to purchase this product because ' + $('.productDescription').val() + '.\n' + 'To purchase this product I require a sale of goods by instalment as ' + $('.productRequirement').val());    
    }
    
    var selectedDropDown = '';
    $('.whyNotPhonePlanValDiv').css('display','none');
    
    if($('.prodRequirement').val() == 'Phones'){
        $('#phonesDropDownDiv').css('display','');
        selectedDropDown = '#phonesDropDown';
        $('.whyNotPhonePlanValDiv').css('display','');
    }
    if($('.prodRequirement').val() == 'Fridge/Freezer'){
        $('#fridgeDropDownDiv').css('display','');
        selectedDropDown = '#fridgeDropDown';
    }
    if($('.prodRequirement').val() == 'TV'){
        $('#tvDropDownDiv').css('display','');
        selectedDropDown = '#tvDropDown';
    }
    if($('.prodRequirement').val() == 'Washing Machine / Clothes Dryers'){
        $('#washingDropDownDiv').css('display','');
        selectedDropDown = '#washingDropDown';
    }
    if($('.prodRequirement').val() == 'Computer/Laptop/Ipad'){
        $('#computerDropDownDiv').css('display','');
        selectedDropDown = '#computerDropDown';
    }
    if($('.prodRequirement').val() == 'Beds & Mattresses'){
        $('#bedDropDownDiv').css('display','');
        selectedDropDown = '#bedDropDown';
    }
    if($('.prodRequirement').val() == 'Couch / Lounge Furniture'){
        $('#couchDropDownDiv').css('display','');
        selectedDropDown = '#couchDropDown';
    }
    if($('.prodRequirement').val() == 'Stereo / Sound Systems'){
        $('#soundDropDownDiv').css('display','');
        selectedDropDown = '#soundDropDown';
    }
    if($('.prodRequirement').val() == 'Gaming'){
        $('#gamingDropDownDiv').css('display','');
        selectedDropDown = '#gamingDropDown';
    }
    if($('.prodRequirement').val() == 'Cooling / Air-Conditioning / Heating'){
        $('#coolingDropDownDiv').css('display','');
        selectedDropDown = '#coolingDropDown';
    }
    if($('.prodRequirement').val() == 'Bedroom furniture'){
        $('#bedroomDropDownDiv').css('display','');
        selectedDropDown = '#bedroomDropDown';
    }
    if($('.prodRequirement').val() == 'Dining Table and/or Chairs'){
        $('#diningDropDownDiv').css('display','');
        selectedDropDown = '#diningDropDown';
    }
    if($('.prodRequirement').val() == 'Mowers, Whipper Snippers, Garden tools'){
        $('#mowerDropDownDiv').css('display','');
        selectedDropDown = '#mowerDropDown';
    }
    if($('.prodRequirement').val() == 'Garden Furniture or Sheds'){
        $('#gardenDropDownDiv').css('display','');
        selectedDropDown = '#gardenDropDown';
    }
    if($('.prodRequirement').val() == 'Treadmills, Fitness Equipment'){
        $('#treadmillDropDownDiv').css('display','');
        selectedDropDown = '#treadmillDropDown';
    }
    if($('.prodRequirement').val() == 'Prams, Pushers and Baby Furniture'){
        $('#pramDropDownDiv').css('display','');
        selectedDropDown = '#pramDropDown';
    }
    if($('.prodRequirement').val() == 'Vacuums and house cleaning equipment'){
        $('#vaccumDropDownDiv').css('display','');
        selectedDropDown = '#vaccumDropDown';
    }
    if($('.prodRequirement').val() == 'Printers and Computer Equipment'){
        $('#printerDropDownDiv').css('display','');
        selectedDropDown = '#printerDropDown';
    }
    if($('.prodRequirement').val() == 'Bikes'){
        $('#bikeDropDownDiv').css('display','');
        selectedDropDown = '#bikeDropDown';
    }
    if($('.prodRequirement').val() == 'Cameras and photographic equipment'){
        $('#cameraDropDownDiv').css('display','');
        selectedDropDown = '#cameraDropDown';
    }
    
    window.selectedGlobalProductDropDown = selectedDropDown;
    $('#productDescriptionEditButton').css('display','none');
    
    if(selectedDropDown != ''){
        if(window.changeProductMethodCalledCount == 0)
        {
            var existingProductDescription = $('.productDescription').val().replace(/[\r\n]/g, '. ');
            console.log('existingProductDescription: ' + existingProductDescription);
            var productDescriptionMatchingLength = 0;
            var sel = document.getElementById(selectedDropDown.substring(1));
            console.log('selectedDropDown.substring(1) ' + selectedDropDown.substring(1));
            for(var i = 0; i < sel.options.length; i++)
            {
                if(existingProductDescription == sel.options[i].value) 
                {
                    productDescriptionMatchingLength++;
                }
            }
            console.log('productDescriptionMatchingLength: ' + productDescriptionMatchingLength);
            if(productDescriptionMatchingLength > 0) 
            {
                console.log('This option exists');
                $(selectedDropDown).val(existingProductDescription);
            }else{
                console.log('This option does not exists ' + existingProductDescription);
                
                if(existingProductDescription.startsWith('Other - '))
                {
                    var label = '' + existingProductDescription.slice(0,50);
                    if(existingProductDescription.length > 50)
                    {
                        label += '....';
                    } 
                    
                    $(selectedDropDown).append('<option value="' + existingProductDescription + '">' + label + '</option>');
                    $(selectedDropDown).val(existingProductDescription);
                    $('#productDescriptionEditButton').css('display','');
                }else{
                    $(selectedDropDown).val('None');
                }  
            }
        }else{
            //delete old other comments
            var sel = document.getElementById(selectedDropDown.substring(1));
            for(var i = 0; i < sel.options.length; i++)
            {
                if(sel.options[i].value.startsWith('Other -'))
                {
                    $(sel.options[i]).remove();
                }
            }
            
            $('.productDescription').val('None');
            $(selectedDropDown).val('None');
        }
    }
    
    window.changeProductMethodCalledCount++;
    
    //delete old other comments
    let prodReqDropDown = document.getElementById('prodReqDropDown');
    for(var i = 0; i < prodReqDropDown.options.length; i++)
    {
        if(prodReqDropDown.options[i].value.startsWith('I would like my contract to cover delivery services for my item') || prodReqDropDown.options[i].value.startsWith('I require my contract to cover delivery and installation services for'))
        {
            $(prodReqDropDown.options[i]).remove();
        }
    }
    
    if($('.prodRequirement').val() != '' && $('.prodRequirement').val() != 'None'){
        $(prodReqDropDown).append('<option value="I would like my contract to cover delivery services for my item - ' + $('.prodRequirement').val() + '">' + 'I would like my contract to cover delivery services for my item - ' + $('.prodRequirement').val() + '</option>');
        $(prodReqDropDown).append('<option value="I require my contract to cover delivery and installation services for ' + $('.prodRequirement').val() + '">' + 'I require my contract to cover delivery and installation services for ' + $('.prodRequirement').val() + '</option>');
    }
    if($('.productRequirement').val() != '' && $('.productRequirement').val() != 'None'){
        $('#prodReqDropDown').val($('.productRequirement').val());    
    }
}

function editProductDescription()
{
    var placeholder = $('.productDescription').val().substring(8);
    
    var elem = document.getElementById(window.selectedGlobalProductDropDown.slice(1));
    
    swal({
      title: 'Reason for the product',
      input: "textarea",
      inputValue: placeholder,
      showCancelButton: true,
      cancelButtonText: 'Cancel',
      confirmButtonText: "Save",
      inputValidator: function(value) 
      { 
        return new Promise(function(resolve, reject) 
        { 
            if (value != '' && value != null) 
            {
                //delete old other comments
                for(var i = 0; i < elem.options.length; i++)
                {
                    if(elem.options[i].value.startsWith('Other -'))
                    {
                        $(elem.options[i]).remove();
                    }
                }
                
                var objective = 'Other - ' + value.replace(/[\r\n]/g, '. ');
                var label = objective.slice(0,50);
                $('.productDescription').val(objective);
                $(elem).append('<option value="' + objective + '">' + label + '</option>');
                $(elem).val(objective);
            }
            swal.closeModal();
        });
      }
    });
}

function validateProductDescription()
{
    $(window.selectedGlobalProductDropDown).css('border','');
    $('.prodRequirement').css('border','');
    
    if($('.prodRequirement').val() == 'None' || $('.prodRequirement').val() == '')
    {       
        swal({
          position: 'top',  
          title: "Warning!",
          text: 'Please Select Product',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $('.prodRequirement').offset().top
                }, 1000);
                $('.prodRequirement').css('border','3px solid red');
          }
        });
                
        return false;   
    }
    
    if($('.productDescription').val() == 'None' || $('.productDescription').val() == '')
    {       
        swal({
          position: 'top',  
          title: "Warning!",
          text: 'Please Enter Reason for product',
          type: "warning",
          confirmButtonText: "Cool",
          onClose: function(){
              $('html, body').animate({
                scrollTop: $(window.selectedGlobalProductDropDown).offset().top
                }, 1000);
                $(window.selectedGlobalProductDropDown).css('border','3px solid red');
          }
        });
                
        return false;   
    }
}

function toggleOtherBenefits(elem){
    if($(elem).val() == 'Other'){
        $('.otherBenefitsOfConsumerLeaseDiv').css('display','block');
    }else{
        $('.otherBenefitsOfConsumerLeaseDiv').css('display','none');
    }
}

function doSearch() {
searchServer(
  $(".firstNameRefApp").val()
  );
}

function clickRefAppElem(elem)
{
  console.log('****');
  $(elem).addClass('bg-success');
  $(elem).addClass('text-white');
  $(".firstNameRefApp").val($(elem).find(".contactName").text());
  $('.refAppId').val($(elem).find(".contactId").text());
  console.log($(elem).find(".contactId").text());
  $('.refAppTable').css('display','none');
  //$('.refAppNoRec').css('display','none');
  $('.refAppContSelected').css('display','');
}

function equifaxSearchValidation()
{
     if($('.equifaxEnquiryFirstName').val().trim() == '')
     {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter First Name",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if($('.equifaxEnquiryLastName').val().trim() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Last Name",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if($('.equifaxEnquiryDOB').val().trim() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter DOB",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if($('.equifaxEnquiryGender').val() == '' || $('.equifaxEnquiryGender').val() == '--None--')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Gender",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if($('.equifaxEnquiryStreet').val() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter street",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    if($('.equifaxEnquiryCity').val().trim() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Suburb",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    }
    
    if(($('.equifaxEnquiryState').val().trim() == '' || $('.equifaxEnquiryState').val().trim() == '--None--') && '{!stateMasterState}' != 'NZ')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter State",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    }
    
    if(($('.equifaxEnquiryState').val().trim() == '' || $('.equifaxEnquiryState').val().trim() == '--None--') && '{!stateMasterState}' == 'NZ')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter City",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    }
    
    if($('.equifaxEnquiryPostCode').val().trim() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Postcode",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    }
    
    if('{!stateMasterState}' == 'NZ'){
        if($('.driverLicenceVal').val().trim() != '' && $('.driversLicenseVersion').val().trim() == '')
        {
            swal({
              position: 'top',
              title: "Warning!",
              text: "Enter Drivers Licence Version Number",
              type: "warning",
              confirmButtonText: "Cool"
            });
    
            return false;
        }
    }
    
    if($('.equifaxEnquiryAmount').val().trim() == '' || $('.equifaxEnquiryAmount').val() == '0' || $('.equifaxEnquiryAmount').val() == '0.0' || isNaN($('.equifaxEnquiryAmount').val())){
        swal({
          position: 'top',
          title: "Warning!",
          text: "Enter Expected TAV",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    }
    
    if($('.equifaxEnquiryAmount').val().indexOf('.') >= 0)
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Expected TAV should not have decimals",
          type: "warning",
          confirmButtonText: "Cool"
        });

        return false;
    } 
    
    swal({
      position: 'top',
      title: "Success!",
      text: "Searching for Primary and Possible Matches!\nAll current Equifax Defaults will be overridden.",
      type: "success",
      confirmButtonText: "Cool"
    });   
    
    
}

function updateRefereeSMSStatus(refId, elem)
{
    $(elem).css('display','none');
    $('.' + refId).css('display','');
    sendRefereeSMSNewFunc(refId);
}

$("#ipfileUploadpt").on('change',function(){
    $('.uploadingDocs').css('display','');
    
    setTimeout(
        function()
        {
            $('.attachmentComponent').css('display','none');
            $('.uploadingDocs').css('display','none');
            $('.uploadingDocsFinish').css('display','');
           
            if(('{!idAttached}' == 'true' && '{!sectionType}' == 'id') || ('{!bankStatementAttached}' == 'true' && '{!sectionType}' == 'bank') || ('{!myGovAttached}' == 'true' && '{!sectionType}' == 'mygov'))
            {
                $('.overrideDocs').css('display','');
            }
        } 
    ,8000);
});

window.changeProductMethodCalledCount = 0;
window.changeExpensesMethodCalledCount = 0;
window.selectedGlobalProductDropDown = '';

function validateResetOnlineLink()
{
    if($('.resetLinkId').prop('checked') && $('.resetLinkBank').prop('checked') && $('.resetLinkMygov').prop('checked') && $('.resetLinkRO').prop('checked') && $('.resetLinkBasic').prop('checked') && $('.resetLinkExpense').prop('checked') && $('.resetLinkIncome').prop('checked') && $('.resetLinkReferees').prop('checked') && $('.resetLinkEquifax').prop('checked'))
    {
          bootbox.alert({
            message: "Please uncheck atleast one section to resend the link",
            className: 'rubberBand animated'
          });
          return false;
    }
}

function co_doSearchForProducts() {
//alert($(".prodCategory").val());
$('.addBlackFont').css("color", "#000000");
$('.co_prodCriteria').text('Select product from the list');
searchServerForProducts(
  $(".co_prodCategory").val()
  );
}

function co_clickElemForProduct(elem){
    $('tr').removeClass('ui-state-highlight');
    $(elem).addClass('ui-state-highlight');
    $(".co_prodCategory").val($(elem).find(".pname").text());
    $(".co_prodCriteria").text($(elem).find(".pCategory").text());
    $(".co_prodCriteriaHidden").val($(elem).find(".pCategory").text());
    $('.addBlackFont').css("color", "#000000");
    hideSearchListForProducts();
}

function co_changeCOGS(elem)
{
    //alert($(elem).val());
    var term=$(".co_ddlTerm").val();
    var cost=$(".co_txtCostOfGoods").val();
    var rrp=$(".co_txtRRP").val();
    var deliveryFee = $(".co_txtDeliveryFee").val();
    var prodCat = $(".co_prodCategory").val();  
    var rent=0;
    var tav=0;
    cost=cost.replace(/\,/g,'');
    rrp=rrp.replace(/\,/g,'');
    deliveryFee=deliveryFee.replace(/\,/g,'');
    if(isNaN(deliveryFee) || deliveryFee==""){
        deliveryFee = 0;
    }
    if(isNaN(cost) || cost=="")
    {
        cost=0;
        $(".co_txtCostOfGoods").val('0');
        $(".co_txtRent").val('0');
        //$("#txtTAV").val('0');
    }
    var paymentFrequency = $('.co_paymentFrequency').val();
    if('{!Account.Territory_Number__r.State_Master_State__c}' == 'NZ')
    {
        var rrpTAVFactor = 1.550943;
        var newAAF = 0;
        var minTAV = 0;
        var rrpCalculatedTAV = 0;
        var tav = 0;
        var nzCOGS = 0;
        var slots = 1;
        rrp = parseFloat(rrp);
        
        if(isNaN(rrp) || rrp=="")
        {
            rrp = parseFloat(cost);
        }

        if(term=='24'){
            slots = 52;
            newAAF = 90 + (2.1 * 52 * 2) + 15;
            if(paymentFrequency=="Fortnightly")
            {
                rrpTAVFactor = 1.550943;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/slots).toFixed(2);
                rrpCalculatedTAV = (rent * slots).toFixed(2);
            }
            else if(paymentFrequency=="Weekly")
            {
                rrpTAVFactor = 1.546767;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/(slots*2)).toFixed(2);
                rrpCalculatedTAV = (rent * (slots*2)).toFixed(2);
            }
            
        }else if(term=='36'){
            slots = 78;
            newAAF = 90 + (2.1 * 52 * 3) + 15;
            if(paymentFrequency=="Fortnightly")
            {
                rrpTAVFactor = 1.873100;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/slots).toFixed(2);
                rrpCalculatedTAV = (rent * slots).toFixed(2);
            }
            else if(paymentFrequency=="Weekly")
            {
                rrpTAVFactor = 1.869269;
                nzCOGS = rrp + newAAF;
                rent = ((nzCOGS * rrpTAVFactor)/(slots*2)).toFixed(2);
                rrpCalculatedTAV = (rent * (slots*2)).toFixed(2);
            }
        }
        console.log(rrp, rrpTAVFactor, newAAF, nzCOGS, rrpCalculatedTAV, rent);
    }else
    {        
        let apr_cashPrice = parseFloat(cost) + parseFloat(deliveryFee);
        console.log("apr_cashPrice: "+apr_cashPrice);
        var apr_fees = JSON.parse(aprUtil.getFees(apr_cashPrice,parseInt(term)));
        console.log("apr_fees: "+apr_fees);
        console.log("apr_fees.totalFees: "+apr_fees.totalFees);
        var result = JSON.parse(aprUtil.calculateAPR(apr_cashPrice, apr_fees.totalFees, parseInt(term) ,paymentFrequency));
        console.log("result: "+result);
        console.log("result: "+result.tav);
        console.log("result: "+result.rent);
        rrpCalculatedTAV = result.tav;
        tav = rrpCalculatedTAV;
        minTAV = rrpCalculatedTAV;
        rent = result.rent;
        
    }
    console.log('tav: '+tav+' rrpCalculatedTAV: '+rrpCalculatedTAV+' minTAV: '+minTAV+' rent: ' + rent);
    if(paymentFrequency == 'Weekly'){
        $(".co_txtRent").val((parseFloat(rent) * 2).toFixed(2));
    }else{
        $(".co_txtRent").val(parseFloat(rent).toFixed(2));
    }
    //$(".txtRent").val(Math.ceil(rent));
    //$(".txtTAV").val(minTAV.toFixed(2));
    //window.cmCommentsChanged = 'yes';
}

$(".co_miscbuttonCM").click(function() {   
    var prodCriteria = $('.co_prodCriteria').text();
    if(prodCriteria=='Select product from the list' || prodCriteria=='')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Select a product from the product list to check RAM Assistance",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }
    
    //alert('{!criteriaType}');
    
    if('{!Account.AgreementId_for_Current_Enquiry__c}'.trim() == '' || '{!Account.AgreementId_for_Current_Enquiry__c}'.trim() == 'null')
    {
        checkCriteriaBeforeCreatingAgreement(); 
    }
});


function co_saveDNDiv()
{
    var appStatus = $('.ddlEnquiryStatus').val();
    var appReason = $('.ddlReason').val();
    
    if((appStatus=="DNQ - Did Not Qualify" || appStatus=="DNS - Did Not Service" || appStatus=="DNC - Did Not Contact" || appStatus=="DNP - Did Not Proceed" || appStatus=="DND - Do Not Deal") && appReason.trim() == '')
    {
        swal({
          position: 'top',
          title: "Warning!",
          text: "Please enter the reason why application did not go ahead",
          type: "warning",
          confirmButtonText: "Cool"
        });
        return false;
    }else
    {
        swal({
          position: 'top',
          title: "Saving!!!",
          type: "success",
          confirmButtonText: "Cool"
        });
        changeStatus();
    }
}

function co_redirectToCAM()
{
    var appStatus = $('.ddlEnquiryStatus').val();
    var appReason = $('.ddlReason').val();
    
    if(appStatus=="DNQ - Did Not Qualify" || appStatus=="DNS - Did Not Service" || appStatus=="DNC - Did Not Contact" || appStatus=="DNP - Did Not Proceed" || appStatus=="DND - Do Not Deal")
    {
        window.open('/{!account.Id}','_self');
    }else
    {
        window.open('/apex/CAMProcess?formType=assessment&id={!Account.Id}','_self');
    }
}
function onChangeCMComments(){
    //window.cmCommentsChanged = 'yes';
    $('.nextbuttonCM').css('display','none');    
}
window.cmCommentsChanged = 'no';
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6IoNLUq0kEHUjf2X03l7ySFLAUqHoOSg&libraries=places,geometry&callback=initAutocomplete"></script>
</apex:page>