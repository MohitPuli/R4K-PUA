<apex:page controller="R4KOnlineApplicationController" action="{!getFormDetails}" standardstylesheets="false" showheader="false">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<apex:stylesheet value="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.css"/>
<apex:stylesheet value="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
<apex:stylesheet value="{!$Resource.R4KOnlineCSS}" />
<apex:stylesheet value="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"/>

<apex:includeScript value="https://code.jquery.com/jquery-3.3.1.js"/>
<apex:includeScript value="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"/>
<apex:includeScript value="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"/>
<apex:includeScript value="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"/> 
<apex:includeScript value="{!$Resource.bootbox}"/>
<apex:includeScript value="https://www.bankstatements.com.au/js/iframeResizer.min.js"/>
<apex:includeScript value="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"/>

<style>

body 
{
background-color:#fcb813;
}

.silverDiv
{
    min-height:60vh;
    background-color:#cbcccb;
    border-radius:5% 5% 0% 0%;
    padding:1%;
}

.whiteDiv
{
    background-color:#FFFFFF;
    border-radius:5% 5% 0% 0%;
    margin-bottom:20px;
    padding:3%;
    width: 100%;
}

.vertical-center {
  min-height: 100%; 
  //min-height: 100vh; 

  display: flex;
  align-items: center;
}

.table-condensed{
  font-size: 80%;
}

.multisteps-form__title{
    text-align:center;
    fon-weight:bold;
}

.labelName{
    font-size: 14px;
    padding-left: 5px;
}

.wrap {
  width: 100%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.range {
  width: 100%;
  cursor: pointer;
  opacity: 0;
}
.range::-ms-tooltip {
  display: none;
}

.track {
  width: 100%;
  height: 15px;
  background: white;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
}
.track-inner {
  width: 0;
  height: 100%;
  background: #E24F4F;
}

.thumb {
  width: 30px;
  height: 30px;
  background: #DCDCDC;
  border-radius: 15%;
  border: 1px solid black;
  position: absolute;
  top: 50%;
  left: 0;
  transform: translate(0%, -50%);
  pointer-events: none;
}


.sidebar {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 100;
  top: 0;
  left: 0;
  background-color: white;
  overflow-x: hidden;
  transition: 0.5s;
  border-radius:0px 25px 25px 0px;
}

.sidebar a {
  padding: 8px 8px 8px 2px;
  text-decoration: none;
  font-size: 15px;
  color: #818181;
  display: block;
  transition: 0.3s;
  border-bottom: 1px solid black;
}

.sidebar .closebtn {
  //position: absolute;
  //top: 0;
  //margin-left:50%;
  //right: 25px;
  //font-size: 36px;
  //margin-left: 50px;
  //border-bottom: none;
  //float:right;
  //padding:10px;
}

ul{
 list-style-type: none;
}

</style>
<title>R4K Online Application Form</title>

<apex:form id="theAppForm">

<apex:actionFunction action="{!convertToApplicant}" name="convertLead" rerender="theAppForm">
    <apex:param id="ldDob" name="ldDob" value="" />
    <apex:param id="ldMobile" name="ldMobile" value="" />
    <apex:param id="ldEmail" name="ldEmail" value="" />
    <apex:param id="clientSideAppType" name="clientSideAppType" value="" />
    <apex:param id="isOnline" name="isOnline" value="" />
    <apex:param id="idFirstName" name="idFirstName" value="" />
    <apex:param id="idLastName" name="idLastName" value="" />
    <apex:param id="idTypVal" name="idTypVal" value="" />
    <apex:param id="idNumberVal" name="idNumberVal" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!deleteSelfieId}" name="deleteSelfieFunc" rerender="theAppForm">
    <apex:param id="acctId" name="acctId" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!deletePhotoIdOnline}" name="deletePhotoFunc" rerender="theAppForm">
    <apex:param id="accountId" name="accountId" value="" />
    <apex:param id="type" name="type" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!deleteWinzId}" name="deleteWinzIdFunc" rerender="theAppForm">
    <apex:param id="winzId" name="winzId" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!deleteOtherIdForHybridLink}" name="deleteOtherIdFunc" rerender="theColForm">
    <apex:param id="otherId" name="otherId" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!equifaxSearchForOnline}" name="performEquifaxSearch" rerender="theAppForm">
</apex:actionFunction>

<apex:actionFunction action="{!finishOnlineProcess}" name="finishProcess" rerender="theAppForm">
<apex:param id="addComments" name="addComments" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!saveShortLinkOpenedDeviceDataForHybridLink}" name="saveShortLinkOpenedDeviceData" reRender="dummy">
    <apex:param id="address" name="address" value="" />
    <apex:param id="lat" name="lat" value="" />
    <apex:param id="lng" name="lng" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!saveLocationInfo}" name="saveLocationInfoFunc" reRender="dummy">
    <apex:param id="addressVal" name="addressVal" value="" />
    <apex:param id="latVal" name="latVal" value="" />
    <apex:param id="lngVal" name="lngVal" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!saveDeviceInfo}" name="saveDeviceInfoFunc" reRender="dummy">
    <apex:param id="linkOpenedDeviceBrand" name="linkOpenedDeviceBrand" value="" />
    <apex:param id="linkOpenedDeviceName" name="linkOpenedDeviceName" value="" />
    <apex:param id="linkOpenedDeviceType" name="linkOpenedDeviceType" value="" />
    <apex:param id="linkOpenedDeviceBrowser" name="linkOpenedDeviceBrowser" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!addReferee}" name="addRefereeRecord" rerender="theAppForm">
    <apex:param id="rfirstName" name="rfirstName" value="" />
    <apex:param id="rlastName" name="rlastName" value="" />
    <apex:param id="rphone" name="rphone" value="" />
    <apex:param id="relation" name="relation" value="" />
    <apex:param id="isOnlineAddRef" name="isOnlineAddRef" value="" />
</apex:actionFunction>

<!--<apex:actionFunction action="{!addPreviousReferee}" name="addPreviousRefereeRecord" rerender="theAppForm">
    <apex:param id="addRefId" name="addRefId" value="" />
    <apex:param id="addRefNo" name="addRefNo" value="" />
</apex:actionFunction>-->

<apex:actionFunction action="{!redirectAndAddPreviousReferees}" name="redirectAndAddRefereesFunc" rerender="theAppForm">
    <apex:param id="cpRefId" name="cpRefId" value="" />
    <apex:param id="prevRefs" name="prevRefs" value="" />
    <apex:param id="addPrevRefNo" name="addPrevRefNo" value="" />
    <apex:param id="isOnlineRef" name="isOnlineRef" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateConsumerLeaseDetails}" name="updateConsumerLeaseDetailsFunc" rerender="theAppForm">
<apex:param id="whyConsumerLease" name="whyConsumerLease" value="" />
<apex:param id="benefitsOfConsumerLease" name="benefitsOfConsumerLease" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateProductDetails}" name="updateProductDetailsFunc" onComplete="redirectToRedo('bi');" rerender="theAppForm">
<apex:param id="prodRequirement" name="prodRequirement" value="" />
<apex:param id="prodName" name="prodName" value="" />
<apex:param id="prodObjective" name="prodObjective" value="" />
<apex:param id="productRequirement" name="productRequirement" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateAddress}" name="updateAddressFunc" oncomplete="redirectToRedo('cuad');" rerender="theAppForm">
<apex:param id="currentStreetAddress" name="currentStreetAddress" value="" />
<apex:param id="currentSuburb" name="currentSuburb" value="" />
<apex:param id="currentState" name="currentState" value="" />
<apex:param id="currentPostcode" name="currentPostcode" value="" />
<apex:param id="currentCountry" name="currentCountry" value="" />
<apex:param id="currentLatitude" name="currentLatitude" value="" />
<apex:param id="currentLongitude" name="currentLongitude" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateResidentialStatus}" name="updateResidentialStatusFunc" rerender="theAppForm">
<apex:param id="lengthOfStayCurrent" name="lengthOfStayCurrent" value="" />
<apex:param id="residentialStatus" name="residentialStatus" value="" />
<apex:param id="landlordName" name="landlordName" value="" />
<apex:param id="landlordNumber" name="landlordNumber" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateDependents}" name="updateDependentsFunc" rerender="theAppForm">
<apex:param id="noOfDependents" name="noOfDependents" value="" />
<apex:param id="maritalStatus" name="maritalStatus" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updatePreviousAddress}" name="updatePreviousAddressFunc" rerender="theAppForm" oncomplete="redirectToNextExpenseFunc('');">
<apex:param id="previousStreetAddress" name="previousStreetAddress" value="" />
<apex:param id="previousSuburb" name="previousSuburb" value="" />
<apex:param id="previousState" name="previousState" value="" />
<apex:param id="previousPostcode" name="previousPostcode" value="" />
<apex:param id="previousCountry" name="previousCountry" value="" />
<apex:param id="previousLatitude" name="previousLatitude" value="" />
<apex:param id="previousLongitude" name="previousLongitude" value="" />
<apex:param id="lengthOfStayPrevious" name="lengthOfStayPrevious" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!skipMygovStatement}" name="skipMygovStatementFunc" rerender="theAppForm" oncomplete="redirectToNextExpenseFunc('sdcpa');"/>

<apex:actionFunction action="{!updateConsent}" name="updateConsentFunc" rerender="theAppForm">
</apex:actionFunction>

<apex:actionFunction action="{!updateIdentificationNo}" name="updateIdentificationNoFunc" rerender="theAppForm">
<apex:param id="identificationNo" name="identificationNo" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateBasicInfo}" name="updateBasicInfoFunc" rerender="theAppForm,mogoCreditDiv,mogoLoanDiv">
<apex:param id="firstNameF" name="firstName" value="" />
<apex:param id="lastNameF" name="lastName" value="" />
<apex:param id="dobF" name="dob" value="" />
<apex:param id="genderF" name="gender" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateContactDetails}" name="updateContactDetailsFunc" rerender="theAppForm">
<apex:param id="phone" name="phone" value="" />
<apex:param id="email" name="email" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateEquifaxNotes}" name="updateEquifaxNotesFunc" rerender="theAppForm">
<apex:param id="addEqEnquiries" name="addEqEnquiries" value="" />
<apex:param id="addEqRentalDefaults" name="addEqRentalDefaults" value="" />
<apex:param id="addEqNonRentalDefaults" name="addEqNonRentalDefaults" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateEmployment}" name="updateEmploymentFunc" rerender="theAppForm">
<apex:param id="fnightlyEmploymentManual" name="fnightlyEmploymentManual" value="" />
<apex:param id="employerName" name="employerName" value="" />
<apex:param id="employmentType" name="employmentType" value="" />
<apex:param id="employmentDate" name="employmentDate" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateEmploymentIncome}" name="updateEmploymentIncomeFunc" rerender="theAppForm">
<apex:param id="fnightlyEmployment" name="fnightlyEmployment" value="" />
<apex:param id="employmentAgree" name="employmentAgree" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateBoardingIncome}" name="updateBoardingIncomeFunc" rerender="theAppForm" onComplete="redirectToNextExpenseFunc('incsum');">
<apex:param id="incomeOtherSharingName" name="incomeOtherSharingName" value="" />
<apex:param id="incomeOtherSharingNumber" name="incomeOtherSharingNumber" value="" />
<apex:param id="incomeOtherSharingRelation" name="incomeOtherSharingRelation" value=""/>
<apex:param id="incomeOtherSharingContact" name="incomeOtherSharingContact" value="" />
<apex:param id="incomeOtherSharingReferee" name="incomeOtherSharingReferee" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateOtherIncome}" name="updateOtherIncomeFunc" rerender="theAppForm" onComplete="redirectToNextExpenseFunc('incsum');">
<apex:param id="fnightlyIncomeOther" name="fnightlyIncomeOther" value="" />
<apex:param id="incomeOtherSource" name="incomeOtherSource" value="" />
<apex:param id="incomeOtherVerify" name="incomeOtherVerify" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!confirmOtherIncome}" name="confirmOtherIncomeFunc" rerender="theAppForm" onComplete="redirectToNextExpenseFunc('incsum');">
<apex:param id="fnightlyOtherInc" name="fnightlyOtherInc" value="" />
<apex:param id="otherIncAgree" name="otherIncAgree" value="" />
</apex:actionFunction>

<!--
<apex:actionFunction action="{!updateCentrepay}" name="updateCentrepayFunc" rerender="theAppForm">
<apex:param id="clinkBenefits" name="clinkBenefits" value="" />
<apex:param id="clinkIncome" name="clinkIncome" value="" />
</apex:actionFunction>
-->
<apex:actionFunction action="{!updateCentrelinkBenefit}" name="updateCentrelinkBenefitFunc" rerender="theAppForm">
<apex:param id="clinkBenefitIndex" name="clinkBenefitIndex" value="" />
<apex:param id="clinkBenefitName" name="clinkBenefitName" value="" />
<apex:param id="cbenIncome" name="cbenIncome" value="" />
<apex:param id="cbenAgree" name="cbenAgree" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!resetBank}" name="resetBankFunc" rerender="theAppForm">
    <apex:param id="bankRedoAgree" name="bankRedoAgree" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!resetMygov}" name="resetMygovFunc" rerender="theAppForm">
    <apex:param id="mygovRedoAgree" name="mygovRedoAgree" value="" />
</apex:actionFunction>

<!--<apex:actionPoller action="{!getFormDetails}" rerender="pnlBankStDoc,pnlMyGovDoc" interval="5"/>-->

<apex:actionFunction action="{!updateApplicationLogs}" name="updateApplicationLogsFunc" rerender="theAppForm" oncomplete="redirectToIdentityDetailsFunc();">
    <apex:param id="logs" name="logs" value="" />
    <apex:param id="userAgent" name="userAgent" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!remindMeIn}" name="remindMeInFunc" rerender="theAppForm" oncomplete="redirectToWebsite();">
    <apex:param id="remindMeIn" name="remindMeIn" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateIdentityDetails}" name="updateIdentityDetailsFunc" rerender="theAppForm">
    <apex:param id="appMobile" name="appMobile" value="" />
    <apex:param id="appDob" name="appDob" value="" />
    <apex:param id="appIdTypVal" name="appIdTypVal" value="" />
    <apex:param id="appIdNumberVal" name="appIdNumberVal" value="" />
    <apex:param id="appEmail" name="appEmail" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!updateTransferRelationship}" name="updateTransferRelationshipFunc" onComplete="redirectToNextExpenseFunc('incsum');" rerender="theAppForm">
    <apex:param id="transferRelationship" name="transferRelationship" value="" />
</apex:actionFunction>

<apex:actionFunction action="{!acceptPOATerms}" name="acceptPOATermsFunc" rerender="theAppForm">
    <apex:param id="poaTerm1" name="poaTerm1" value="" />
    <apex:param id="poaTerm2" name="poaTerm2" value="" />
    <apex:param id="poaTerm3" name="poaTerm3" value="" />
    <apex:param id="poaTerm4" name="poaTerm4" value="" />
    <apex:param id="poaTerm5" name="poaTerm5" value="" />
    <apex:param id="poaTerm6" name="poaTerm6" value="" />
</apex:actionFunction>
</apex:form>

<div id="mySidebar" class="sidebar mySidebar font-weight-bold">
  <div><p style="text-align:right;cursor:pointer;padding:5px;margin-right:5px;"><span onclick="closeNav();"><i class="fas fa-window-close fa-2x"></i></span></p></div>
  <ul style="cursor: pointer;">
      <li><a onclick="$('.navList').css('display','none');" class="consentNavLink">Consent</a></li>
      <li><a onclick="$('.navList').css('display','none');" class="productNavLink">Product Requirements</a></li>
      <li>
          <a onclick="toggleDocsNavList();" class="docsNavLink">Documents</a>
          <ul style="display:none;" class="navList docsNavList">
              <li><a onclick="navbarRedirect('sdid','{!acct.Is_PhotoId_Attached_After_Enquiry__c}');" class="idNavLink" style="{!IF(acctId != null && acctId != '' && acct.Is_PhotoId_Attached_After_Enquiry__c,'color:black;','color:#BFBFBF')}">Id</a></li>
              <li><a onclick="navbarRedirect('sdbsa','{!acct.Bank_Final_Page__c}');" class="bankNavLink" style="{!IF(acctId != null && acctId != '' && acct.Bank_Final_Page__c,'color:black;','color:#BFBFBF')}">Bank</a></li>
              <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',false,true)}">
                  <li><a onclick="navbarRedirect('sdmgRedo','{!acct.MyGov_Final_Page__c}');" class="mygovNavLink" style="{!IF(acctId != null && acctId != '' && acct.MyGov_Final_Page__c,'color:black;','color:#BFBFBF')}">Mygov</a></li>
              </apex:outputPanel>
              <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',true,false)}">
                  <li><a onclick="navbarRedirect('sdwz','{!acct.MyGov_Final_Page__c}');" class="mygovNavLink" style="{!IF(acctId != null && acctId != '' && acct.MyGov_Final_Page__c,'color:black;','color:#BFBFBF')}">Proof of Income</a></li>
              </apex:outputPanel>
          </ul>
      </li>
      <li>
          <a onclick="toggleAssessNavList();" class="assessNavLink">Verification</a>
          <ul style="display:none;" class="navList assessNavList">
              <li><a onclick="navbarRedirect('bi','{!acct.Basic_Info_Online__c}');" class="contactNavLink" style="{!IF(acctId != null && acctId != '' && acct.Basic_Info_Online__c,'color:black;','color:#BFBFBF')}">Contact Details</a></li>
              <li><a onclick="navbarRedirect('incsum','{!acct.Income_Online__c}');" class="incomeNavLink" style="{!IF(acctId != null && acctId != '' && acct.Income_Online__c,'color:black;','color:#BFBFBF')}">Income</a></li>
              <li><a onclick="navbarRedirect('expsum','{!acct.Expense_Online__c}');" class="ExpensesNavLink" style="{!IF(acctId != null && acctId != '' && acct.Expense_Online__c,'color:black;','color:#BFBFBF')}">Expenses</a></li>
          </ul>
      </li>
      <li><a onclick="$('.navList').css('display','none');" class="unsuitabilityNavLink">Preliminary Unsuitability Assessment</a></li>
      <li><a onclick="$('.navList').css('display','none');" class="signingNavLink">Approval &amp; Signing</a></li>
      <li><a onclick="$('.navList').css('display','none');" class="deliveryNavLink">Delivery</a></li>
  </ul>
  <hr/>
<ul style="cursor: pointer;">
        <li>
            <a onclick="redirectToOtherDocs();"><i class="fas fa-file-upload"></i> Other Documents</a>
        </li>
        <li>
            <a onclick="redirectToR4KChat();"><i class="fas fa-comments"></i> Chat</a>
        </li>
        <li>
            <a onclick="redirectToCallback();">Request Call Back</a>
        </li>
</ul>
</div>

<div style="cursor: pointer;">
<nav class="navbar navbar-expand-lg navbar-light mb-1">
    <div class="container-fluid d-flex">
        <div>
            <a onclick="openNav();"><i class="fas fa-bars fa-2x"></i></a>
        </div>
        <div>
            <apex:image value="{!URLFOR($Resource.R4KLogoTransparentCC)}" width="150" alt="R4K"/>
        </div>
        <div>
            <apex:image url="/servlet/servlet.FileDownload?file={!acct.Customer_Photo_Id__c}" width="70" height="70" alt="{!acct.Name}" rendered="{!IF(acct.Customer_Photo_Id__c <> null,true,false)}"/>
        </div>
    </div>
</nav>
</div>

<div class="mainContent">
<div class="fixed-bottom" style="{!IF($CurrentPage.parameters.param=='com','display:none;','')}"> 
    <div class="card">
        <div class="card-body">
            <button class="btn btn-success mainBtn" id="mainBtn" style="width:100%;" type="button" title="Next">{!IF($CurrentPage.parameters.param=='sdida','Attach Front page of ID', IF($CurrentPage.parameters.param=='sdcpa','Attach Selfie', IF($CurrentPage.parameters.param=='sdid','Attach Back page of ID',IF($CurrentPage.parameters.param=='finTerms','Submit my PUA Application','Next'))))}</button>
        </div>
    </div>
</div>

<div class="fixed-bottom fixed-bottom-callback" style="display:none;"> 
    <div class="card">
        <div class="card-body">
            <button class="btn btn-warning save-finish-later text-dark" id="save-finish-later" style="width:100%;" type="button" title="SAVE AND FINISH LATER" onclick="finishLater();">Save And Finish Later</button>
            <button class="btn btn-success js-btn-next continue-to-id mt-4" id="continue-to-id" style="width:100%;" type="button" title="CONTINUE TO ID" onclick="continueToId();">Continue to ID</button>
        </div>
    </div>
</div>

<div class="multisteps-form">
  <!--form panels-->
  <div class="row">
    <div class="col-12 col-lg-8 m-auto">
      <form class="multisteps-form__form secondForm">
        
        
        <!--initial form panel for Searching Page 5-->
        <div class="multisteps-form__panel shadow" data-animation="scaleIn">
          <!--<h5 class="multisteps-form__title mt-4 mb-4">Please wait while we retrieve your information from our secured location... </h5>-->
          <div class="multisteps-form__content whiteDiv">
            <div class="col text-center silverDiv">
            <div style="margin-top:20px;">
                <apex:image value="{!$Resource.R4KLoading}" width="300" height="200"/>
            </div>
            </div>
          </div>
        </div>
        

        
        <div class="multisteps-form__panel reqdocPanel shadow {!IF($CurrentPage.parameters.param=='reqdoc', 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Application Progress &amp; Mandatory Documentation</h5>
            <div class="multisteps-form__content whiteDiv">
                <div class="silverDiv">
                    <p class="mt-2">Grab these things and keep handy for your assessment application:</p>  
                    <ol style="list-style-type: square;" class="mt-2">
                        <li style="padding:5px;">
                        Australian drivers licence, passport, or Keypass (We&apos;ll use this information to verify your identity)
                        </li>
                        <li style="padding:5px;">
                        Online banking details for all your financial institutions (We&apos;ll securely get 3 months of income and expenses straight from your banks)
                        </li>
                    </ol>

                    <div style="margin-top:50px;">
                        <p>
                            <strong>Save and finish later?</strong><br/>
                            No Problem! We&apos;ll text you a link so you can continue at anytime. Click the &apos;Save and Finish Later&apos;, or &apos;Continue to ID&apos;
                        </p>
                    </div>
                </div>            
            </div>          
        </div>
        
        
        
        
        <div class="multisteps-form__panel callbackPanel shadow {!IF($CurrentPage.parameters.param=='callback', 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Reminder SMS</h5>
          <div class="multisteps-form__content whiteDiv">
          <div class="silverDiv">
              <p class="mt-2">Please select a time at which you would like us to send you a reminder sms</p>  
              
              <div class="form-row p-1 mt-4">
              <div class="col">
                <p class="mt-4"> 
                    Remind me in <br/><br/>
                    <select class="multisteps-form__select form-control remindMeIn">
                        <option>--Select Time--</option>
                        <option value="30">30 min</option>
                        <option value="60">60 min</option>
                        <option value="240">4 hours</option>
                        <option value="9AM">9 AM, tomorrow</option>
                    </select>
                </p>
              </div>
              </div>
          </div>  
          </div>

          <div style="margin-top:20px;">
                <button class="btn btn-success ml-auto js-btn-next request-callback" id="request-callback" style="width:100%;display:none;" type="button" title="Request Reminder SMS">Request Reminder SMS</button>
           </div>
        </div>
        
        
        
        
        <div class="multisteps-form__panel sdidPanel shadow {!IF($CurrentPage.parameters.param=='sdid', 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Identification Document - Front</h5>
          <div class="multisteps-form__content whiteDiv">
          <div class="silverDiv">
              <p class="mt-4 mb-4">Verify Your Identity - Provide Identification Document (Driver&apos;s License, Passport, Keypass)</p>  
                <div class="mt-4 mb-4">
                  <apex:outputPanel rendered="{!hasAddedPhotoId}">
                      <p style="float:right;"><a class="btn btn-danger btn-sm text-white" onClick="deletePhotoFunc('{!parentId}','front'); return false;"><i class="far fa-trash-alt"></i></a></p>
                  </apex:outputPanel>
                  <apex:outputPanel rendered="{!!hasAddedPhotoId}">
                      <c:AddAttachmentComponent id="pt" parentId="{!parentId}" DragDropHeight="60px" FileName="Photo Id Front" isCommunitySite="true"/>
                  </apex:outputPanel>
                </div>
                <apex:image url="/servlet/servlet.FileDownload?file={!photoIdFrontId}" rendered="{!IF(photoIdFrontId != null,true,false)}" width="100%"/> <br/><br/>
          </div>  
          </div>
            
            <div style="margin-top:20px;">
                <button class="btn btn-success ml-auto js-btn-next photo-id-front" id="photo-id-front" style="width:100%;display:none;" type="button" title="Next">Next</button>
           </div>
        </div>
        
        
        
        
        <div class="multisteps-form__panel sdidbPanel shadow {!IF($CurrentPage.parameters.param=='sdidb', 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Identification Document - Back</h5>
          <div class="multisteps-form__content whiteDiv">
          <div class="silverDiv">
              <p class="mt-4 mb-4">Verify Your Identity - Provide Identification Document (Driver&apos;s License, Passport, Keypass)</p>  
                <div class="mt-4 mb-4">
                  <apex:outputPanel rendered="{!hasAddedPhotoIdBack}">
                      <p style="float:right;"><a class="btn btn-danger btn-sm text-white" onClick="deletePhotoFunc('{!parentId}','back'); return false;"><i class="far fa-trash-alt"></i></a></p>
                  </apex:outputPanel>
                  <apex:outputPanel rendered="{!!hasAddedPhotoIdBack}">
                      <c:AddAttachmentComponent id="ptBack" parentId="{!parentId}" DragDropHeight="60px" FileName="Photo Id Back" isCommunitySite="true"/>
                  </apex:outputPanel>
                </div>
              <apex:image url="/servlet/servlet.FileDownload?file={!photoIdBackId}" rendered="{!IF(photoIdBackId != null,true,false)}" width="100%"/> <br/><br/>
          </div>  
          </div>
            
            <div style="margin-top:20px;">
                <button class="btn btn-success ml-auto js-btn-next photo-id-back" id="photo-id-back" style="width:100%;display:none;" type="button" title="Next">Next</button>
           </div>
        </div>
        
        
        
        
        <div class="multisteps-form__panel sdiddPanel shadow {!IF($CurrentPage.parameters.param=='sdidd', 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Let&apos;s get to know you - Confirm Your Details</h5>
          <div class="multisteps-form__content whiteDiv">
          <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">First Name</label>
                <input class="multisteps-form__input form-control idFirstName" id="idFirstName" value="{!idFirstName}" type="text" placeholder="First Name"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Last Name</label>
                <input class="multisteps-form__input form-control idLastName" id="idLastName" value="{!idLastName}" type="text" placeholder="Last Name"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Date of Birth</label>
                <input class="multisteps-form__input form-control idDOB" id="idDOB" type="text" value="{!idDOB}" placeholder="Date of Birth" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Identification Type</label>
                <select id="idType" class="multisteps-form__select form-control idType" value="{!idType}">
                  <option value="--None--">--None--</option>
                  <option value="Driver License">Driver License</option>
                  <option value="Passport">Passport</option>
                  <option value="Proof of Age Card">Proof of Age Card</option>
                  <option value="Keypass">Keypass</option>
                  <option value="Pensioner Concession Card">Pensioner Concession Card</option>
                  <option value="Health Care Card">Health Care Card</option>
                </select>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Identification No.</label>
                <input class="multisteps-form__input form-control idNumber" id="idNumber" value="{!idNumber}" type="text" placeholder="Identification No."/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Mobile</label>
                <input class="multisteps-form__input form-control ldMobile" id="ldMobile" value="{!ldMobile}" type="text" placeholder="Mobile No."/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Email</label>
                <input class="multisteps-form__input form-control ldEmail" id="ldEmail" value="{!ldEmail}" type="text" placeholder="Email"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                &nbsp;&nbsp;
            </div>
          </div>  
          </div>
            
            <div style="margin-top:20px;">
                <button class="btn btn-success ml-auto js-btn-next id-details" id="id-details" style="width:100%;display:none;" type="button" title="Next">Next</button>
           </div>
        </div>
        
        
        <!--single form panel 14 - bank st-->
        <div class="multisteps-form__panel shadow sdbsaPanel {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='sdbsa' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Bank Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
                <div class="silverDiv" style="min-height:400px;">
                    <p class="card-text">
                        To expedite your assessment process, we need to retrieve and review your bank statements instantly and securely with a single click.
                    </p>
                    <p class="card-text">
                        We need to assess that you can afford to purchase your new product(s) without substanstial hardship.
                    </p>
                    <p class="card-text">
                        Rest assured, we utilise BankStatements, a platform designed and vetted by world-class security experts to ensure the highest levels of data protection and security. 
                    </p>
                </div>
            </div>
            <div style="margin-top:50px;">
                <button class="btn btn-success ml-auto js-btn-next bank-next" id="bank-next" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>
        
               
        <!--single form panel 14 - bank st-->
        <div class="multisteps-form__panel shadow sdbsaRedoPanel" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Bank Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv" style="min-height:400px;">
                <p class="card-text mt-4">
                    You have already submitted a bank statement. <br/>
                    Please select one of the following options <input type="text" class="bankRedoAgree" style="display:none;" value="no"/>
                </p>
                <div class="text-center mt-4" style="cursor:pointer;">
                        <div class="card text-white bg-secondary bankRedoYes" style="border-radius:15px;" onclick="$('.bankRedoRemove').removeClass('bg-success');$('.bankRedoRemove').addClass('bg-secondary');$('.bankRedoNo').removeClass('bg-success');$('.bankRedoNo').addClass('bg-secondary');$('.bankRedoYes').removeClass('bg-secondary');$('.bankRedoYes').addClass('bg-success');$('.bankRedoAgree').val('yes');">
                        <div class="card-body">
                            <h3 class="card-title">Add another bank statement</h3>
                        </div>
                        </div>
                </div>
                <div class="text-center mt-4" style="cursor:pointer;">  
                        <div class="card text-white bg-secondary bankRedoRemove" style="border-radius:15px;" onclick="$('.bankRedoYes').removeClass('bg-success');$('.bankRedoYes').addClass('bg-secondary');$('.bankRedoNo').removeClass('bg-success');$('.bankRedoNo').addClass('bg-secondary');$('.bankRedoRemove').removeClass('bg-secondary');$('.bankRedoRemove').addClass('bg-success');$('.bankRedoAgree').val('remove');">
                        <div class="card-body">
                            <h3 class="card-title">Remove existing and add new bank statement</h3>
                        </div>
                        </div>
                    </div>
                <div class="text-center mt-4" style="cursor:pointer;"> 
                        <div class="card text-white bg-success bankRedoNo" style="border-radius:15px;" onclick="$('.bankRedoRemove').removeClass('bg-success');$('.bankRedoRemove').addClass('bg-secondary');$('.bankRedoYes').removeClass('bg-success');$('.bankRedoYes').addClass('bg-secondary');$('.bankRedoNo').removeClass('bg-secondary');$('.bankRedoNo').addClass('bg-success');$('.bankRedoAgree').val('no');">
                        <div class="card-body">
                            <h3 class="card-title">Happy with existing bank statement</h3>
                        </div>
                        </div>
                    </div>
                <div style="height:50px;"></div>
            </div>
            </div>
            <div style="margin-top:50px;">
                <button class="btn btn-success ml-auto js-btn-next bank-next-redo" id="bank-next-redo" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>
        
        
        <div class="multisteps-form__panel shadow rounded sdbsaLoginPanel {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='sdbsaLogin' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Bank Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
            <div align="center">              
                    <div style="margin-top:3px;">  
                    <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',false,true)}">
                        <!--<iframe src="https://scv-test.bankstatements.com.au/iframe/RFKM-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>-->
                        <iframe src="https://scv.bankstatements.com.au/iframe/RMBV-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',true,false)}">
                        <iframe src="https://www.bankstatements.com.au/r/b/RFNZ-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>
                    </apex:outputPanel>
                    </div>
                    <button id="bankStDummy" style="display:none;">Next</button>
              </div>
          </div>
        </div>
        
        
        <div class="multisteps-form__panel shadow rounded {!IF((acctId!=null && acctId!='') &&$CurrentPage.parameters.param=='sdbs' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Bank Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
            <div align="center">
                    
                      <apex:outputPanel id="pnlBankStDoc2">
                      <apex:outputPanel rendered="{!IF(hasCompletedBankSt, true,false)}"><span style="color:green;">Please press Next to proceed!!</span></apex:outputPanel>
                            <input type="hidden" id="hdnBankStVal" value="{!hasCompletedBankSt}"/>
                       </apex:outputPanel>
                      <apex:outputPanel rendered="{!IF(hasCompletedBankSt, true,false)}">
                      <div class="button-row d-flex mt-4 col-12">
                        <button class="btn btn-success ml-auto js-btn-next" id="bankbtn" style="width:100%;display:none;" type="button" title="Next">Next</button>
                     </div>
                     </apex:outputPanel>
                     
                    <apex:outputPanel rendered="{!IF(hasCompletedBankSt, false,true)}">
                    <div style="margin-top:3px;">  
                    <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',false,true)}">
                        <!--<iframe src="https://scv-test.bankstatements.com.au/iframe/RFKM-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>-->
                        <iframe src="https://scv.bankstatements.com.au/iframe/RMBV-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>
                    </apex:outputPanel>
                    <apex:outputPanel rendered="{!IF(stateMasterState=='NZ',true,false)}">
                        <iframe src="https://www.bankstatements.com.au/r/b/RFNZ-{!customerNo}" id="exampleIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>
                    </apex:outputPanel>
                    </div>
                    <button id="bankStDummy" style="display:none;">Next</button>
                    </apex:outputPanel>
              </div>
          </div>
        </div>
        
        
        <!--single form panel 14 - bank st-->
        <div class="multisteps-form__panel shadow sdmgRedoPanel {!IF((acctId!=null && acctId!='') &&$CurrentPage.parameters.param=='sdmgRedo' && !ishybridLinkCompleted && stateMasterState != 'NZ', 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Centrelink Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv" style="min-height:400px;">
                <p class="card-text mt-4">
                    You have already submitted a myGov statement. <br/>
                    Please select one of the following options <input type="text" class="mygovRedoAgree" style="display:none;" value="no"/>
                </p>
                <div class="text-center mt-4" style="cursor:pointer;">  
                        <div class="card text-white bg-secondary mygovRedoRemove" style="border-radius:15px;" onclick="$('.mygovRedoNo').removeClass('bg-success');$('.mygovRedoNo').addClass('bg-secondary');$('.mygovRedoRemove').removeClass('bg-secondary');$('.mygovRedoRemove').addClass('bg-success');$('.mygovRedoAgree').val('remove');">
                        <div class="card-body">
                            <h3 class="card-title">Remove existing and add new myGov statement</h3>
                        </div>
                        </div>
                    </div>
                <div class="text-center mt-4" style="cursor:pointer;"> 
                        <div class="card text-white bg-success mygovRedoNo" style="border-radius:15px;" onclick="$('.mygovRedoRemove').removeClass('bg-success');$('.mygovRedoRemove').addClass('bg-secondary');$('.mygovRedoNo').removeClass('bg-secondary');$('.mygovRedoNo').addClass('bg-success');$('.mygovRedoAgree').val('no');">
                        <div class="card-body">
                            <h3 class="card-title">Happy with existing myGov statement</h3>
                        </div>
                        </div>
                    </div>
                
            </div>
            </div>
            <div style="margin-top:50px;">
                <button class="btn btn-success ml-auto js-btn-next mygov-next-redo" id="mygov-next-redo" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>
        

        <!--single form panel 14 - myGov st-->
        <div class="multisteps-form__panel shadow sdmgPanel {!IF((acctId!=null && acctId!='') &&$CurrentPage.parameters.param=='sdmg' && !ishybridLinkCompleted && stateMasterState != 'NZ', 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Centrelink Statement Retrieval</h5>
            <div class="multisteps-form__content whiteDiv">
            <div align="center">
                  <div class="button-row d-flex mt-4 col-12">
                    <button class="btn btn-success ml-auto js-btn-next mygov-next" id="mygov-next" style="width:100%;display:none;" type="button" title="Next">Next</button>
                    <input type="hidden" id="hdnMyGovVal" value="{!hasCompletedMyGov}"/>
                 </div>
                 
                <apex:outputPanel rendered="{!IF(hasCompletedMyGov, false,true)}">
                <div style="margin-top:3px;">  
                <!--<iframe src="https://test.bankstatements.com.au/iframe/start/RFTC-{!customerNo}?withCentrelink=true&centrelinkOnly=true" id="exampleMyGovIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>-->
                <iframe src="https://www.bankstatements.com.au/iframe/start/RFKC-{!customerNo}?withCentrelink=true&centrelinkOnly=true" id="exampleMyGovIframe" onload="iFrameResize([{log:false}])" scrolling="no"></iframe>
                </div>
                </apex:outputPanel>
             </div>
          </div>
        </div>
        
        
        
        <div class="multisteps-form__panel shadow sdwzPanel {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='sdwz' && stateMasterState=='NZ', 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Proof of Income</h5>
            <div class="multisteps-form__content whiteDiv">
                <div class="silverDiv">
                <p class="card-text mt-4">So, we can provide you with faster Approval, we need to retrieve and review your proof of income</p>  
                    <!--<div class="row">-->
                            
                                    <table class="table">
                                    <tr>
                                    <td style="border: none;" colspan="2">
                                        <c:AddAttachmentComponent parentId="{!acctId}" isCommunitySite="true" DragDropHeight="100px" FileName="Proof of Income" id="ptWinz" />
                                    </td>
                                    </tr>
                                    <tr><td colspan="2">{!countWinzAtts} income document/s attached</td></tr>
                                        <apex:repeat value="{!attsWinz}" var="at">
                                            <tr><td>{!at.Name}</td><td><a href="#" class="btn btn-danger" onclick="deleteWinzIdFunc('{!at.Id}');"><i class="fas fa-trash-alt"></i> </a></td></tr>
                                        </apex:repeat>
                                    </table>
                                    <span id="txtDisplayValWinz"></span>

                    <!--</div>-->
                </div>
            </div>
            <div style="margin-top:20px;">
                <button class="btn btn-success ml-auto js-btn-next proof-of-income" id="proof-of-income" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>
        
        
        
        <!--single form panel selfie acknowledgement 15-->
        <div class="multisteps-form__panel shadow sdcpaPanel {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='sdcpa' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">To protect you &amp; your privacy, we need to identify you!</h5>
            
            <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
                <div align="center"><b>Selfie</b></div><br/>
                <p class="card-text">We need you to take a selfie so there is a link between you and the documents you provide us. <br/><br/>
                                Click here for <a href="#" id="selfToolTip" >Selfie Instructions</a></p>
            </div>
            </div>
            <div style="margin-top:10px;display:none;">
                <c:AddAttachmentBtnComponent parentId="{!acctId}" isCommunitySite="true" DragDropHeight="100px"  BtnStandardColour="success" isBtnRounded="false" FileName="Selfie" CustomFileName="Attach Selfie" id="cp" />
            </div>
        </div>
        
        <!--single form panel selfie 16-->
        <div class="multisteps-form__panel shadow sdcpPanel {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='sdcp' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Selfie</h5>
            <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv" style="min-height:400px;">
                <div class="jumbotron vertical-center">
                <div class="container">
                <div class="row">
                <div class="col text-center">
                    <apex:image url="/servlet/servlet.FileDownload?file={!acct.Customer_Photo_Id__c}" width="180" height="180" alt="{!acct.Name}" rendered="{!IF(acct.Customer_Photo_Id__c <> null,true,false)}"/>
                <div style="padding-left:180px;" onClick="deleteSelfieFunc('{!acctId}'); return false;">
                    <i style="color:red;" class="fas fa-minus-circle"></i>
                </div>
                </div>
                </div>

                </div>
                </div>

            </div>
            </div>
            <div style="margin-top:10px;">
                <button class="btn btn-success ml-auto js-btn-next selfie-next" id="selfie-next" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>

        
        
        <!--single form panel 6-->
        <div class="multisteps-form__panel shadow biPanel {!IF((acctId!=null && acctId!='') &&($CurrentPage.parameters.param=='bi' || $CurrentPage.parameters.param=='' || $CurrentPage.parameters.param==null) && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Let&apos;s continue to get to know you - Your details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">First Name</label>
                <input class="multisteps-form__input form-control" id="firstName" value="{!firstNameVal}" type="text" placeholder="First Name"/>
                <input type="hidden" class="hdnCurrentPageVal" value="cd"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Last Name</label>
                <input class="multisteps-form__input form-control" id="lastName" value="{!lastNameVal}" type="text" placeholder="Last Name"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">Date of Birth</label>
                <input class="multisteps-form__input form-control" id="dob" type="text" value="{!dobVal}" onChange="ValidateDOB();" placeholder="Date of Birth" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Gender</label>
                <select id="genderType" class="multisteps-form__select form-control" value="{!genderVal}">
                  <option>--Select Gender--</option>
                  <option>Male</option>
                  <option>Female</option>
                  <option>Other</option>
                </select>
              </div>
            </div>
            <!--<div class="form-row p-1 mt-4">
                <div class="col">
                <label class="labelName">{!IF(stateMasterState=='NZ','WINZ No.','CRN')}</label>
                <input class="multisteps-form__input form-control" id="crn" type="text" value="{!crnVal}" placeholder="CRN No" />
            </div>
        </div>-->
            </div>
          </div>
          
          <div>
            <button class="btn btn-success ml-auto js-btn-next myinfo" id="myinfo" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
                      
        <!--single form panel 28-->
        <div class="multisteps-form__panel dependentsPanel dependPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='depend' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Let&apos;s continue to get to know you - Your details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Number of dependent children</label>
                    <input class="multisteps-form__input form-control noOfDependents" id="noOfDependents" type="text" placeholder="Number of dependent children"/>
                    <input type="hidden" class="hdnCurrentPageVal" value="depend"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Marital Status</label>
                    <select id="maritalStatus" class="multisteps-form__select form-control maritalStatus" value="{!maritalStatus}">
                      <option>--Select Marital Status--</option>
                      <option>Single</option>
                      <option>Married</option>
                      <option>Divorced</option>
                      <option>De Facto</option>
                      <option>other</option>
                    </select>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next dependentsNext" id="dependentsNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 7-->
        <div class="multisteps-form__panel shadow cdPanel {!IF((acctId!=null && acctId!='') &&($CurrentPage.parameters.param=='cd' || $CurrentPage.parameters.param=='' || $CurrentPage.parameters.param==null) && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Contact Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <label class="labelName">Mobile</label>
                <input class="multisteps-form__input form-control" id="phone" value="{!phoneVal}" type="text" placeholder="Phone"/>
            </div>
            <div class="form-row p-1 mt-4">
                <label class="labelName">Email</label>
                <input class="multisteps-form__input form-control" id="email" value="{!emailVal}" type="email" placeholder="Email"/>
            </div>
            </div>
          </div>
          <div style="margin-top:20px;">
            <button class="btn btn-success ml-auto js-btn-next contactDetails" id="contactDetails" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 25-->
        <div class="multisteps-form__panel mygovaddrAgreePanel mygovaddragPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='mygovaddrag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Mailing &amp; Delivery Address</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you want the following address to be your mailing &amp; delivery address? <br/>
                    <input type="hidden" class="hdnCurrentPageVal" value="mygovaddrag"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    <h5 class="font-weight-bold">{!mygovAddress}</h5>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="mygovaddrAgree" style="display:none;"/> 
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary mygovaddrAgreeYes" style="border-radius:15px;" onclick="$('.mygovaddrAgreeNo').removeClass('bg-success');$('.mygovaddrAgreeNo').addClass('bg-secondary');$('.mygovaddrAgreeYes').removeClass('bg-secondary');$('.mygovaddrAgreeYes').addClass('bg-success');$('.mygovaddrAgree').val('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary mygovaddrAgreeNo" style="border-radius:15px;" onclick="$('.mygovaddrAgreeYes').removeClass('bg-success');$('.mygovaddrAgreeYes').addClass('bg-secondary');$('.mygovaddrAgreeNo').removeClass('bg-secondary');$('.mygovaddrAgreeNo').addClass('bg-success');$('.mygovaddrAgree').val('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next mygovaddrAgreeNext" id="mygovaddrAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 25-->
        <div class="multisteps-form__panel bankaddrAgreePanel bankaddragPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='bankaddrag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Mailing &amp; Delivery Address</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you want the following address to be your mailing &amp; delivery address? <br/>
                    <input type="hidden" class="hdnCurrentPageVal" value="bankaddrag"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    <h5 class="font-weight-bold">{!mogoAddress}</h5>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="bankaddrAgree" style="display:none;"/> 
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary bankaddrAgreeYes" style="border-radius:15px;" onclick="$('.bankaddrAgreeNo').removeClass('bg-success');$('.bankaddrAgreeNo').addClass('bg-secondary');$('.bankaddrAgreeYes').removeClass('bg-secondary');$('.bankaddrAgreeYes').addClass('bg-success');$('.bankaddrAgree').val('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary bankaddrAgreeNo" style="border-radius:15px;" onclick="$('.bankaddrAgreeYes').removeClass('bg-success');$('.bankaddrAgreeYes').addClass('bg-secondary');$('.bankaddrAgreeNo').removeClass('bg-secondary');$('.bankaddrAgreeNo').addClass('bg-success');$('.bankaddrAgree').val('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next bankaddrAgreeNext" id="bankaddrAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        <!--single form panel 7-->
        <div class="multisteps-form__panel shadow addrPanel {!IF((acctId!=null && acctId!='') &&$CurrentPage.parameters.param=='addr' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Enter Your Current Address</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <apex:outputPanel id="currentAddressPanel">
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Street</label>                  
                <input type="hidden" class="hdnCurrentPageVal" value="addr"/>
                <input class="multisteps-form__input form-control txtCurrentAddress currentStreetAddress" type="text" id="streetName" placeholder="Address 1" data-address-attr="formatted_address"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Suburb</label>
                <input class="multisteps-form__input form-control currentSuburb" type="text" id="suburb" placeholder="Suburb" html-data-address-attr="suburb"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">State</label> 
                <input class="multisteps-form__input form-control currentState" type="text" id="state" placeholder="State" html-data-address-attr="state"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Postcode</label>
                <input id="postalCode" class="multisteps-form__input form-control currentPostcode" type="text" placeholder="Zip" html-data-address-attr="postcode"/>
                <input type="hidden" placeholder="name" data-address-attr="primary_name" value="0"/>
                <input type="hidden" class="currentCountry" id="currentCountry" html-data-address-attr="country"/>
                <input type="hidden" class="currentLatitude" id="currentLatitude" html-data-address-attr="geo_lat"/>
                <input type="hidden" class="currentLongitude" id="currentLongitude" html-data-address-attr="geo_lon"/>
              </div>
            </div>
            </apex:outputPanel>
            </div>          
          </div>
          <div style="margin-top:20px;">
            <button class="btn btn-success ml-auto js-btn-next addressDetailsNext" id="addressDetailsNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 25-->
        <div class="multisteps-form__panel addressproofPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='addressproof' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Current Mailing &amp; Delivery Address</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Does the address match the ID you provided to us earlier? <br/>
                    <input type="hidden" class="hdnCurrentPageVal" value="addressproof"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="addressproofAgree" style="display:none;"/> 
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary addressproofAgreeYes" style="border-radius:15px;" onclick="$('.addressproofAgreeNo').removeClass('bg-success');$('.addressproofAgreeNo').addClass('bg-secondary');$('.addressproofAgreeYes').removeClass('bg-secondary');$('.addressproofAgreeYes').addClass('bg-success');$('.addressproofAgree').val('yes');addressProofToggle('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary addressproofAgreeNo" style="border-radius:15px;" onclick="$('.addressproofAgreeYes').removeClass('bg-success');$('.addressproofAgreeYes').addClass('bg-secondary');$('.addressproofAgreeNo').removeClass('bg-secondary');$('.addressproofAgreeNo').addClass('bg-success');$('.addressproofAgree').val('no');addressProofToggle('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div style="display:none;">
                <c:AddAttachmentBtnComponent parentId="{!acctId}" isCommunitySite="true" DragDropHeight="100px"  BtnStandardColour="success" isBtnRounded="false" FileName="Address proof of ID" id="ptAddress" CustomFileName="Attach ID with Address Proof" />
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next addressproofNext" id="addressproofNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        <!--single form panel 22-->
        <div class="multisteps-form__panel cuadPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='cuad' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Current Address Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
                <div class="form-row p-1 mt-4">
                    <div class="col">
                        <label class="labelName">Length of Stay (Months)</label>
                        <input class="multisteps-form__input form-control lengthOfStayCurrent" id="lengthOfStayCurrent" type="text" placeholder="Length of Stay (Months)"/>
                        <input type="hidden" class="hdnCurrentPageVal" value="cuad"/>
                    </div>
                </div>
                <div class="form-row p-1 mt-4">
                    <div class="col">
                        <label class="labelName">Residential Status</label>
                        <select id="residentialStatus" class="multisteps-form__select form-control residentialStatus" value="{!residentialStatus}" onchange="toggleResidentialContact();">
                            <option>--Select Residential Status--</option>
                            <option>Renting</option>
                            <option>Boarding</option>
                            <option>Commission Housing/Accommodation</option>
                            <option>Living with parents</option>
                            <option>Mortgage debt / Own outright (no debt)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row p-1 mt-4 landlordDetails" style="display:none;">
                    <div class="col">
                        <label class="labelName">Contact Name</label>
                        <input type="hidden" class="hdnCurrentPageVal" value="land"/>
                        <input class="multisteps-form__input form-control landlordName" id="landlordName" value="{!landlordName}" type="text" placeholder="Landlord Name"/>
                    </div>
                </div>
                <div class="form-row p-1 mt-4 landlordDetails" style="display:none;">
                    <div class="col">
                        <label class="labelName">Contact Number</label>
                        <input class="multisteps-form__input form-control landlordNumber" id="landlordNumber" value="{!landlordNumber}" type="text" placeholder="Landlord Number"/>
                    </div>
                </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next currentAddressNext" id="currentAddressNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 24-->
        <div class="multisteps-form__panel previousAddressPanel pradPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='prad' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Previous Address Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Street</label>                  
                <input type="hidden" class="hdnCurrentPageVal" value="addr"/>
                <input class="multisteps-form__input form-control txtPreviousAddress previousStreetAddress" type="text" id="streetName" placeholder="Address 1" data-address-attr="formatted_address"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Suburb</label>
                <input class="multisteps-form__input form-control previousSuburb" type="text" id="suburb" placeholder="Suburb" html-data-address-attr="suburb"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">State</label> 
                <input class="multisteps-form__input form-control previousState" type="text" id="state" placeholder="State" html-data-address-attr="state"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
              <div class="col">
                <label class="labelName">Postcode</label>
                <input id="postalCode" class="multisteps-form__input form-control previousPostcode" type="text" placeholder="Zip" html-data-address-attr="postcode"/>
                <input type="hidden" placeholder="name" data-address-attr="primary_name" value="0"/>
                <input type="hidden" class="previousCountry" id="previousCountry" html-data-address-attr="country"/>
                <input type="hidden" class="previousLatitude" id="previousLatitude" html-data-address-attr="geo_lat"/>
                <input type="hidden" class="previousLongitude" id="previousLongitude" html-data-address-attr="geo_lon"/>
              </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Length of Stay (Months)</label>
                    <input class="multisteps-form__input form-control lengthOfStayPrevious" id="lengthOfStayPrevious" type="text" placeholder="Length of Stay (Months)"/>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next previousAddressNext" id="previousAddressNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel employmentAgreePanel employmentagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='employmentag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Fortnightly Employment Income</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <apex:outputPanel id="mogoEmploymentDiv">
            <div class="form-row p-1 mt-4">
                <p>Employment Income from bank statement and income statement is&nbsp;<apex:outputText value="{0,number,currency}" styleClass="font-weight-bold mogoEmploymentVal"><apex:param value="{!mogoEmployment}"/></apex:outputText></p>
                <input type="hidden" class="hdnCurrentPageVal" value="employmentag"/>
            </div>
            </apex:outputPanel>
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you agree? 
                </div>
                <div class="col-1">
                    
                </div>
            </div> 
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="employmentAgree" style="display:none;"/>
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary employmentAgreeYes" style="border-radius:15px;" onclick="$('.employmentAgreeNo').removeClass('bg-success');$('.employmentAgreeNo').addClass('bg-secondary');$('.employmentAgreeYes').removeClass('bg-secondary');$('.employmentAgreeYes').addClass('bg-success');$('.employmentAgree').val('yes');$('.fnightlyEmploymentDiv').css('display','none');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary employmentAgreeNo" style="border-radius:15px;" onclick="$('.employmentAgreeYes').removeClass('bg-success');$('.employmentAgreeYes').addClass('bg-secondary');$('.employmentAgreeNo').removeClass('bg-secondary');$('.employmentAgreeNo').addClass('bg-success');$('.employmentAgree').val('no');$('.fnightlyEmploymentDiv').css('display','');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="form-row p-1 mt-4 fnightlyEmploymentDiv" style="display:none;">
                <div class="col">
                    <label class="labelName">How much is your fortnightly employment income?</label>
                    <input class="multisteps-form__input form-control fnightlyEmployment" id="fnightlyEmployment" type="text" placeholder="How much is your fortnightly employment income?"/>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next employmentAgreeNext" id="employmentAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        
        <!--single form panel 33-->
        <div class="multisteps-form__panel empincAgreePanel empincagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='empincag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Employment Income</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you have an employment income? 
                    <input type="hidden" class="hdnCurrentPageVal" value="empincag"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div> 
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="empincAgree" style="display:none;"/>
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary empincAgreeYes" style="border-radius:15px;" onclick="$('.empincAgreeNo').removeClass('bg-success');$('.empincAgreeNo').addClass('bg-secondary');$('.empincAgreeYes').removeClass('bg-secondary');$('.empincAgreeYes').addClass('bg-success');$('.empincAgree').val('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary empincAgreeNo" style="border-radius:15px;" onclick="$('.empincAgreeYes').removeClass('bg-success');$('.empincAgreeYes').addClass('bg-secondary');$('.empincAgreeNo').removeClass('bg-secondary');$('.empincAgreeNo').addClass('bg-success');$('.empincAgree').val('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next empincAgreeNext" id="empincAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel employmentPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='employment' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Fortnightly Employment Income</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <input type="hidden" class="hdnCurrentPageVal" value="employment"/>
            </div>
            <div class="form-row p-1 mt-4 fnightlyEmploymentManualDiv">
                <div class="col">
                    <label class="labelName">How much is your fortnightly employment income?</label>
                    <input class="multisteps-form__input form-control fnightlyEmploymentManual" id="fnightlyEmploymentManual" type="text" placeholder="How much is your fortnightly employment income?"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">What is the name of your employer?</label>
                    <input class="multisteps-form__input form-control employerName" id="employerName" type="text" placeholder="What is the name of your employer?"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Employment Type</label>
                    <select id="employmentType" class="multisteps-form__select form-control employmentType">
                      <option>--Select--</option>
                      <option>Casual</option>
                      <option>Part-Time</option>
                      <option>Full-Time</option>
                    </select>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Employment Commencement Date</label>
                    <input class="multisteps-form__input form-control employmentDate" id="employmentDate" type="text" placeholder="Employment Commencement Date?" onclick="$(this).datepicker({ dateFormat: 'dd/mm/yy' });$(this).datepicker('show');"/>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next employmentNext" id="employmentNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
                
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel cbenagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='cbenag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your {!IF(stateMasterState=='NZ','WINZ','Centrelink')} Benefit Income</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <span class="cbenNameVal font-weight-bold"></span>&nbsp;Benefit amount from {!IF(stateMasterState=='NZ','WINZ','myGov')} is $<span class="cbenMygovVal font-weight-bold"></span>
                <input type="hidden" class="hdnCurrentPageVal" value="cbenag"/>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you agree? 
                </div>
                <div class="col-1">
                    
                </div>
            </div> 
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="cbenAgree" style="display:none;"/>
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary cbenAgreeYes" style="border-radius:15px;" onclick="$('.cbenAgreeNo').removeClass('bg-success');$('.cbenAgreeNo').addClass('bg-secondary');$('.cbenAgreeYes').removeClass('bg-secondary');$('.cbenAgreeYes').addClass('bg-success');$('.cbenAgree').val('yes');$('.cbenManualDiv').css('display','none');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary cbenAgreeNo" style="border-radius:15px;" onclick="$('.cbenAgreeYes').removeClass('bg-success');$('.cbenAgreeYes').addClass('bg-secondary');$('.cbenAgreeNo').removeClass('bg-secondary');$('.cbenAgreeNo').addClass('bg-success');$('.cbenAgree').val('no');$('.cbenManualDiv').css('display','');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="form-row p-1 mt-4 cbenManualDiv" style="display:none;">
                <div class="col">
                    <label class="labelName">How much do you recieve per fortnight?</label>
                    <input class="multisteps-form__input form-control cbenManualVal" id="cbenManualVal" type="text" placeholder="How much do you recieve per fortnight?"/>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next cbenAgreeNext" id="cbenAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 33-->
        <div class="multisteps-form__panel cbenincAgreePanel cbenincagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='cbenincag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your {!IF(stateMasterState=='NZ','WINZ','Centrelink')} Benefit Income</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Do you receive any benefits from {!IF(stateMasterState=='NZ','WINZ','Centrelink')}? 
                    <input type="hidden" class="hdnCurrentPageVal" value="cbenincag"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="cbenincAgree" style="display:none;"/>
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary cbenincAgreeYes" style="border-radius:15px;" onclick="$('.cbenincAgreeNo').removeClass('bg-success');$('.cbenincAgreeNo').addClass('bg-secondary');$('.cbenincAgreeYes').removeClass('bg-secondary');$('.cbenincAgreeYes').addClass('bg-success');$('.cbenincAgree').val('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary cbenincAgreeNo" style="border-radius:15px;" onclick="$('.cbenincAgreeYes').removeClass('bg-success');$('.cbenincAgreeYes').addClass('bg-secondary');$('.cbenincAgreeNo').removeClass('bg-secondary');$('.cbenincAgreeNo').addClass('bg-success');$('.cbenincAgree').val('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next cbenincAgreeNext" id="cbenincAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel clinkbenPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='clinkben' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your {!IF(stateMasterState=='NZ','WINZ','Centrelink')} Benefits</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                Select the benefits you receive: (you may select more than one)
                <input type="hidden" class="hdnCurrentPageVal" value="clinkben"/>
            </div>
            <div class="form-row p-1 mt-4">
                <select class="js-example-basic-multiple clinkBenefitsSelected" multiple="multiple" style="width:100%;">
                    <apex:repeat value="{!clinkBenefitOptions}" var="ben">
                        <option>{!ben}</option>
                    </apex:repeat>
                </select>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next clinkbenNext" id="clinkbenNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel clinkPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='clink' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4 clinkBenefitName"></h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                Enter the amount you receive per fortnight from&nbsp;<span class="clinkBenefitName font-weight-bold"></span>:
                <input type="hidden" class="hdnCurrentPageVal" value="clink"/>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">How much do you recieve per fortnight?</label>
                    <input type="text" class="multisteps-form__input form-control clinkBenefitVal" placeholder="How much do you recieve per fortnight?"/>
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next clinkNext" id="clinkNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 33-->
        <div class="multisteps-form__panel otherincAgreePanel otherincagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='otherincag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Other Income Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
                <apex:outputPanel rendered="{!IF(otherInc != null && otherInc > 0,true,false)}">
                    <div class="form-row p-1 mt-4">
                        <p>Total other income from bank statement and income statement is&nbsp;<apex:outputText value="{0,number,currency}" styleClass="font-weight-bold otherIncVal"><apex:param value="{!otherInc}"/></apex:outputText></p>
                    </div>
                    <div class="form-row p-1 mt-4">
                        <div class="col-1">
                            
                        </div>
                        <div class="col-10 text-center font-weight-bold">
                            Do you agree?
                        </div>
                        <div class="col-1">
                            
                        </div>
                    </div>
                    <div class="row p-1 text-center" style="margin-top:50px;">
                        <div class="col-1">
                            <input type="text" class="otherIncAgree" style="display:none;"/>
                        </div>
                        <div class="col-5" style="cursor:pointer;">
                            <div class="card text-white bg-secondary otherIncAgreeYes" style="border-radius:15px;" onclick="$('.otherIncAgreeNo').removeClass('bg-success');$('.otherIncAgreeNo').addClass('bg-secondary');$('.otherIncAgreeYes').removeClass('bg-secondary');$('.otherIncAgreeYes').addClass('bg-success');$('.otherIncAgree').val('yes');$('.fnightlyOtherIncDiv').css('display','none');">
                                <div class="card-body">
                                <h2 class="card-title">Yes</h2>
                                </div>
                            </div>
                        </div>
        
                        <div class="col-5" style="cursor:pointer;">
                            <div class="card text-white bg-secondary otherIncAgreeNo" style="border-radius:15px;" onclick="$('.otherIncAgreeYes').removeClass('bg-success');$('.otherIncAgreeYes').addClass('bg-secondary');$('.otherIncAgreeNo').removeClass('bg-secondary');$('.otherIncAgreeNo').addClass('bg-success');$('.otherIncAgree').val('no');$('.fnightlyOtherIncDiv').css('display','');$('.fnightlyOtherInc').val('');">
                                <div class="card-body">
                                <h2 class="card-title">No</h2>
                                </div>
                            </div>
                        </div>
                        <div class="col-1">
                            
                        </div>
                    </div>
                    <div class="form-row p-1 mt-4 fnightlyOtherIncDiv" style="display:none;">
                        <div class="col">
                            <label class="labelName">How much is your fortnightly other income?</label>
                            <input class="multisteps-form__input form-control fnightlyOtherInc" id="fnightlyOtherInc" type="text" placeholder="How much is your fortnightly other income?" />
                        </div>
                    </div>
                </apex:outputPanel>
                <apex:outputPanel rendered="{!IF(otherInc != null && otherInc > 0,false,true)}">
                    <div class="form-row p-1 mt-4">
                        <div class="col-1">
                            
                        </div>
                        <div class="col-10 text-center font-weight-bold">
                            Do you have any other income? 
                            <input type="hidden" class="hdnCurrentPageVal" value="otherincag"/>
                        </div>
                        <div class="col-1">
                            
                        </div>
                    </div>
                    <div class="row p-1 text-center" style="margin-top:50px;">
                        <div class="col-1">
                            <input type="text" class="otherincAgree" style="display:none;"/>
                        </div>
                        <div class="col-5" style="cursor:pointer;">
                            <div class="card text-white bg-secondary otherincAgreeYes" style="border-radius:15px;" onclick="$('.otherincAgreeNo').removeClass('bg-success');$('.otherincAgreeNo').addClass('bg-secondary');$('.otherincAgreeYes').removeClass('bg-secondary');$('.otherincAgreeYes').addClass('bg-success');$('.otherincAgree').val('yes');">
                            <div class="card-body">
                                <h2 class="card-title">Yes</h2>
                            </div>
                            </div>
                        </div>

                        <div class="col-5" style="cursor:pointer;">
                            <div class="card text-white bg-secondary otherincAgreeNo" style="border-radius:15px;" onclick="$('.otherincAgreeYes').removeClass('bg-success');$('.otherincAgreeYes').addClass('bg-secondary');$('.otherincAgreeNo').removeClass('bg-secondary');$('.otherincAgreeNo').addClass('bg-success');$('.otherincAgree').val('no');">
                            <div class="card-body">
                                <h2 class="card-title">No</h2>
                            </div>
                            </div>
                        </div>
                        <div class="col-1">
                            
                        </div>
                    </div>
                </apex:outputPanel>  
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next otherincAgreeNext" id="otherincAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 32-->
        <div class="multisteps-form__panel incomeotherPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='incomeother' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Other Income Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">
            <div class="form-row p-1 mt-4">
                <input type="hidden" class="hdnCurrentPageVal" value="incomeother"/>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">What is the source of your other income?</label>
                    <select id="incomeOtherSourceSelected" class="multisteps-form__select form-control incomeOtherSourceSelected" onchange="if($(this).val()=='Other'){$('.incomeOtherSourceDiv').css('display','');}else{$('.incomeOtherSourceDiv').css('display','none');}">
                      <option>--Select source of income--</option>
                      <option>Boarding</option>
                      <option>Child Maintenance/Support (CSA)</option>
                      <option>Rental Income</option>
                      <option>Other</option>
                    </select>
                </div>
            </div>
            <div class="form-row p-1 mt-4 incomeOtherSourceDiv" style="display:none;">
                <div class="col">
                    <label class="labelName">Please enter the source of your other income</label>
                    <input class="multisteps-form__input form-control incomeOtherSource" id="incomeOtherSource" type="text" placeholder="Please enter the source of your other income"/>
                </div>
            </div>
            <apex:outputPanel rendered="{!IF(otherInc != null && otherInc > 0,false,true)}">
                <div class="form-row p-1 mt-4">
                    <div class="col">
                        <label class="labelName">How much income do you receive per fortnight?</label>
                        <input class="multisteps-form__input form-control fnightlyIncomeOther" id="fnightlyIncomeOther" type="text" placeholder="How much income do you receive per fortnight?"/>
                    </div>
                </div>
            </apex:outputPanel>
            <div class="form-row p-1 mt-4" style="display:none;">
                <input class="multisteps-form__input form-control incomeOtherVerify" style="width:20px;height:20px;" type="checkbox" checked="true"/>&nbsp;&nbsp;Can the income be verified in your bank statements?
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next incomeOtherNext" id="incomeOtherNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 33-->
        <div class="multisteps-form__panel boardingAgreePanel boardingagPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='boardingag' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Other Income Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col-1">
                    
                </div>
                <div class="col-10 text-center font-weight-bold">
                    Is there a person who can confirm your other income activity?
                    <input type="hidden" class="hdnCurrentPageVal" value="boardingag"/>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            <div class="row p-1 text-center" style="margin-top:50px;">
                <div class="col-1">
                    <input type="text" class="boardingAgree" style="display:none;"/>
                </div>
                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary boardingAgreeYes" style="border-radius:15px;" onclick="$('.boardingAgreeNo').removeClass('bg-success');$('.boardingAgreeNo').addClass('bg-secondary');$('.boardingAgreeYes').removeClass('bg-secondary');$('.boardingAgreeYes').addClass('bg-success');$('.boardingAgree').val('yes');">
                      <div class="card-body">
                        <h2 class="card-title">Yes</h2>
                      </div>
                    </div>
                </div>

                <div class="col-5" style="cursor:pointer;">
                    <div class="card text-white bg-secondary boardingAgreeNo" style="border-radius:15px;" onclick="$('.boardingAgreeYes').removeClass('bg-success');$('.boardingAgreeYes').addClass('bg-secondary');$('.boardingAgreeNo').removeClass('bg-secondary');$('.boardingAgreeNo').addClass('bg-success');$('.boardingAgree').val('no');">
                      <div class="card-body">
                        <h2 class="card-title">No</h2>
                      </div>
                    </div>
                </div>
                <div class="col-1">
                    
                </div>
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next boardingAgreeNext" id="boardingAgreeNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        
        
        <!--single form panel 31-->
        <div class="multisteps-form__panel incomeotherSharingPanel incomeothershPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='incomeothersh' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
          <h5 class="multisteps-form__title mt-4 mb-4">Your Other Income Details</h5>
          <div class="multisteps-form__content whiteDiv">
            <div class="silverDiv">  
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Full name of the person who can confirm your other income activity</label>    
                    <input class="multisteps-form__input form-control incomeOtherSharingName" id="incomeOtherSharingName" type="text" onchange="onChangeSharingName(this,'.incomeOtherSharingNameDisplay');"/>
                    <input type="hidden" class="hdnCurrentPageVal" value="incomeothersh"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Mobile number of the person who can confirm your other income activity</label> 
                    <input class="multisteps-form__input form-control incomeOtherSharingNumber" id="incomeOtherSharingNumber" type="text"/>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <div class="col">
                    <label class="labelName">Relationship to you</label>
                    <select id="incomeOtherSharingRelation" class="multisteps-form__select form-control incomeOtherSharingRelation">
                      <option>--Select Relationship to you--</option>
                      <option>Family Member</option>
                      <option>Friend</option>
                      <option>Employer / Work Colleague</option>
                      <option>Landlord</option>
                    </select>
                </div>
            </div>
            <div class="form-row p-1 mt-4">
                <input class="multisteps-form__input form-control incomeOtherSharingContact" style="width:20px;height:20px;" type="checkbox" checked="true"/>&nbsp;&nbsp;Do you want us to contact&nbsp;<span class="incomeOtherSharingNameDisplay"></span>&nbsp;to confirm your income?
            </div>
            <div class="form-row p-1 mt-4">
                <input class="multisteps-form__input form-control incomeOtherSharingReferee" style="width:20px;height:20px;" type="checkbox" checked="true"/>&nbsp;&nbsp;Add&nbsp;<span class="incomeOtherSharingNameDisplay"></span>&nbsp;as a character referee? 
            </div>
            </div>
          </div>
          <div style="margin-top:50px;">
            <button class="btn btn-success ml-auto js-btn-next incomeOtherSharingNext" id="incomeOtherSharingNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
          </div>
        </div>
        

        <!--single form panel 31-->
        <div class="multisteps-form__panel extTransPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='extTrans' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Financial Information - Additional Information</h5>
            <div class="multisteps-form__content whiteDiv">
                <div class="silverDiv">  
                    <div class="form-row p-1 mt-4">
                        <p>We have noticed external transfer of {!externalTransferTransactionCount} transaction of <apex:outputText value="{0,number,currency}"><apex:param value="{!externalTransferDebitCount}"/></apex:outputText> </p>
                    </div>
                    <div class="form-row p-1 mt-4">
                        <div class="col">
                            <label class="labelName">Please provide the relationship of the transfer:</label>
                        </div>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="transferRelationship transferRelationship1 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="transferRelationship1val" style="display:inline;">Into my other savings account</span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="transferRelationship transferRelationship2 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="transferRelationship2val" style="display:inline;">Sharing expenses with my partner</span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="transferRelationship transferRelationship3 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="transferRelationship3val" style="display:inline;">One-off purchase/s</span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="transferRelationship transferRelationship4 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="transferRelationship4val" style="display:inline;">Reimbursement</span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="transferRelationship transferRelationship5 transferRelationshipOtherCheckbox ml-1" style="width:20px;height:20px;display:inline;" type="checkbox" onclick="toggleTransferRelationship(this);"/>&nbsp;&nbsp;<span class="transferRelationship5val" style="display:inline;">Other </span> <br/>
                    </div>
                    <div class="form-row p-1 mt-4 transferRelationshipOtherDiv" style="display:none;">
                        <div class="col">
                            <textarea class="form-control transferRelationshipOther" rows="3" placeholder="explanation for transfers..."/>
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top:50px;">
              <button class="btn btn-success ml-auto js-btn-next transferRelationshipNext" id="transferRelationshipNext" style="width:100%;display:none;" type="button" title="Next">Next</button>
            </div>
        </div>


        <!--single form panel 31-->
        <div class="multisteps-form__panel finTermsPanel shadow {!IF((acctId!=null && acctId!='') && $CurrentPage.parameters.param=='finTerms' && !ishybridLinkCompleted, 'js-active','')}" data-animation="scaleIn">
            <h5 class="multisteps-form__title mt-4 mb-4">Responsible Lending Acknowledgement</h5>
            <div class="multisteps-form__content whiteDiv">
                <div class="silverDiv">
                    <div class="p-1 mt-2 mb-2">
                        Tick to acknowledge before you lodge your Preliminary Unsuitability Assessment application:
                    </div>  
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms1 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms1val" style="display:inline;">I understand that the information provided in my PUA application will be used to assess my suitability for a Sale of Goods by Instalment (Instalment Agreement) loan. </span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms2 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms2val" style="display:inline;">I acknowledge that I am responsible for providing accurate and complete information about my financial status. </span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms3 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms3val" style="display:inline;">I understand that my credit history may be checked as part of this assessment. </span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms4 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms4val" style="display:inline;">I acknowledge that it is my responsibility to inform R4K Licensing of any changes in my circumstances during the application process. </span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms5 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms5val" style="display:inline;">I am aware the information I am providing is to determine if I can afford the proposed Instalment Loan or credit product. </span> <br/>
                    </div>
                    <div class="p-1 mt-2">
                        <input class="finTerms finTerms6 ml-1" style="width:20px;height:20px;display:inline;" type="checkbox"/>&nbsp;&nbsp;<span class="finTerms6val" style="display:inline;">I understand that I am not obliged to proceed with the application, and I can withdraw at any time before accepting the Credit Proposal &amp; Preliminary Unsuitability Assessment decision.  </span> <br/>
                    </div>
                    <div class="p-1 mt-4 mb-2">
                        By ticking each of these statements, I confirm my understanding and acceptance of the responsible lending practices involved in the Preliminary Unsuitability Assessment process.
                    </div> 
                </div>
            </div>
            <div style="margin-top:50px;">
              <button class="btn btn-success ml-auto js-btn-next financialTermsNext" id="financialTermsNext" style="width:100%;display:none;" type="button" title="Submit my PUA Application">Submit my PUA Application</button>
            </div>
        </div>
        
        
      </form>
     </div>
  </div>
</div>


        <div class="lastDiv" style="min-height:50px;">
            <p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
        </div>

</div>


<!-- The Modal -->
<div class="modal" id="addRefereeModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h4 class="modal-title"><span id="modalHeading">Confirm the mobile number for </span><span class="spnRefName"></span></h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
          <input class="multisteps-form__input form-control addRfMobNo" id="addRfMobNo" value="{!addRfMobNo}" type="text" placeholder="04********"/>
          <input class="hdnRefId" type="hidden" />
          <!--<textarea class="multisteps-form__textarea form-control" id="modalComments" placeholder="Provide explanation for Defaults"></textarea>-->
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-success" onClick="addPreviousRefereeRecordFunc();">Add</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>

<script>
$(".mainBtn").click(function(){
    var buttonInputClassName = $(".js-active").find(":button").attr('class');
    var buttonInputIdName = $(".js-active").find(":button").attr('id');
    console.log(buttonInputIdName+' ---- '+buttonInputClassName);
    var refereeValue = "{!IF(prevRefContactList=null || prevRefContactList.size = 0 || (prevRefContactList.size > 0 && (currentprevRefId==null || currentprevRefId=='') && prevRefIds=='none' ) , 'addMore', 'prev')}";
    console.log('##refereeValue: '+refereeValue);
    if(typeof buttonInputIdName === 'undefined' && buttonInputClassName!='select2-selection__choice__remove' && buttonInputIdName!='addMoreRef')
    {
        console.log('##undefinedValue '+buttonInputClassName);
        var fileInputIdName = $(".js-active").find(":file").attr('id');
        if(typeof fileInputIdName === 'undefined')
            console.log('##undefinedValue '+fileInputIdName);
        else{
            $('#'+fileInputIdName).click();
            return false;
        }
    }
    else if(buttonInputIdName=='photoid-next')
    {
        if($("#idType").val()=='Driver License' || ($("#idType").val()=='Passport' && $("#passportCountry").val()!='Australia'))
        {
            var fileInputIdName = $(".js-active").find(":file").attr('id');
            if(typeof fileInputIdName === 'undefined')
            console.log('##undefinedValue-photoid-next '+fileInputIdName);
            else{
                $('#'+fileInputIdName).click();
                return false;
            }
        }
        else
        {
            if($("#driverLicence").val()!=null && $("#driverLicence").val()!='')
            {
                $('#'+buttonInputIdName).click();
            }
            else{
                bootbox.alert({
                    message: "Please enter your identification number before proceeding.",
                    className: 'rubberBand animated'
                });
                return false;
            }
        }
    } 
    else if(buttonInputIdName=='bankStDummy')
    {
        bootbox.alert({
            message: "Please add your bank statement before proceeding",
            className: 'rubberBand animated'
        });
    } 
    else if(buttonInputClassName=='select2-selection__choice__remove')    
    {
        $('#clinkbenNext').click();
        return false;
    }
    else if(buttonInputIdName=='addMoreRef')
    {
        if(refereeValue=='prev')
            $('#prev-ref').click();
        else
            $('#addMoreRef').click();
    } 
    else if(buttonInputIdName=='addressproofNext')
    {
        console.log("##optionSelected: "+optionSelected);
        if(optionSelected=='no')
        {
            var fileInputIdName = $(".js-active").find(":file").attr('id');
            if(typeof fileInputIdName === 'undefined')
            console.log('##undefinedValue-addressproofNext '+fileInputIdName);
            else{
                $('#'+fileInputIdName).click();
                return false;
            }
        }
        else if(optionSelected=='')
        {
            bootbox.alert({
                message: "Please select Yes or No",
                className: 'rubberBand animated'
            });
        }
        else
        {
            toggleResidentialContact();
            $('#'+buttonInputIdName).click();
        }
    } 
    else if(buttonInputIdName=='comp-process')
    {
        $('#'+buttonInputIdName).click();
        $('.fixed-bottom').css('display','none');
    }
    else{
        $('#'+buttonInputIdName).click();
    }
    return false;
});
    
//alert("https://scv-test.bankstatements.com.au/iframe/RFKM-{!customerNo}");
var isMyGovSelected = false;
var acctId = "{!acctId}";
var ldId = "{!ldId}";
var redo = "{!redo}";
var optionSelected = "";
var hasCompletedMyGovStatement = "{!hasCompletedMyGov}";
var mogoCentrelinkIncome = parseFloat("{!mogoCentrelinkIncome}");
var furtherNextOnlineStepParam = "{!furtherNextOnlineStepParam}";
var custPhotoAtt = "{!custPhotoAtt}";
var allRefMobileNos = {!allRefMobileNosStr};
//alert(allRefMobileNos.length+" ---  "+allRefMobileNos);

var onlineURL =  '{!onlineURL}';

function receiveMessage(event)
{
//console.log(event);
//console.log('POST MESSAGE data=' + event.data);
//console.log('POST MESSAGE origin=' + event.origin);

try {
  var obj = JSON.parse(event.data); 
  console.log('status: '+obj.status+' event: '+obj.event+' institution: '+obj.data);
  if(obj.status=='success' && obj.event=='submit_all')
  {
      //alert('hasCompletedMyGovStatement: '+hasCompletedMyGovStatement);
      var randomNumber = Math.random();
      var bankStNextParamVal = "sdcpa";
      if(custPhotoAtt!=null && custPhotoAtt!="" && (furtherNextOnlineStepParam=="sdmg" || furtherNextOnlineStepParam==null || furtherNextOnlineStepParam==""))
          bankStNextParamVal = "cons";
      else if(custPhotoAtt!=null && custPhotoAtt!="" && furtherNextOnlineStepParam!=null && furtherNextOnlineStepParam!="" && furtherNextOnlineStepParam!="sdmg")
          bankStNextParamVal = furtherNextOnlineStepParam;
          
      var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber;
      if(redo=='yes')
          redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&redo=yes&n='+randomNumber;
          
      if(hasCompletedMyGovStatement=="true")
      {
          if('{!acct.RO_Online__c}' == 'false')
          {
              bankStNextParamVal = "cons";
          }else if('{!acct.Basic_Info_Online__c}' == 'false')
          {
              bankStNextParamVal = "bi";
          }else if('{!acct.Expense_Online__c}' == 'false')
          {
              bankStNextParamVal = "rentag";
          }else if('{!acct.Income_Online__c}' == 'false')
          {
              bankStNextParamVal = "empincag";
          }else if('{!acct.Referees_Online__c}' == 'false' || '{!acct.Equifax_Online__c}' == 'false')
          {
              bankStNextParamVal = "ref";
          }else
          {
              bankStNextParamVal = 'com';    
          }
          
          redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber;
          if(redo=='yes')
              redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&redo=yes&n='+randomNumber;
          
          bootbox.alert({
                message: "Successfully added bank statement",
                className: 'rubberBand animated',
                callback: function () { window.location.href = redirectURL; }
            });
      }
      else 
      {
          if('{!stateMasterState}' == 'NZ')
          {
              redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwg&n='+randomNumber;
                if(redo=='yes')
                    redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwg&n='+randomNumber+'&redo=yes';
                window.location.href = redirectURL;
          }else
          {
              bootbox.confirm({
                    message: "Successfully added bank statement. Do you receive income from centrelink?",
                    buttons: {
                        confirm: {
                            label: 'Yes',
                            className: 'btn-success'
                        },
                        cancel: {
                            label: 'No',
                            className: 'btn-danger'
                        }
                    },
                    callback: function (result) {
                        if(result==true)
                        {
                            //alert("I receive payments from centrelink");
                            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdmg&n='+randomNumber;
                            if(redo=='yes')
                                redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdmg&n='+randomNumber+'&redo=yes';
                            window.location.href = redirectURL;
                        }
                        else
                        {
                            //alert("No centrelink payments");
                            //window.location.href = redirectURL;
                            activePanelNum = 0;
                            window.redirectToNextExpense = 'yes';
                            skipMygovStatementFunc();
                        }
                    }
                });
            }
      } 
  }
  /*else if(obj.status=='success' && obj.event=='submission_complete')
  {
      isMyGovSelected = true;
      var randomNumber = Math.random();
      var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=bi&n='+randomNumber;
      if(redo!=null && redo=='yes')
          redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=bi&redo=yes&n='+randomNumber;
      bootbox.alert({
            message: "Successfully added myGov",
            className: 'rubberBand animated',
            callback: function () { window.location.href = redirectURL; }
        });
  }*/
}
catch(err) {
  console.log('error: '+err.message);
  if(event!=null && event.data!=null && event.data=='COMPLETE')
  {
      isMyGovSelected = true;
      console.log('##isMyGovSelected: '+isMyGovSelected);
  }
}
}
window.addEventListener("message", receiveMessage, false);

//DOM elements
const DOMstrings = {
  stepsBtnClass: 'multisteps-form__progress-btn',
  stepsBtns: document.querySelectorAll(`.multisteps-form__progress-btn`),
  stepsBar: document.querySelector('.multisteps-form__progress'),
  stepsForm: document.querySelector('.multisteps-form__form'),
  stepsFormTextareas: document.querySelectorAll('.multisteps-form__textarea'),
  stepFormPanelClass: 'multisteps-form__panel',
  stepFormPanels: document.querySelectorAll('.multisteps-form__panel'),
  stepPrevBtnClass: 'js-btn-prev',
  stepNextBtnClass: 'js-btn-next',
  existOptsBtnClass: 'exist-opts', 
  newOptsBtnClass: 'new-opts' ,
  newProdBtnClass: 'new-prod',
  acctExistBtnClass: 'acct-exist',
  serviceEnqBtnClass: 'service-enq',
  prevLeadConfirmBtnClass: 'previous-leadConfirm',
  nextLeadConfirmBtnClass: 'next-leadConfirm',
  nextLeadConfirmSt2BtnClass: 'next-ldSt2Confirm',
  consumerLeaseNextBtnClass: 'consumerLease',
  myInfoBtnClass: 'myinfo',
  contactDetailsBtnNextClass: 'contactDetails',
  compProcessBtnClass: 'comp-process',
  selfieNextBtnClass: 'selfie-next',
  photoIdNextBtnClass: 'photoid-next',
  bankNextBtnClass: 'bank-next',
  bankNextRedoBtnClass: 'bank-next-redo',
  mygovNextRedoBtnClass: 'mygov-next-redo',
  myGovNextBtnClass: 'mygov-next',
  winzPrevBtnClass: 'winz-prev',
  winzNextBtnClass: 'winz-next',
  proofOfIncomeBtnClass: 'proof-of-income',
  otherIdNextBtnClass: 'otherid-next',
  otherIdPrevBtnClass: 'otherid-prev',
  addMoreRefNextBtnClass: 'addMoreRef',
  compRefNextBtnClass: 'comp-ref',
  prevRefNextBtnClass: 'prev-ref',
  eqEnqNextBtnClass: 'eqEnqNext',
  eqRentalDefaultNextBtnClass: 'eqRentalDefaultNext',
  eqNonRentalDefaultNextBtnClass: 'eqNonRentalDefaultNext',
  consNextBtnClass : 'consNext',
  productNextBtnClass : 'productNext',
  currentAddressNextBtnClass : 'currentAddressNext',
  previousAddressNextBtnClass : 'previousAddressNext',
    dependentsNextBtnClass : 'dependentsNext',
  rentSharingNextBtnClass : 'rentSharingNext',
  foodSharingNextBtnClass : 'foodSharingNext',
  clothingSharingNextBtnClass : 'clothingSharingNext',
  utilSharingNextBtnClass : 'utilSharingNext',
  transSharingNextBtnClass : 'transSharingNext',
  mobileSharingNextBtnClass : 'mobileSharingNext',
  creditSharingNextBtnClass : 'creditSharingNext',
orentalSharingNextBtnClass : 'orentalSharingNext',
oregularSharingNextBtnClass : 'oregularSharingNext',
insurSharingNextBtnClass : 'insurSharingNext',
loanSharingNextBtnClass : 'loanSharingNext',
  rentAgreeNextBtnClass : 'rentAgreeNext',
  foodAgreeNextBtnClass : 'foodAgreeNext',
  clothingAgreeNextBtnClass : 'clothingAgreeNext',
  utilAgreeNextBtnClass : 'utilAgreeNext',
  transAgreeNextBtnClass : 'transAgreeNext',
  mobileAgreeNextBtnClass : 'mobileAgreeNext',
  creditAgreeNextBtnClass : 'creditAgreeNext',
  orentalAgreeNextBtnClass : 'orentalAgreeNext',
  oregularAgreeNextBtnClass : 'oregularAgreeNext',
  insurAgreeNextBtnClass : 'insurAgreeNext',
  loanAgreeNextBtnClass : 'loanAgreeNext',
  rentShareAgreeNextBtnClass : 'rentShareAgreeNext',
  foodShareAgreeNextBtnClass : 'foodShareAgreeNext',
  clothingShareAgreeNextBtnClass : 'clothingShareAgreeNext',
  utilShareAgreeNextBtnClass : 'utilShareAgreeNext',
  transShareAgreeNextBtnClass : 'transShareAgreeNext',
  mobileShareAgreeNextBtnClass : 'mobileShareAgreeNext',
  creditShareAgreeNextBtnClass : 'creditShareAgreeNext',
orentalShareAgreeNextBtnClass : 'orentalShareAgreeNext',
oregularShareAgreeNextBtnClass : 'oregularShareAgreeNext',
insurShareAgreeNextBtnClass : 'insurShareAgreeNext',
loanShareAgreeNextBtnClass : 'loanShareAgreeNext',
  foodShagNameNextBtnClass : 'foodShagNameNext',
  clothingShagNameNextBtnClass : 'clothingShagNameNext',
  utilShagNameNextBtnClass : 'utilShagNameNext',
  transShagNameNextBtnClass : 'transShagNameNext',
  mobileShagNameNextBtnClass : 'mobileShagNameNext',
  creditShagNameNextBtnClass : 'creditShagNameNext',
orentalShagNameNextBtnClass : 'orentalShagNameNext',
oregularShagNameNextBtnClass : 'oregularShagNameNext',
insurShagNameNextBtnClass : 'insurShagNameNext',
loanShagNameNextBtnClass : 'loanShagNameNext',
incomeSourceNextBtnClass : 'incomeSourceNext',
employmentNextBtnClass : 'employmentNext',
clinkNextBtnClass : 'clinkNext',
incomeOtherNextBtnClass : 'incomeOtherNext',
boardingAgreeNextBtnClass : 'boardingAgreeNext',
employmentAgreeNextBtnClass : 'employmentAgreeNext',
cbenAgreeNextBtnClass : 'cbenAgreeNext',
clinkbenNextBtnClass : 'clinkbenNext',
addressDetailsNextBtnClass : 'addressDetailsNext',
mobileOtherNextBtnClass : 'mobileOtherNext',
insurOtherNextBtnClass : 'insurOtherNext',
alcoholAgreeNextBtnClass : 'alcoholAgreeNext',
empincAgreeNextBtnClass : 'empincAgreeNext',
otherincAgreeNextBtnClass : 'otherincAgreeNext',
cbenincAgreeNextBtnClass : 'cbenincAgreeNext',
mygovaddrAgreeNextBtnClass : 'mygovaddrAgreeNext',
bankaddrAgreeNextBtnClass : 'bankaddrAgreeNext',
incomeOtherSharingNextBtnClass : 'incomeOtherSharingNext',
consLeaseOptionsBtnClass : 'cons-lease-options',
ourObligationsBtnClass : 'our-obligations',
yourRightsBtnClass : 'your-rights',
photoIdFrontBtnClass : 'photo-id-front',
photoIdBackBtnClass : 'photo-id-back',
idDetailsBtnClass : 'id-details',
requestCallbackBtnClass : 'request-callback',
creditGuideBtnClass: 'credit-guide',
sharedexpNextBtnClass : 'sharedexpNext',
sharedexpDetailNextBtnClass : 'sharedexpDetailNext',
groceriesNextBtnClass : 'groceriesNext',
educationNextBtnClass : 'educationNext',
gymNextBtnClass : 'gymNext',
healthNextBtnClass : 'healthNext',
personalCareNextBtnClass : 'personalCareNext',
retailNextBtnClass : 'retailNext',
automotiveNextBtnClass : 'automotiveNext',
travelNextBtnClass : 'travelNext',
transportNextBtnClass : 'transportNext',
childrensRetailNextBtnClass : 'childrensRetailNext',
departmentStoresNextBtnClass : 'departmentStoresNext',
onlineRetailNextBtnClass : 'onlineRetailNext',
subscriptionServicesNextBtnClass : 'subscriptionServicesNext',
telecommunicationsNextBtnClass : 'telecommunicationsNext',
gamblingNextBtnClass : 'gamblingNext',
diningOutNextBtnClass : 'diningOutNext',
entertainmentNextBtnClass : 'entertainmentNext',
transferRelationshipNextBtnClass : 'transferRelationshipNext',
financialTermsNextBtnClass : 'financialTermsNext'
};

//var nrdButton,nrdId,nrdCompanyName,nrdNotes;
var enquiryNamesSelected;
  
var placeSearch, autocomplete, autocomplete2;
var currentStreetAddress,currentSuburb,currentState,currentPostcode,currentCountry,currentLatitudecurrentLongitude;

var countryVal = '{!stateMasterState}' == 'NZ' ? 'NZ' : 'AU';

console.log('****currentStreetAddress****');
currentStreetAddress = document.getElementsByClassName("currentStreetAddress")[0];
currentSuburb = document.getElementsByClassName("currentSuburb")[0];
currentState = document.getElementsByClassName("currentState")[0];
currentPostcode = document.getElementsByClassName("currentPostcode")[0];
currentCountry = document.getElementsByClassName("currentCountry")[0];
currentLatitude = document.getElementsByClassName("currentLatitude")[0];
currentLongitude = document.getElementsByClassName("currentLongitude")[0];

console.log('****previousStreetAddress****');
previousStreetAddress = document.getElementsByClassName("previousStreetAddress")[0];
previousSuburb = document.getElementsByClassName("previousSuburb")[0];
previousState = document.getElementsByClassName("previousState")[0];
previousPostcode = document.getElementsByClassName("previousPostcode")[0];
previousCountry = document.getElementsByClassName("previousCountry")[0];
previousLatitude = document.getElementsByClassName("previousLatitude")[0];
previousLongitude = document.getElementsByClassName("previousLongitude")[0];

var currentStreetAddressRef = document.getElementById("rfstreetName");
var currentSuburbRef = document.getElementById("rfsuburb");
var currentStateRef = document.getElementById("rfstate");
var currentPostcodeRef = document.getElementById("rfpostalCode");

var currentIdType = document.getElementById("idType");
var driverLicenceState = "{!driverLicenceStateVal}";
var currentDriverLicenceState = document.getElementById("driverLicenceState");
if(currentDriverLicenceState != null){
    currentDriverLicenceState.value = driverLicenceState !=null && driverLicenceState!="" ? driverLicenceState : "--Select State--";
}
var currentPassportCountry = document.getElementById("passportCountry");
var genderType = document.getElementById("genderType");
var idType = "{!idTypeVal}";
var passportCountry = "{!passportCountryVal}";
var genderVal = "{!genderVal}"

currentIdType.value = idType !=null && idType!="" ? idType : "Driver License";
if(currentPassportCountry != null){
    currentPassportCountry.value = (passportCountry==null || passportCountry=="") ? 'Australia' : (passportCountry=="Australia" || passportCountry=="New Zealand") ? passportCountry : "Other";
}
if(genderType != null){
    genderType.value = genderVal !=null && genderVal!="" ? genderVal : "--Select Gender--";
}
var prevRefIds = "";

if(currentIdType.value=="Driver License" && driverLicenceState !=null && driverLicenceState!="")
    $("#hdnIdMiscpt").val(driverLicenceState);
else if(currentIdType.value=="Passport" && passportCountry !=null && passportCountry!="")
{
    $("#hdnIdMiscpt").val(passportCountry);
}

if($("#idType").val()=='Driver License')
{
    if('{!stateMasterState}' == 'NZ')
    {
        $("#dvDlState").hide();
        $("#driverLicenceState").hide();
    }else
    {
        $("#dvDlState").show();
        $("#driverLicenceState").show();
    }
    $("#dvPassportCountry").hide();
    $("#passportCountry").hide();
    $("#dvOtherPassportCountry").hide();
    $("#lblotherPassportCountry").hide();
    $("#otherPassportCountry").hide();
    
    var buttonInputIdName = $(".js-active").find(":button").attr('id');
    console.log("##DriverLicense: "+buttonInputIdName);
    if(buttonInputIdName=='photoid-next')
        $(".mainBtn").html('Attach Back page of ID');
    
    //$("#dvBackIdBtn").show();
    //$("#dvNoBackIdBtn").hide();
}
else if($("#idType").val()=='Passport')
{
    $("#dvDlState").hide();
    $("#driverLicenceState").hide();
    $("#dvPassportCountry").show();
    $("#passportCountry").show();
    
    if($("#passportCountry").val()=='Australia' || $("#passportCountry").val()=='New Zealand' || $("#passportCountry").val()=='' || $("#passportCountry").val()==null)
    {
        $("#dvOtherPassportCountry").hide();
        $("#lblotherPassportCountry").hide();
        $("#otherPassportCountry").hide();
    }
    else
    {
        $("#dvOtherPassportCountry").show();
        $("#lblotherPassportCountry").show();
        $("#otherPassportCountry").show();
    }
    
    if($("#passportCountry").val()=='Australia')
    {
        //$("#dvBackIdBtn").hide();
        //$("#dvNoBackIdBtn").show();
        var buttonInputIdName = $(".js-active").find(":button").attr('id');
        if(buttonInputIdName=='photoid-next')
            $(".mainBtn").html('Next');
    }
    else
    {
        //$("#dvBackIdBtn").show();
        //$("#dvNoBackIdBtn").hide();
    }
}
else
{
    $("#dvDlState").hide();
    $("#driverLicenceState").hide();
    $("#dvPassportCountry").hide();
    $("#passportCountry").show();
    $("#dvOtherPassportCountry").hide();
    $("#lblotherPassportCountry").hide();
    $("#otherPassportCountry").hide();
    var buttonInputIdName = $(".js-active").find(":button").attr('id');
    if(buttonInputIdName=='photoid-next')
        $(".mainBtn").html('Next');
}

var driverLicence = $("#driverLicence").val();
$("#hdnIdValueptBack").val(driverLicence);
$("#hdnIdValuept").val(idType);

$('#selfToolTip').tooltip({title: "<strong>How to take a photo of yourself holding your ID</strong><br/>• Take the photo preferably inside with sufficient light but not too much light <br/>• Hold up the document next to your face, like in the image below <br/>• Make sure both your face and ID are clear on the photo – nothing on the ID should be covered or censored", html: true, placement: "bottom"});
$("#idType").change(function(){
    if($(this).val()=='Driver License')
    {
        if('{!stateMasterState}' == 'NZ')
        {
            $("#dvDlState").hide();
            $("#driverLicenceState").hide();
        }else
        {
            $("#dvDlState").show();
            $("#driverLicenceState").show();
        }
        $("#dvPassportCountry").hide();
        $("#passportCountry").hide();
        $("#dvOtherPassportCountry").hide();
        $("#lblotherPassportCountry").hide();
        $("#otherPassportCountry").hide();
    }
    else if($(this).val()=='Passport')
    {
        $("#dvDlState").hide();
        $("#driverLicenceState").hide();
        $("#dvPassportCountry").show();
        $("#passportCountry").show();
        if($("#passportCountry").val()=="Other")
        {
            $("#dvOtherPassportCountry").show();
            $("#lblotherPassportCountry").show();
            $("#otherPassportCountry").show();
        }
        else
        {
            $("#dvOtherPassportCountry").hide();
            $("#lblotherPassportCountry").hide();
            $("#otherPassportCountry").hide();
        }
        addIdentificationMiscValue('country');
    }
    else
    {
        $("#dvDlState").hide();
        $("#driverLicenceState").hide();
        $("#dvPassportCountry").hide();
        $("#passportCountry").show();
        $("#dvOtherPassportCountry").hide();
        $("#lblotherPassportCountry").hide();
        $("#otherPassportCountry").hide();
    }
});

$("#passportCountry").change(function(){
    if($("#passportCountry").val()=='Australia' || $("#passportCountry").val()=='New Zealand' || $("#passportCountry").val()=='' || $("#passportCountry").val()==null)
    {
        $("#dvOtherPassportCountry").hide();
        $("#lblotherPassportCountry").hide();
        $("#otherPassportCountry").hide();
    }
    else
    {
        $("#dvOtherPassportCountry").show();
        $("#lblotherPassportCountry").show();
        $("#otherPassportCountry").show();
    }
});


var componentForm = {
  street_number: 'short_name',
  route: 'long_name',
  locality: 'long_name',
  administrative_area_level_1: 'short_name',
  country: 'long_name',
  postal_code: 'short_name'
};

$("#ipfileUploadpt").on('change',function(){
    $("#txtDisplayVal").text("Please wait till upload is completed...");
    //setTimeout(location.reload.bind(location), 5000);
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&ld='+ldId+'&param=sdid&n='+randomNumber;
    console.log(redo);
    if(redo=='yes')
        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&ld='+ldId+'&param=sdid&n='+randomNumber+'&redo=yes';
    setTimeout(function(){ window.location.href = redirectURL; }, 10000);
});

$("#ipfileUploadptBack").on('change',function(){
    $("#txtDisplayValBack").text("Please wait till upload is completed...");
    //setTimeout(location.reload.bind(location), 5000);
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&ld='+ldId+'&param=sdidb&n='+randomNumber;
    console.log(redo);
    if(redo=='yes')
        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&ld='+ldId+'&param=sdidb&redo=yes'+'&n='+randomNumber;
    setTimeout(function(){ window.location.href = redirectURL; }, 10000);
});

$("#ipfileUploadcp").on('change',function(){
    $("#txtDisplayValSelfie").text("Please wait till upload is completed...");
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdcp&n='+randomNumber;
    if(redo=='yes')
        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdcp&n='+randomNumber+'&redo=yes';
    setTimeout(function(){ window.location.href = redirectURL; }, 5000);
});

$("#ipfileUploadptWinz").on('change',function(){
    $("#txtDisplayValWinz").text("Please wait till upload is completed...");
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwz&n='+randomNumber;
    if(redo=='yes')
        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwz&n='+randomNumber+'&redo=yes';
    setTimeout(function(){ window.location.href = redirectURL; }, 15000);
});

$("#ipfileUploadptOther").on('change',function(){
    $("#txtDisplayValOther").text("Please wait till upload is completed...");
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdot&n='+randomNumber;
    setTimeout(function(){ window.location.href = redirectURL; }, 7000);
});

$("#ipfileUploadptAddress").on('change',function(){
    //setTimeout(location.reload.bind(location), 5000);
    var randomNumber = Math.random();
    var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=cuad&n='+randomNumber;
    if(redo=='yes')
        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&redo=yes&param=cuad'+'&n='+randomNumber;
    setTimeout(function(){ window.location.href = redirectURL; }, 5000);
});


//remove class from a set of items
const removeClasses = (elemSet, className) => {

  elemSet.forEach(elem => {

    elem.classList.remove(className);

  });

};

//return exect parent node of the element
const findParent = (elem, parentClass) => {

  let currentNode = elem;

  while (!currentNode.classList.contains(parentClass)) {
    currentNode = currentNode.parentNode;
  }

  return currentNode;

};

//get active button step number
const getActiveStep = elem => {
  return Array.from(DOMstrings.stepsBtns).indexOf(elem);
};

//set all steps before clicked (and clicked too) to active
const setActiveStep = activeStepNum => {

  //remove active state from all the state
  removeClasses(DOMstrings.stepsBtns, 'js-active');

  //set picked items to active
  DOMstrings.stepsBtns.forEach((elem, index) => {

    if (index <= activeStepNum) {
      elem.classList.add('js-active');
    }

  });
};

//get active panel
const getActivePanel = () => {

  let activePanel;

  DOMstrings.stepFormPanels.forEach(elem => {

    if (elem.classList.contains('js-active')) {

      activePanel = elem;

    }

  });

  return activePanel;

};

//open active panel (and close unactive panels)
const setActivePanel = activePanelNum => {

  //remove active class from all the panels
  removeClasses(DOMstrings.stepFormPanels, 'js-active');

  //show active panel
  DOMstrings.stepFormPanels.forEach((elem, index) => {
    if (index === activePanelNum) {

      elem.classList.add('js-active');

      setFormHeight(elem);

    }
  });

};

//set form height equal to current panel height
const formHeight = activePanel => {

  const activePanelHeight = activePanel.offsetHeight;

  DOMstrings.stepsForm.style.height = `${activePanelHeight}px`;

};

const setFormHeight = () => {
  const activePanel = getActivePanel();

  formHeight(activePanel);
};

//STEPS BAR CLICK FUNCTION
/*DOMstrings.stepsBar.addEventListener('click', e => {

  //check if click target is a step button
  const eventTarget = e.target;

  if (!eventTarget.classList.contains(`${DOMstrings.stepsBtnClass}`)) {
    return;
  }

  //get active button step number
  const activeStep = getActiveStep(eventTarget);

  //set all steps before clicked (and clicked too) to active
  //setActiveStep(activeStep);

  //open active panel
  setActivePanel(activeStep);
});*/

//PREV/NEXT BTNS CLICK
DOMstrings.stepsForm.addEventListener('click', e => {

  const eventTarget = e.target;

  //check if we clicked on `PREV` or NEXT` buttons
  if (!(eventTarget.classList.contains(`${DOMstrings.stepPrevBtnClass}`) || eventTarget.classList.contains(`${DOMstrings.stepNextBtnClass}`)))
  {
    return;
  }
  //alert(eventTarget.classList+ ' ##### '+ `${DOMstrings.stepPrevBtnClass}` + ' ##### '+`${DOMstrings.existOptsBtnClass}`);

  //find active panel
  const activePanel = findParent(eventTarget, `${DOMstrings.stepFormPanelClass}`);
  
  var acctId = "{!acctId}";
  var leadId = "{!$CurrentPage.parameters.ld}";
  var appType = "{!ldAppType}";
  var clientSideAppType=$(".hdnClientSideAppTypeVal").val();
  var hasCompletedBankSt = $("#hdnBankStVal").val();
  var hasCompletedMyGov = $("#hdnMyGovVal").val();

  let activePanelNum = Array.from(DOMstrings.stepFormPanels).indexOf(activePanel);

  //set active step and active panel onclick
  if (eventTarget.classList.contains(`${DOMstrings.stepPrevBtnClass}`)) {
    activePanelNum--;

  } else {

    activePanelNum++;
  }
  console.log('activePanelNum: '+activePanelNum+' ##### '+eventTarget.className);
  
  if (eventTarget.className.includes(`${DOMstrings.existOptsBtnClass}`))
  {
      activePanelNum = 1;
      $(".hdnClientSideAppTypeVal").val('existing');
  }
  else if (eventTarget.className.includes(`${DOMstrings.newOptsBtnClass}`))
  {
      activePanelNum = 2;
      $(".hdnClientSideAppTypeVal").val('new');
  }
  else if(eventTarget.className.includes(`${DOMstrings.newProdBtnClass}`))
  {
      activePanelNum = 2;
      $(".hdnClientSideAppTypeVal").val('existing');
  }
  else if(eventTarget.className.includes(`${DOMstrings.prevLeadConfirmBtnClass}`) && clientSideAppType=='new')
  {
      activePanelNum = 0;
  }
  else if(eventTarget.className.includes(`${DOMstrings.acctExistBtnClass}`))
  {
      activePanelNum = 3;
      $(".hdnClientSideAppTypeVal").val('acctEnquiry');
  }
  else if(eventTarget.className.includes(`${DOMstrings.serviceEnqBtnClass}`))
  {
      activePanelNum = 3;
      $(".hdnClientSideAppTypeVal").val('serviceEnquiry');
  }
  else if(eventTarget.className.includes(`${DOMstrings.nextLeadConfirmBtnClass}`) || eventTarget.className.includes(`${DOMstrings.nextLeadConfirmSt2BtnClass}`))
  {
      activePanelNum = 0;
  }
  else if(eventTarget.className.includes(`${DOMstrings.consLeaseOptionsBtnClass}`))
  {
      $('.mainBtn').text('ACCEPTED');
      updateApplicationLogsFunc('Consumer Lease Options',window.deviceInfo);
  }else if(eventTarget.className.includes(`${DOMstrings.ourObligationsBtnClass}`))
  {
      $('.mainBtn').text('AGREE');
      updateApplicationLogsFunc('Our Obligations',window.deviceInfo);
  }else if(eventTarget.className.includes(`${DOMstrings.yourRightsBtnClass}`))
  {
      updateApplicationLogsFunc('Your Rights',window.deviceInfo);
  }else if(eventTarget.className.includes(`${DOMstrings.saveFinishLaterBtnClass}`))
  {
      $('.mainBtn').text('SUBMIT');
      $('.fixed-bottom').css('display','');
      $('.fixed-bottom-callback').css('display','none');
  }else if(eventTarget.className.includes(`${DOMstrings.creditGuideBtnClass}`))
  {
      if(!$('.creditGuideCheckbox').prop('checked'))
      {
          bootbox.alert({
            message: "Please tick the checkbox to accept the privacy policy & credit guide",
            className: 'rubberBand animated'
          });
          return false;
      }else{
          $('.mainBtn').text('CONTINUE TO ID');
          $('.fixed-bottom').css('display','none');
          $('.fixed-bottom-callback').css('display','');
          updateApplicationLogsFunc('Privacy Policy & Credit Guide',window.deviceInfo);
      }
  }else if(eventTarget.className.includes(`${DOMstrings.requestCallbackBtnClass}`))
  {     
        if($('.remindMeIn').val() == '' || $('.remindMeIn').val() == '--Select Time--'){
            bootbox.alert({
                message: "Please select reminder",
                className: 'rubberBand animated'
            });
            return false;
        }else{
            let remindMeIn = $('.remindMeIn').val();
            /*
            if(remindMeIn == '9AM'){
                // Get the current date and time
                let now = new Date();

                // Create a new Date object for 9am the next day
                let next9am = new Date(now);
                next9am.setDate(now.getDate() + 1);
                next9am.setHours(9, 0, 0, 0); // Set the time to 9am, and set seconds and milliseconds to 0

                // Calculate the difference in milliseconds
                let diffInMilliseconds = next9am - now;

                // Convert the difference to minutes
                let diffInMinutes = Math.ceil(diffInMilliseconds / (1000 * 60));

                console.log(`Current local time: ${now}`);
                console.log(`Minutes until 9am the next day: ${diffInMinutes}`);
                remindMeIn = diffInMinutes;
            }
            */
            activePanelNum = 0;
            $('.fixed-bottom-callback').css('display','none');
            $('.fixed-bottom').css('display','none');
            remindMeInFunc(remindMeIn);
        }
  }else if(eventTarget.className.includes(`${DOMstrings.photoIdFrontBtnClass}`))
  {
      activePanelNum = 0;
      window.redirectToIdentityDetails = 'no';
      window.redirectToIdentityBack = 'yes';
      $('.mainBtn').text('NEXT');
      if('{!hasAddedPhotoIdBack}' == 'false'){
          $('.fixed-bottom').css('display','none');
      }
      updateApplicationLogsFunc('Photo Id Front',window.deviceInfo);
  }else if(eventTarget.className.includes(`${DOMstrings.photoIdBackBtnClass}`))
  {
      activePanelNum = 0;
      $('.fixed-bottom').css('display','none');
      $('.mainBtn').text('NEXT');
      window.redirectToIdentityDetails = 'yes';
      updateApplicationLogsFunc('Photo Id Back',window.deviceInfo);
  }else if(eventTarget.className.includes(`${DOMstrings.idDetailsBtnClass}`))
  {
      $('.mainBtn').text('NEXT');
      if($('.idFirstName').val() == '')
      {
          bootbox.alert({
            message: "Please enter first name",
            className: 'rubberBand animated'
          });
          return false;
      }else if($('.idLastName').val() == '')
      {
          bootbox.alert({
            message: "Please enter last name",
            className: 'rubberBand animated'
          });
          return false;
      }else if($('.idDOB').val() == '' || !validateDate($('.idDOB').val()))
      {
          bootbox.alert({
            message: "Please enter valid DOB",
            className: 'rubberBand animated'
          });
          return false;
      }else if($('.idType').val() == '' || $('.idType').val() == '--None--')
      {
          bootbox.alert({
            message: "Please enter identification type",
            className: 'rubberBand animated'
          });
          return false;
      }else if($('.idNumber').val() == '')
      {
          bootbox.alert({
            message: "Please enter identification no.",
            className: 'rubberBand animated'
          });
          return false;
      }else if(!IsMobileNumber($('.ldMobile').val()))
      {
          bootbox.alert({
            message: "Please enter valid mobile no.",
            className: 'rubberBand animated'
          });
          return false;
      }else{
          //updateApplicationLogsFunc('Identification Documentation Details');
          //updateIdentityDetailsFunc($('.idFirstName').val(),$('.idLastName').val(),$('.idDOB').val(),$('.idType').val(),$('.idNumber').val());
          activePanelNum = 0;
          var date,newdate;
          if($('.idDOB').val()!=null && $('.idDOB').val()!='')
            {
                date = $('.idDOB').val().replace('/','-').replace('/','-');
                newdate = date.split("-").reverse().join("-");
            }
          var ldMobile = $('.ldMobile').val();
          var idFirstName = $('.idFirstName').val();
          var idLastName = $('.idLastName').val();
          ldMobile = ldMobile.replace(/ +/g, "");
          $('.fixed-bottom').css('display','none');
          if('{!acctId}' != 'null' && '{!acctId}' != ''){
              updateIdentityDetailsFunc(ldMobile,newdate,$('.idType').val(),$('.idNumber').val(),$('.ldEmail').val());    
          }else{
              convertLead(newdate,ldMobile,$('.ldEmail').val(),'','yes',idFirstName,idLastName,$('.idType').val(),$('.idNumber').val());
          }
      }
  }
  else if(eventTarget.className.includes(`${DOMstrings.bankNextRedoBtnClass}`))
  {
      if($('.bankRedoAgree').val() != 'yes' && $('.bankRedoAgree').val() != 'no' && $('.bankRedoAgree').val() != 'remove'){
          bootbox.alert({
            message: "Please select one of the options",
            className: 'rubberBand animated'
            });
            return false;
      }else if($('.bankRedoAgree').val() == 'yes' || $('.bankRedoAgree').val() == 'remove'){
          resetBankFunc($('.bankRedoAgree').val());
      }else{
          if(hasCompletedMyGov=='false')
          {
              activePanelNum--;
              var randomNumber = Math.random();
              var bankStNextParamVal = "sdcpa";
              if(custPhotoAtt!=null && custPhotoAtt!="" && (furtherNextOnlineStepParam=="sdmg" || furtherNextOnlineStepParam==null || furtherNextOnlineStepParam==""))
                  bankStNextParamVal = "cons";
              else if(custPhotoAtt!=null && custPhotoAtt!="" && furtherNextOnlineStepParam!=null && furtherNextOnlineStepParam!="" && furtherNextOnlineStepParam!="sdmg")
                  bankStNextParamVal = furtherNextOnlineStepParam;
              var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber;
              if(redo=="yes")
                  redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber+'&redo=yes';
              console.log(bankStNextParamVal);
              if('{!stateMasterState}' == 'NZ')
              {
                  redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwg&n='+randomNumber;
                    if(redo=='yes')
                        redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdwg&n='+randomNumber+'&redo=yes';
                    window.location.href = redirectURL;
              }else
              {
                  bootbox.confirm({
                            message: "Do you receive income from centrelink?",
                            buttons: {
                                confirm: {
                                    label: 'Yes',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'No',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (result) {
                                if(result==true)
                                {
                                    //alert("I receive payments from centrelink");
                                    redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdbs&n='+randomNumber;
                                    window.location.href = redirectURL;
                                }
                                else
                                {
                                    //alert("No centrelink payments");
                                    activePanelNum = 0;
                                    window.redirectToNextExpense = 'yes';
                                    skipMygovStatementFunc();
                                }
                            }
                        });
                }
            }
            else
            {
                activePanelNum--;
                var randomNumber = Math.random();
                window.open(onlineURL +'/R4KOnlineForm?id='+acctId+'&n='+randomNumber+'&redo=yes','_self');
            }
      }
  }
  else if(eventTarget.className.includes(`${DOMstrings.bankNextBtnClass}`) && hasCompletedBankSt=='false')
  {
      activePanelNum = activePanelNum + 2;
  }
  else if(eventTarget.className.includes(`${DOMstrings.bankNextBtnClass}`) && hasCompletedBankSt=='true')
  {
      if('{!redo}' == 'yes')
      {
      
      }else
      {
          if(hasCompletedMyGov=='false')
          {
              activePanelNum--;
              var randomNumber = Math.random();
              var bankStNextParamVal = "sdcpa";
              if(custPhotoAtt!=null && custPhotoAtt!="" && (furtherNextOnlineStepParam=="sdmg" || furtherNextOnlineStepParam==null || furtherNextOnlineStepParam==""))
                  bankStNextParamVal = "cons";
              else if(custPhotoAtt!=null && custPhotoAtt!="" && furtherNextOnlineStepParam!=null && furtherNextOnlineStepParam!="" && furtherNextOnlineStepParam!="sdmg")
                  bankStNextParamVal = furtherNextOnlineStepParam;
              var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber;
              if(redo=="yes")
                  redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber+'&redo=yes';
              bootbox.confirm({
                        message: "Do you receive income from centrelink?",
                        buttons: {
                            confirm: {
                                label: 'Yes',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'No',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if(result==true)
                            {
                                //alert("I receive payments from centrelink");
                                redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdbs&n='+randomNumber;
                                window.location.href = redirectURL;
                            }
                            else
                            {
                                //alert("No centrelink payments");
                                activePanelNum = 0;
                                window.redirectToNextExpense = 'yes';
                                skipMygovStatementFunc();
                            }
                        }
                    });
                }
                else
                    activePanelNum = activePanelNum + 2;
        }
  }
  else if(eventTarget.className.includes(`${DOMstrings.winzPrevBtnClass}`) && countryVal=='NZ')
  {
      activePanelNum = 12;
  }
  else if(eventTarget.className.includes(`${DOMstrings.otherIdPrevBtnClass}`) && countryVal!='NZ')
  {
      activePanelNum = 13; //go to mygov step
  }
  else if(eventTarget.className.includes(`${DOMstrings.addMoreRefNextBtnClass}`) || eventTarget.className.includes(`${DOMstrings.compRefNextBtnClass}`) || eventTarget.className.includes(`${DOMstrings.prevRefNextBtnClass}`))
  {
      activePanelNum = 0;
  }

  console.log('activePanelNumFinal: '+activePanelNum);
  
  /*if(acctId==null && acctId=='' && leadId!=null && leadId!="")
  {
      activePanelNum = 0;
  }*/
  
  
  var firstName = $("#firstName").val();
  var lastName = $("#lastName").val();
  var phone = $("#phone").val();
  var email = $("#email").val();
  
  var streetName = $("#streetName").val();
  var suburb = $("#suburb").val();
  var state = $("#state").val();
  var postalCode = $("#postalCode").val();
  var countryV = $("#country").val();
  var latV = $("#latitude").val();
  var lngV = $("#longitude").val();
  
  var dob = $("#dob").val();
  var crn = $("#crn").val();
  var genderTyp = $("#genderType").val();
  var idTyp = $("#idType").val();
  var idTypeOther = $("#idTypeOther").val();
  var driverLicence = $("#driverLicence").val();
  //var hasProvidedConsent = $("#hasProvidedConsent").is(":checked");
  
  var photoId = "{!photoAttId}";
  
  var addEqEnquiries = $("#addEqEnquiries").val();
  var addEqRentalDefaults = $("#addEqRentalDefaults").val();
  var addEqNonRentalDefaults = $("#addEqNonRentalDefaults").val();
  
  var addComments = $("#addComments").val();
  
  var ldDob = $("#lddob").val();
  var ldMobile = $("#ldphone").val();
  var ldEmail = $("#ldemail").val();
  var ldCRN = $("#ldcrn").val();
  var ldName = $("#ldName").val();
  clientSideAppType = $(".hdnClientSideAppTypeVal").val();
  
  var isldFormAllocationDatePresent = "{!isldFormAllocationDatePresent}";
  var isFollowUpRequired = "{!isFollowUpRequired}";
  
  var rffirstName = $("#rffirstName").val();
  var rflastName = $("#rflastName").val();
  var rfphone = $("#rfphone").val();
  var prevrfphone = $("#addRfMobNo").val();
  var relation = $("#ddlRelation").val();
  /*var rfemail = $("#rfemail").val();
  var rfstreetName = $("#rfstreetName").val();
  var rfsuburb = $("#rfsuburb").val();
  var rfstate = $("#rfstate").val();
  var rfpostalCode = $("#rfpostalCode").val();*/
  console.log(isldFormAllocationDatePresent + '####' +isFollowUpRequired);
  
  if(isldFormAllocationDatePresent=='true' && isFollowUpRequired=='false')
  {
      ldDob = $("#lddob2").val();
      ldMobile = $("#ldphone2").val();
      ldEmail = $("#ldemail2").val();
      ldCRN = $("#ldcrn2").val();
  }
  //alert(hasCompletedBankSt);
  
  
  if(activePanelNum==6)
      $(".hdnCurrentPageVal").val("cd");
  else if(activePanelNum==7)
      $(".hdnCurrentPageVal").val("ad");
  else if(activePanelNum==8)
      $(".hdnCurrentPageVal").val("id");
  else if(activePanelNum==9)
      $(".hdnCurrentPageVal").val("cs");
  else if(activePanelNum==10)
      $(".hdnCurrentPageVal").val("sdcp");
  else if(activePanelNum==11)
      $(".hdnCurrentPageVal").val("sdid");
  else if(activePanelNum==12)
      $(".hdnCurrentPageVal").val("sdbs");
  else if(activePanelNum==13)
      $(".hdnCurrentPageVal").val("sdmg");
  else if(activePanelNum==14)
      $(".hdnCurrentPageVal").val("sdwz");
  else if(activePanelNum==15)
      $(".hdnCurrentPageVal").val("sdot");
  else if(activePanelNum==16)
      $(".hdnCurrentPageVal").val("ref");
  else if(activePanelNum==17)
      $(".hdnCurrentPageVal").val("com");
  
  var hdnCurrentPageVal = $(".hdnCurrentPageVal").val();
  //alert(hdnCurrentPageVal);
  
  if(acctId!=null && acctId!='')
  { 
      if(eventTarget.className.includes(`${DOMstrings.consumerLeaseNextBtnClass}`))
      {
          updateConsentFunc();  
          $(".mainBtn").html('Attach Front page of ID');
      }
      if(eventTarget.className.includes(`${DOMstrings.photoIdNextBtnClass}`))
      {
          updateIdentificationNoFunc(driverLicence);
          if('{!redo}' == 'yes')
          {
              activePanelNum--;
              var randomNumber = Math.random();
              window.open(onlineURL +'/R4KOnlineForm?id='+acctId+'&n='+randomNumber+'&redo=yes','_self');
          }else{
              activePanelNum++;
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.mygovNextRedoBtnClass}`))
      {
          activePanelNum--;
          if($('.mygovRedoAgree').val() != 'remove' && $('.mygovRedoAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select one of the options",
                className: 'rubberBand animated'
                });
                return false;
          }else if($('.mygovRedoAgree').val() == 'no')
          {
              var randomNumber = Math.random();
              window.open(onlineURL +'/R4KOnlineForm?id='+acctId+'&n='+randomNumber+'&redo=yes','_self');
          }else if($('.mygovRedoAgree').val() == 'remove')
          {
              resetMygovFunc('remove');
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.myGovNextBtnClass}`))
      {
          activePanelNum--;
          var randomNumber = Math.random();
          var bankStNextParamVal = "sdcpa";
          if(custPhotoAtt!=null && custPhotoAtt!="" && (furtherNextOnlineStepParam=="sdmg" || furtherNextOnlineStepParam==null || furtherNextOnlineStepParam==""))
              bankStNextParamVal = "cons";
          else if(custPhotoAtt!=null && custPhotoAtt!="" && furtherNextOnlineStepParam!=null && furtherNextOnlineStepParam!="" && furtherNextOnlineStepParam!="sdmg")
              bankStNextParamVal = furtherNextOnlineStepParam;
          //alert("bankStNextParamVal: "+bankStNextParamVal+" custPhotoAtt: "+custPhotoAtt+" furtherNextOnlineStepParam: "+furtherNextOnlineStepParam);
          var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber;
          if(redo=="yes")
              redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+bankStNextParamVal+'&n='+randomNumber+'&redo=yes';
          if(hasCompletedMyGov=='false' && !isMyGovSelected)
          {
          bootbox.confirm({
                    message: "Do you receive income from centrelink?",
                    buttons: {
                        confirm: {
                            label: 'Yes',
                            className: 'btn-success'
                        },
                        cancel: {
                            label: 'No',
                            className: 'btn-danger'
                        }
                    },
                    callback: function (result) {
                        if(result==true)
                        {
                            //alert("I receive payments from centrelink");
                        }
                        else
                        {
                            //alert("No centrelink payments");
                            if(hasCompletedBankSt=='true' && mogoCentrelinkIncome>0)
                            {
                                redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdmg&redo=yes&n='+randomNumber;
                                bootbox.alert({
                                    message: "We have noticed that you are receiving centrelink payments. Please add your myGov statement.",
                                    className: 'rubberBand animated'
                                });
                            }
                            else{
                                //window.location.href = redirectURL;
                                activePanelNum = 0;
                                window.redirectToNextExpense = 'yes';
                                skipMygovStatementFunc();
                            }
                        }
                    }
                });
            }
            else
            {
                window.location.href = redirectURL;
            }
      }
      else if(eventTarget.className.includes(`${DOMstrings.proofOfIncomeBtnClass}`))
      {
          activePanelNum--;
          if(parseInt('{!countWinzAtts}') <= 0)
          {
              bootbox.alert({
                    message: "Please add proof of income documents to proceed to the next step",
                    className: 'rubberBand animated'
                });
          }else
          {
              var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&n='+randomNumber;
              if(redo=="yes")
                  redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&n='+randomNumber+'&redo=yes';
              window.location.href = redirectURL;
          }
      }
      else if (eventTarget.className.includes(`${DOMstrings.addMoreRefNextBtnClass}`))
      {
          var custMobNumber = '{!phoneVal}';
          var isMobileValid = IsMobileNumber(rfphone);
          var totRequiredReferees = parseInt("{!totalRefereesRequired}");
          var totFamRequiredReferees = parseInt("{!totalRefereesBeingFamMemberRequired}");
  totRefereesAdded = parseInt("{!noOfRefereesAdded}");
          var totFamRefereesAdded = parseInt("{!noOfRefereesFamAdded}");
          //alert('totRefereesAdded: '+totRefereesAdded+' totFamRefereesAdded: '+totFamRefereesAdded +' ##TotRequired: '+totRequiredReferees+' ##totFamMemRequired: '+totFamRequiredReferees );
          
          if(totRefereesAdded < totRequiredReferees || totFamRefereesAdded < totFamRequiredReferees)
          { 
              var totRefRequired = totRequiredReferees - totRefereesAdded;
              var totFamMemRequired = totFamRequiredReferees - totFamRefereesAdded;
              var messageVal = '';
              if(totFamMemRequired > 0 && totRefRequired>0)
                  messageVal = "Please enter "+totRefRequired+" more character reference/s with "+totFamMemRequired+" being the family member.";
              else if(totFamMemRequired > 0 && totRefRequired==0)
                  messageVal = "Please enter "+totFamMemRequired+" more family member/s as a character reference."
              else
                  messageVal = "Please enter "+totRefRequired+" more character references.";
            
              if(rffirstName==null || rffirstName=='')
              {
                  bootbox.alert({
                    message: "Please enter First Name of the person you refer. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else if(rflastName==null || rflastName=='')
              {
                  bootbox.alert({
                    message: "Please enter Last Name of the person you refer. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else if(rfphone==null || rfphone=='')
              {
                  bootbox.alert({
                    message: "Please enter Mobile No. of the person you refer. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else if (!isMobileValid)
              {
                  bootbox.alert({
                    message: "Please enter a valid Mobile No. No spaces allowed and number should start with 0. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else if(rfphone!=null && rfphone!='' && custMobNumber!=null && custMobNumber!='' && rfphone == custMobNumber)
              {
                  bootbox.alert({
                    message: "You cannot enter your Mobile No. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else if(relation==null || relation=='' || relation=='--Relationship to you--')
              {
                  bootbox.alert({
                    message: "Please enter the relationship to you. "+messageVal,
                    className: 'rubberBand animated'
                    });
                    return false;
              }
              else
              {
                  if(allRefMobileNos!=null && allRefMobileNos.length>0)
                  {
                      for(let i=0; i<allRefMobileNos.length; i++)
                      {
                          if(rfphone==allRefMobileNos[i])
                          {
                              bootbox.alert({
                                message: "You have already entered a reference with same mobile number",
                                className: 'rubberBand animated'
                               });
                          }
                      }
                  }
                  addRefereeRecord(rffirstName,rflastName,rfphone,relation,'yes');
              }
          }
          else
          {
              performEquifaxSearch();
          }
      }
      else if (eventTarget.className.includes(`${DOMstrings.prevRefNextBtnClass}`))
      {
          var totRequiredReferees = parseInt("{!totalRefereesRequired}");
          var totFamRequiredReferees = parseInt("{!totalRefereesBeingFamMemberRequired}");
          var totRefereesAdded = parseInt("{!noOfRefereesAdded}");
          var totFamRefereesAdded = parseInt("{!noOfRefereesFamAdded}");
          var cpRefId = "{!currentprevRefId}";
          var prevRefs = "{!prevRefIds}";
          var prevRefMobNo = $(".addRfMobNo").val();
          //alert('totRefereesAdded: '+totRefereesAdded+' totFamRefereesAdded: '+totFamRefereesAdded +' ##TotRequired: '+totRequiredReferees+' ##totFamMemRequired: '+totFamRequiredReferees );
          
          if((cpRefId!=null && cpRefId!="") || (prevRefIds!=null && prevRefIds!="") && prevRefs!='none')
          {
              //alert("cpRefId: "+cpRefId+' prevRefIds: '+prevRefIds+' prevRefs: '+prevRefs+' prevRefMobNo: '+prevRefMobNo);
              if(prevRefIds!=null && prevRefIds!='')
                  prevRefs = prevRefIds;
              if(cpRefId!=null && cpRefId!="")
              {
                  var isMobileValid = IsMobileNumber(prevrfphone);
            
                  if (!isMobileValid)
                  {
                      bootbox.alert({
                        message: "Please enter a valid Mobile No. No spaces allowed and number should start from 0.",
                        className: 'rubberBand animated'
                        });
                        return false;
                  }
              }
              redirectAndAddRefereesFunc(cpRefId,prevRefs,prevRefMobNo,'yes');
          }
          else
          {
              var randomNumber = Math.random();
              var redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=ref&n='+randomNumber+'&prevRefs=none';
              window.location.href = redirectURL;
          }    
      }
      else if (eventTarget.className.includes(`${DOMstrings.compRefNextBtnClass}`))
      {
          var totRequiredReferees = parseInt("{!totalRefereesRequired}");
          var totFamRequiredReferees = parseInt("{!totalRefereesBeingFamMemberRequired}");
          var totRefereesAdded = parseInt("{!noOfRefereesAdded}");
          var totFamRefereesAdded = parseInt("{!noOfRefereesFamAdded}");
          //alert('totRefereesAdded: '+totRefereesAdded+' totFamRefereesAdded: '+totFamRefereesAdded +' ##TotRequired: '+totRequiredReferees+' ##totFamMemRequired: '+totFamRequiredReferees );
          
          if(totRefereesAdded < totRequiredReferees || totFamRefereesAdded < totFamRequiredReferees)
          {
              var totRefRequired = totRequiredReferees - totRefereesAdded;
              var totFamMemRequired = totFamRequiredReferees - totFamRefereesAdded;
              var messageVal = '';
              if(totFamMemRequired > 0 && totRefRequired>0)
                  messageVal = "Please enter "+totRefRequired+" more character reference/s with "+totFamMemRequired+" being the family member.";
              else if(totFamMemRequired > 0 && totRefRequired==0)
                  messageVal = "Please enter "+totFamMemRequired+" more family member/s as a character reference."
              else
                  messageVal = "Please enter "+totRefRequired+" more character references.";
              bootbox.alert({
                message: messageVal,
                className: 'rubberBand animated'
                });
                return false;
          }
          else
          {
              //performEquifaxSearch();
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.myInfoBtnClass}`))
      {
          if(lastName=='')
          {
              bootbox.alert({
                message: "Please enter your last name.",
                className: 'rubberBand animated'
                });
                return false;
          }
          else if(genderTyp=='--Select Gender--')
          {
              bootbox.alert({
                message: "Please select your gender.",
                className: 'rubberBand animated'
                });
                return false;
          }
          else
          {
              var dateRep,dobFormat;
              if(dob!=null && dob!='')
              {
                  dateRep = dob.replace('/','-').replace('/','-');
                  dobFormat = dateRep.split("-").reverse().join("-");
              }
              updateBasicInfoFunc(firstName,lastName,dobFormat,genderTyp);
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.contactDetailsBtnNextClass}`))
      {  
          if("{!mygovAddress}" == "" || "{!mygovAddress}".toLowerCase().search('po box') >= 0 || "{!mygovAddress}".toLowerCase().search('no fixed address') >= 0)
          {
              activePanelNum++;
              if("{!mogoAddress}" == "" || "{!mogoAddress}".toLowerCase().search('po box') >= 0 || "{!mogoAddress}".toLowerCase().search('no fixed address') >= 0)
              {
                    activePanelNum++;
              }
          }         
          updateContactDetailsFunc(phone,email);
      }
      else if(eventTarget.className.includes(`${DOMstrings.eqEnqNextBtnClass}`))
      {
          getSelectedEnquiryNames();
          enquiryNamesSelected = enquiryNamesSelected.trim();
          if(addEqEnquiries==null || addEqEnquiries=='')
          {
              bootbox.alert({
                message: "Please add explanation for your recent enquiries",
                className: 'rubberBand animated'
                });
                return false;
          }
          else if(addEqEnquiries!=null && addEqEnquiries!='' && enquiryNamesSelected=='')
          {
              activePanelNum--;
              bootbox.confirm({
                    message: "You have not selected any enquiry. Do you wish to select the enquiry?",
                    buttons: {
                        confirm: {
                            label: 'Yes',
                            className: 'btn-success'
                        },
                        cancel: {
                            label: 'No',
                            className: 'btn-warning'
                        }
                    },
                    callback: function (result) {
                        console.log('This was logged in the callback: ' + result);
                        if(result==true)
                        {
                            activePanelNum--;
                            console.log('##activeStepNum: '+activeStepNum+' ##activePanelNum: '+activePanelNum);
                            //setActiveStep(activeStepNum);
                        }
                        else
                        {
                            activePanelNum++;
                            setActivePanel(activePanelNum);
                            updateEquifaxNotesFunc(addEqEnquiries,addEqRentalDefaults,addEqNonRentalDefaults);
                        }
                    }
                });
          }
          else
          {
              if(enquiryNamesSelected!=null && enquiryNamesSelected!='')
                  addEqEnquiries = '##Proceeded: '+enquiryNamesSelected+'\n##Explanation: '+addEqEnquiries;
              updateEquifaxNotesFunc(addEqEnquiries,addEqRentalDefaults,addEqNonRentalDefaults);
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.eqRentalDefaultNextBtnClass}`))
      {
          if(addEqRentalDefaults==null || addEqRentalDefaults=='')
          {
              bootbox.alert({
                message: "Please add explanation for your rental defaults",
                className: 'rubberBand animated'
                });
                return false;
          }
          else
          {
              updateEquifaxNotesFunc(addEqEnquiries,addEqRentalDefaults,addEqNonRentalDefaults);
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.eqNonRentalDefaultNextBtnClass}`))
      {
          if(addEqNonRentalDefaults==null || addEqNonRentalDefaults=='')
          {
              bootbox.alert({
                message: "Please add explanation for your non rental defaults",
                className: 'rubberBand animated'
                });
                return false;
          }
          else
          {
              updateEquifaxNotesFunc(addEqEnquiries,addEqRentalDefaults,addEqNonRentalDefaults);
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.consNextBtnClass}`))
      {
          var whyConsumerLease = '';
          var checkedCount = 0;
          var consumerCheckboxes = document.getElementsByClassName('whyConsumerLease');
          console.log('****'+consumerCheckboxes.length);
          for(var i=0; i<consumerCheckboxes.length; i++)
          {
              if(consumerCheckboxes[i].checked)
              {
                  whyConsumerLease += $('.whyConsumerLease' + (i+1) + 'val').text();
                  whyConsumerLease += '; ';
                  checkedCount++;
              }
          }
          
          if(checkedCount == 0)
          {
              bootbox.alert({
                message: "Please select why you are using a Sale of Goods by Instalment?",
                className: 'rubberBand animated'
              });
              return false;
          }
          if($('.benefitsOfConsumerLease').val() == '' || $('.benefitsOfConsumerLease').val() == '--Select--')
          {
              bootbox.alert({
                message: "Please select Benefit of Sale of Goods by Instalment",
                className: 'rubberBand animated'
              });
              return false;
          }
          updateConsumerLeaseDetailsFunc(whyConsumerLease,$('.benefitsOfConsumerLease').val());
      }
      else if(eventTarget.className.includes(`${DOMstrings.productNextBtnClass}`))
      {
          console.log('****');
          if($('.prodRequirement').val() == '' || $('.prodRequirement').val() == '--None--')
          {
              bootbox.alert({
                message: "Please select What type of Product do you want to Purchase?",
                className: 'rubberBand animated'
              });
              return false;
          }
          if($('.productName').val() == '')
          {
              bootbox.alert({
                message: "Please enter Product Description you are purchasing:",
                className: 'rubberBand animated'
              });
              return false;
          }
          if($('.productDescription').val() == '' || $('.productDescription').val() == 'None')
          {
              bootbox.alert({
                message: "Please select Product Requirement (Why do you need this Product?)",
                className: 'rubberBand animated'
              });
              return false;
          }
          if($('.productRequirement').val() == '' || $('.productRequirement').val() == 'None')
          {
              bootbox.alert({
                message: "Please select Requirements and Objectives for a Sale of Goods by Instalment",
                className: 'rubberBand animated'
              });
              return false;
          }
          
          setActiveStep(5);
          updateProductDetailsFunc($('.prodRequirement').val(),$('.productName').val(),$('.productDescription').val(),$('.productRequirement').val());
      }
      else if(eventTarget.className.includes(`${DOMstrings.mygovaddrAgreeNextBtnClass}`))
      {
          console.log('mygov Address: ', '{!mygovAddress}');
          console.log('mygovaddrAgree ' + $('.mygovaddrAgree').val());
          if('{!mygovAddress}' == '')
          {
              activePanelNum++;
          }else
          {
              if($('.mygovaddrAgree').val() != 'yes' && $('.mygovaddrAgree').val() != 'no')
              {
                  bootbox.alert({
                    message: "Please select yes or no",
                    className: 'rubberBand animated'
                  });
                  return false;
              }
              else if($('.mygovaddrAgree').val() == 'yes')
              {
                  activePanelNum=0;
                  getSensis('{!mygovAddress}','mygov');
              }
              else
              {
                  if("{!mogoAddress}" == "" || "{!mogoAddress}".toLowerCase().search('po box') >= 0 || "{!mogoAddress}".toLowerCase().search('no fixed address') >= 0)
                  {
                      activePanelNum++;
                  }
              }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.bankaddrAgreeNextBtnClass}`))
      {
          console.log('bank Address: ', '{!mogoAddress}');
          console.log('bankaddrAgree ' + $('.bankaddrAgree').val());
          if('{!mogoAddress}' == '')
          {
              //activePanelNum++;
          }else
          {
              if($('.bankaddrAgree').val() != 'yes' && $('.bankaddrAgree').val() != 'no')
              {
                  bootbox.alert({
                    message: "Please select yes or no",
                    className: 'rubberBand animated'
                  });
                  return false;
              }
              else if($('.bankaddrAgree').val() == 'yes')
              {
                  activePanelNum=0;
                  getSensis('{!mogoAddress}','bank');
              }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.addressDetailsNextBtnClass}`))
      {
          console.log('Address: '); 
          if($('.txtCurrentAddress').val() == '')
          {
              bootbox.alert({
                message: "Please enter address",
                className: 'rubberBand animated'
              });
              return false;
          }
          
          if($('.currentLatitude').val() == '')
          {
                var totalAddress = $('.currentStreetAddress').val() + ' ' + $('.currentSuburb').val() + ' ' + $('.currentState').val() + ' ' + $('.currentPostcode').val();
                var geocoder = new google.maps.Geocoder;
                geocoder.geocode({'address': totalAddress}, function(results, status) {
                if(status === 'OK') 
                {
                    if(results[0])
                    {
                        currentLatitude.value = results[0].geometry.location.lat();
                        currentLongitude.value = results[0].geometry.location.lng(); 
                        console.log('LatLng: '+currentLatitude.value+' *** '+currentLongitude.value);  
                        console.log('Address: ' + results[0].address_components); 
                          var addressStr = '';
                          var streetAddressStr = '';
                        for (var i = 0; i < results[0].address_components.length; i++) {
                            var addressType = results[0].address_components[i].types[0];
                            //alert(addressType);
                            if (componentForm[addressType]) {
                              var val = results[0].address_components[i][componentForm[addressType]];
                              console.log(addressType+" *** "+val);
                              if(addressType=='street_number')
                                  streetAddressStr = streetAddressStr + val;
                              else if(addressType=='route')
                                  streetAddressStr = streetAddressStr + ' '+val;
                              else if(addressType=='locality')
                                  currentSuburb.value = val;
                              else if(addressType=='administrative_area_level_1')
                                  currentState.value = val;
                              //else if(addressType=='country')
                                //  currentCountry.value = val;
                              else if(addressType=='postal_code')
                                  currentPostcode.value = val;
                              
                              addressStr = addressStr + ' '+ val;
                            }
                          }
                          console.log('text: ' + $('#streetName').val());
                        
                          currentStreetAddress.value = '';
                          var actualAddress = $('#streetName').val().toUpperCase();
                        
                          if(actualAddress.indexOf(streetAddressStr.toUpperCase()) > 0)
                          {
                            var matchingIndex = actualAddress.indexOf(streetAddressStr.toUpperCase());
                            currentStreetAddress.value += actualAddress.substring(0, matchingIndex);
                          }
                        
                          currentStreetAddress.value += streetAddressStr;
                          console.log('addressStr: '+addressStr);
                          console.log('streetAdd: '+currentStreetAddress.value + ' suburb: '+currentSuburb.value+' state: '+currentState.value+' postcode: '+currentPostcode.value+' country: '+currentCountry.value);                               
                          console.log($('.currentStreetAddress').val());
                          console.log($('.currentSuburb').val());
                          console.log($('.currentState').val());
                          console.log($('.currentPostcode').val());
                          $('body').css('display','none');
                          updateAddressFunc($('.currentStreetAddress').val(),$('.currentSuburb').val(),$('.currentState').val(),$('.currentPostcode').val(),$('.currentCountry').val(),$('.currentLatitude').val(),$('.currentLongitude').val());
                    }else
                    {
                        bootbox.alert({
                            message: "Please select address from the google suggestions",
                            className: 'rubberBand animated'
                          });
                      return false;
                    }
                }else
                {
                    bootbox.alert({
                        message: "Please select address from the google suggestions",
                        className: 'rubberBand animated'
                      });
                  return false;
                }
                });  
          }else
          {
              console.log($('.currentStreetAddress').val());
              console.log($('.currentSuburb').val());
              console.log($('.currentState').val());
              console.log($('.currentPostcode').val());
              $('body').css('display','none');
              updateAddressFunc($('.currentStreetAddress').val(),$('.currentSuburb').val(),$('.currentState').val(),$('.currentPostcode').val(),$('.currentCountry').val(),$('.currentLatitude').val(),$('.currentLongitude').val());
          }                
      }
      else if(eventTarget.className.includes(`${DOMstrings.currentAddressNextBtnClass}`))
      {         
          if($('.lengthOfStayCurrent').val() == '')
          {
              bootbox.alert({
                message: "Please enter length of stay",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(!$.isNumeric($('.lengthOfStayCurrent').val()))
          {
              bootbox.alert({
                message: "Length of stay must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.residentialStatus').val() == '' || $('.residentialStatus').val() == '--Select Residential Status--')
          {
              bootbox.alert({
                message: "Please select residential status",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.landlordName').val() == '' && $('.residentialStatus').val() != 'Mortgage debt / Own outright (no debt)')
          {
              bootbox.alert({
                message: "Please enter contact name",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.landlordNumber').val() == '' && $('.residentialStatus').val() != 'Mortgage debt / Own outright (no debt)')
          {
              bootbox.alert({
                message: "Please enter contact number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {  
              console.log($('.lengthOfStayCurrent').val().trim());
              console.log($('.residentialStatus').val().trim()); 
              updateResidentialStatusFunc($('.lengthOfStayCurrent').val().trim(), $('.residentialStatus').val(), $('.landlordName').val(), $('.landlordNumber').val());   
          }           
      }
      else if(eventTarget.className.includes(`${DOMstrings.previousAddressNextBtnClass}`))
      {
          if($('.previousStreetAddress').val() != '' && ($('.previousSuburb').val() == '' || $('.previousState').val() == '' || $('.previousPostcode').val() == ''))
          {
              if($('.previousSuburb').val() == '')
              {
                  bootbox.alert({
                    message: "Please enter suburb",
                    className: 'rubberBand animated'
                  });
                  return false;
              }else if($('.previousState').val() == '')
              {
                  bootbox.alert({
                    message: "Please enter state",
                    className: 'rubberBand animated'
                  });
                  return false;
              }else if($('.previousPostcode').val() == '')
              {
                  bootbox.alert({
                    message: "Please enter postcode",
                    className: 'rubberBand animated'
                  });
                  return false;
              }
          }
          else if($('.txtPreviousAddress').val() != '' && $('.previousStreetAddress').val().toLowerCase() == '{!streetNameVal}'.toLowerCase() && $('.previousSuburb').val().toLowerCase() == '{!suburbVal}'.toLowerCase() && $('.previousState').val().toLowerCase() == '{!stateVal}'.toLowerCase() && $('.previousPostcode').val().toLowerCase() == '{!postalCodeVal}'.toLowerCase())
          {
              $('.previousStreetAddress').val('');
              $('.previousSuburb').val('');
              $('.previousState').val('');
              $('.previousPostcode').val('');
              $('.previousCountry').val('');
              $('.previousLatitude').val('');
              $('.previousLongitude').val('');
              
              bootbox.alert({
                message: "Previous address cannot be the same as current address",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.txtPreviousAddress').val() != '' && $('.lengthOfStayPrevious').val() == '')
          {
              bootbox.alert({
                message: "Please enter length of stay",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.txtPreviousAddress').val() != '' && !$.isNumeric($('.lengthOfStayPrevious').val()))
          {
              bootbox.alert({
                message: "Length of stay must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
              console.log($('.previousStreetAddress').val());
              console.log($('.previousSuburb').val());
              console.log($('.previousState').val());
              console.log($('.previousPostcode').val());
              activePanelNum=0;
              window.redirectToNextExpense = 'yes';
              updatePreviousAddressFunc($('.previousStreetAddress').val(),$('.previousSuburb').val(),$('.previousState').val(),$('.previousPostcode').val(),$('.previousCountry').val(),$('.previousLatitude').val(),$('.previousLongitude').val(),$('.lengthOfStayPrevious').val().trim());
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.dependentsNextBtnClass}`))
      {
          console.log('****');
          if($('.noOfDependents').val() == '')
          {
              bootbox.alert({
                message: "Please enter number of dependents",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(!$.isNumeric($('.noOfDependents').val()))
          {
              bootbox.alert({
                message: "Number of dependents has to be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.maritalStatus').val() == '--Select Marital Status--')
          {
              bootbox.alert({
                message: "Please enter marital status",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
              updateDependentsFunc($('.noOfDependents').val(),$('.maritalStatus').val());
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.employmentAgreeNextBtnClass}`))
      {
          console.log('employmentAgree' + $('.employmentAgree').val() + $('.fnightlyEmployment').val());
          if($('.employmentAgree').val() != 'yes' && $('.employmentAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select yes or no",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employmentAgree').val() == 'no' && $('.fnightlyEmployment').val() == '')
          {
              bootbox.alert({
                message: "Please enter fortnightly pay",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employmentAgree').val() == 'no' && !$.isNumeric($('.fnightlyEmployment').val()))
          {
              bootbox.alert({
                message: "fortnightly pay must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else 
          {
              activePanelNum++;
              $('.fnightlyEmploymentManualDiv').css('display','none');
              if($('.employmentAgree').val() == 'no')
              {
                  $('.fnightlyEmploymentManual').val($('.fnightlyEmployment').val());
                  updateEmploymentIncomeFunc($('.fnightlyEmployment').val(),'no');
              }
              else
              {
                  $('.fnightlyEmploymentManual').val($('.mogoEmploymentVal').text().replaceAll(',','').substring(1));
                  updateEmploymentIncomeFunc($('.mogoEmploymentVal').text().replaceAll(',','').substring(1),'yes');
              }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.empincAgreeNextBtnClass}`))
      {
          console.log('employmentIncomeAgree' + $('.empincAgree').val());
          if($('.empincAgree').val() != 'yes' && $('.empincAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select yes or no",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.empincAgree').val() == 'no')
          {
              activePanelNum++;
              if('{!clinkBenefitsJSON}' == '')
              {
                  activePanelNum++;
              }
              else if('{!clinkBenefitsJSON}' != '')
              {
                  if(window.clinkBenefits.length > 0)
                  {
                      $('.cbenNameVal').text(window.clinkBenefits[window.clinkBenefitIndex].name);
                      $('.cbenMygovVal').text(window.clinkBenefits[window.clinkBenefitIndex].income);
                  }
              }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.employmentNextBtnClass}`))
      {
          if($('.fnightlyEmploymentManual').val() == '')
          {
              bootbox.alert({
                message: "Please enter your take home pay per fortnight",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(!$.isNumeric($('.fnightlyEmploymentManual').val()))
          {
              bootbox.alert({
                message: "Take home pay per fortnight must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employerName').val() == '')
          {
              bootbox.alert({
                message: "Please enter the name of the employer",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employmentType').val() == '' || $('.employmentType').val() == '--Select--')
          {
              bootbox.alert({
                message: "Please select employment type",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employmentDate').val() == '')
          {
              bootbox.alert({
                message: "Please enter employment commencement date",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.employmentDate').val() != '' && !validateDate($('.employmentDate').val()))
          {
              bootbox.alert({
                message: "Please enter valid employment commencement date",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
              if('{!clinkBenefitsJSON}' == '')
              {
                  activePanelNum++;
              }
              else if('{!clinkBenefitsJSON}' != '')
              {
                  if(window.clinkBenefits.length > 0)
                  {
                      $('.cbenNameVal').text(window.clinkBenefits[window.clinkBenefitIndex].name);
                      $('.cbenMygovVal').text(window.clinkBenefits[window.clinkBenefitIndex].income);
                  }
              }
              updateEmploymentFunc($('.fnightlyEmploymentManual').val(),$('.employerName').val(),$('.employmentType').val(),$('.employmentDate').val());
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.cbenAgreeNextBtnClass}`))
      {
          console.log('cbenAgree' + $('.cbenAgree').val() + $('.cbenManualVal').val());
          if($('.cbenAgree').val() != 'yes' && $('.cbenAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select yes or no",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.cbenAgree').val() == 'no' && $('.cbenManualVal').val() == '')
          {
              bootbox.alert({
                message: "Please enter fortnightly amount",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.cbenAgree').val() == 'no' && !$.isNumeric($('.cbenManualVal').val()))
          {
              bootbox.alert({
                message: "fortnightly amount must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else 
          {
              var currentCbenIndex = window.clinkBenefitIndex;
              var currentCbenName = window.clinkBenefits[window.clinkBenefitIndex].name;
              var currentCbenIncome = window.clinkBenefits[window.clinkBenefitIndex].income;
              
              if(window.clinkBenefitIndex + 1 >= window.clinkBenefits.length)
              {
                  activePanelNum = activePanelNum + 3;
              }else
              {
                  window.clinkBenefitIndex = window.clinkBenefitIndex + 1;
                  activePanelNum--;
                  $('.cbenAgree').val('');
                  $('.cbenManualDiv').css('display','none');
                  $('.cbenManualVal').val('');
                  $('.cbenAgreeNo').removeClass('bg-success');
                  $('.cbenAgreeNo').addClass('bg-secondary');
                  $('.cbenAgreeYes').removeClass('bg-success');
                  $('.cbenAgreeYes').addClass('bg-secondary');
                  $('.cbenNameVal').text(window.clinkBenefits[window.clinkBenefitIndex].name);
                  $('.cbenMygovVal').text(window.clinkBenefits[window.clinkBenefitIndex].income);
              }
              
              if($('.cbenAgree').val() == 'no')
              {
                  currentCbenIncome = $('.cbenManualVal').val();
                  $('.cbenAgree').val('');
                  $('.cbenManualDiv').css('display','none');
                  $('.cbenManualVal').val('');
                  $('.cbenAgreeNo').removeClass('bg-success');
                  $('.cbenAgreeNo').addClass('bg-secondary');
                  $('.cbenAgreeYes').removeClass('bg-success');
                  $('.cbenAgreeYes').addClass('bg-secondary');
                  updateCentrelinkBenefitFunc(currentCbenIndex,currentCbenName,currentCbenIncome,'no');
              }
              else
              {
                  $('.cbenAgree').val('');
                  $('.cbenManualDiv').css('display','none');
                  $('.cbenManualVal').val('');
                  $('.cbenAgreeNo').removeClass('bg-success');
                  $('.cbenAgreeNo').addClass('bg-secondary');
                  $('.cbenAgreeYes').removeClass('bg-success');
                  $('.cbenAgreeYes').addClass('bg-secondary');
                  updateCentrelinkBenefitFunc(currentCbenIndex,currentCbenName,currentCbenIncome,'yes');
              }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.cbenincAgreeNextBtnClass}`))
      {
          console.log('cbenIncomeAgree' + $('.cbenincAgree').val());
          if($('.cbenincAgree').val() != 'yes' && $('.cbenincAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select yes or no",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.cbenincAgree').val() == 'no')
          {
              activePanelNum = activePanelNum + 2;
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.clinkbenNextBtnClass}`))
      {
          var clinkBenefitsSelected = String($('.clinkBenefitsSelected').val());
          console.log('****' + clinkBenefitsSelected);

          if(clinkBenefitsSelected == '')
          {
              bootbox.alert({
                message: "Please select the benefits you receive",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(clinkBenefitsSelected.split(",").length > 4)
          {
              bootbox.alert({
                message: "You cannot select more than 4 benefits",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {            
              for(var i=0; i<clinkBenefitsSelected.split(",").length; i++)
              {
                  var newBenefit = {name : clinkBenefitsSelected.split(",")[i], income : 0};
                  window.clinkBenefits.push(newBenefit);
              }
              $('.clinkBenefitName').text(window.clinkBenefits[0].name);
              window.clinkBenefitIndex = 0;
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.clinkNextBtnClass}`))
      {
          if($('.clinkBenefitVal').val() == '')
          {
              bootbox.alert({
                message: "Please enter the amount you recieve per fortnight?",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(!$.isNumeric($('.clinkBenefitVal').val()))
          {
              bootbox.alert({
                message: "fortnightly amount must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
              var currentCbenIndex = window.clinkBenefitIndex;
              var currentCbenName = window.clinkBenefits[window.clinkBenefitIndex].name;
              var currentCbenIncome = $('.clinkBenefitVal').val();
              window.clinkBenefitIndex++;
              if(window.clinkBenefitIndex < window.clinkBenefits.length)
              {
                  activePanelNum--;
                  $('.clinkBenefitName').text(window.clinkBenefits[window.clinkBenefitIndex].name);
                  $('.clinkBenefitVal').val('');
              }
              updateCentrelinkBenefitFunc(currentCbenIndex,currentCbenName,currentCbenIncome,'man');
          }  
      }
      else if(eventTarget.className.includes(`${DOMstrings.otherincAgreeNextBtnClass}`))
      {
        if(parseFloat('{!otherInc}') > 0){
            if($('.otherIncAgree').val() != 'yes' && $('.otherIncAgree').val() != 'no')
            {
                bootbox.alert({
                    message: "Please select yes or no",
                    className: 'rubberBand animated'
                });
                return false;
            }else if($('.otherIncAgree').val() == 'no' && $('.fnightlyOtherInc').val() == '')
            {
                bootbox.alert({
                    message: "Please enter fortnightly other income",
                    className: 'rubberBand animated'
                });
                return false;
            }
            else if($('.otherIncAgree').val() == 'no' && !$.isNumeric($('.fnightlyOtherInc').val()))
            {
                bootbox.alert({
                    message: "fortnightly amount must be a number",
                    className: 'rubberBand animated'
                });
                return false;
            }else if($('.otherIncAgree').val() == 'no')
            {
                if(parseFloat($('.fnightlyOtherInc').val()) <= 0 && parseInt('{!externalTransferTransactionCount}') > 0){
                    activePanelNum = activePanelNum + 3;
                }else if(parseFloat($('.fnightlyOtherInc').val()) <= 0 && parseInt('{!externalTransferTransactionCount}') <= 0){
                    window.redirectToNextExpense = 'yes';
                    $('.fixed-bottom').css('display','none');
                    activePanelNum = 0;
                }
                confirmOtherIncomeFunc($('.fnightlyOtherInc').val(),'no');
            }
            else
            {
                confirmOtherIncomeFunc($('.otherIncVal').text().replaceAll(',','').substring(1),'yes');
            }
        }else{
            if($('.otherincAgree').val() != 'yes' && $('.otherincAgree').val() != 'no')
            {
                bootbox.alert({
                    message: "Please select yes or no",
                    className: 'rubberBand animated'
                });
                return false;
            }
            else if($('.otherincAgree').val() == 'no')
            {
                if(parseInt('{!externalTransferTransactionCount}') > 0){
                    activePanelNum = activePanelNum + 3;
                }else{
                    window.redirectToNextExpense = 'yes';
                    $('.fixed-bottom').css('display','none');
                    activePanelNum = 0;
                }
                updateOtherIncomeFunc('0','','');
            }
        }
      }
      else if(eventTarget.className.includes(`${DOMstrings.incomeOtherNextBtnClass}`))
      {
          if($('.incomeOtherSourceSelected').val() == '' || $('.incomeOtherSourceSelected').val() == '--Select source of income--')
          {
              bootbox.alert({
                message: "Please select the source of your other income",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.incomeOtherSourceSelected').val() == 'Other' && $('.incomeOtherSource').val() == '')
          {
              bootbox.alert({
                message: "Please enter the source of your other income",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(parseFloat('{!otherInc}') <= 0 && $('.fnightlyIncomeOther').val() == '')
          {
              bootbox.alert({
                message: "Please enter your other fortnightly income",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(parseFloat('{!otherInc}') <= 0 && !$.isNumeric($('.fnightlyIncomeOther').val()))
          {
              bootbox.alert({
                message: "fortnightly amount must be a number",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
            if($('.incomeOtherSourceSelected').val() == 'Other')
            {
                window.redirectToNextExpense = 'no';
                updateOtherIncomeFunc(parseFloat('{!otherInc}') <= 0 ? $('.fnightlyIncomeOther').val() : parseFloat('{!otherInc}'),'Other - ' + $('.incomeOtherSource').val(),$('.incomeOtherVerify').val());
            }else
            {
                window.redirectToNextExpense = 'no';
                updateOtherIncomeFunc(parseFloat('{!otherInc}') <= 0 ? $('.fnightlyIncomeOther').val() : parseFloat('{!otherInc}'),$('.incomeOtherSourceSelected').val(),$('.incomeOtherVerify').val());
            }
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.boardingAgreeNextBtnClass}`))
      {
          console.log('boardingAgree' + $('.boardingAgree').val());
          if($('.boardingAgree').val() != 'yes' && $('.boardingAgree').val() != 'no')
          {
              bootbox.alert({
                message: "Please select yes or no",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if($('.boardingAgree').val() == 'no')
          {
            if(parseInt('{!externalTransferTransactionCount}') > 0){
                activePanelNum = activePanelNum + 1;
            }else{
                activePanelNum = 0;
                $('.fixed-bottom').css('display','none');
                var redirectURL = (onlineURL +'/R4KIncomeExpenseSummaryOnline?id='+acctId+'&param=incsum&n='+Math.random());
                window.location.href = redirectURL;
            }  
          }
      }
      else if(eventTarget.className.includes(`${DOMstrings.incomeOtherSharingNextBtnClass}`))
      {
          console.log('****');
          if($('.incomeOtherSharingName').val() == '')
          {
              bootbox.alert({
                message: "Please enter full name of the person that can confirm your other income activity",
                className: 'rubberBand animated'
              });
              return false;
          }
          else if(!IsMobileNumber($('.incomeOtherSharingNumber').val()))
          {
                bootbox.alert({
                    message: "Please enter a valid Mobile No. No spaces allowed and number should start from 0.",
                    className: 'rubberBand animated'
                });
                return false;
          }
          else if($('.incomeOtherSharingRelation').val() == '--Select Relationship to you--')
          {
              bootbox.alert({
                message: "Please select relationship with the person that can confirm your other income activity",
                className: 'rubberBand animated'
              });
              return false;
          }
          else
          {
            if(parseInt('{!externalTransferTransactionCount}') <= 0){
                window.redirectToNextExpense = 'yes';
                activePanelNum = 0;
                $('.fixed-bottom').css('display','none');
            }
            updateBoardingIncomeFunc($('.incomeOtherSharingName').val(),$('.incomeOtherSharingNumber').val(),$('.incomeOtherSharingRelation').val(),$('.incomeOtherSharingContact').prop("checked") ? 'yes' : 'no',$('.incomeOtherSharingReferee').prop("checked") ? 'yes' : 'no');
          }
      }else if(eventTarget.className.includes(`${DOMstrings.transferRelationshipNextBtnClass}`))
      {
        var transferRelationship = '';
        var checkedCount = 0;
        var transferCheckboxes = document.getElementsByClassName('transferRelationship');
        console.log('****'+transferCheckboxes.length);
        for(var i=0; i<transferCheckboxes.length; i++)
        {
            if(transferCheckboxes[i].checked)
            {
                transferRelationship += $('.transferRelationship' + (i+1) + 'val').text();
                if($('.transferRelationship' + (i+1) + 'val').text().trim() == 'Other'){
                    transferRelationship += (' - ' + $('.transferRelationshipOther').val());    
                }
                transferRelationship += '; ';
                checkedCount++;
            }
        }

        if(checkedCount == 0)
        {
            bootbox.alert({
                message: "Please select relationship of the transfer ",
                className: 'rubberBand animated'
            });
            return false;
        }
        if($('.transferRelationshipOtherCheckbox').prop('checked') && $('.transferRelationshipOther').val() == '')
        {
            bootbox.alert({
                message: "Please provide an explanation of financial information",
                className: 'rubberBand animated'
            });
            return false;
        }
        activePanelNum = 0;
        window.redirectToNextExpense = 'yes';
        $('.fixed-bottom').css('display','none');
        updateTransferRelationshipFunc(transferRelationship);
      }else if(eventTarget.className.includes(`${DOMstrings.financialTermsNextBtnClass}`))
      {
        var checkedCount = 0;
        var finTermsCheckboxes = document.getElementsByClassName('finTerms');
        console.log('****'+finTermsCheckboxes.length);
        for(var i=0; i<finTermsCheckboxes.length; i++)
        {
            if(finTermsCheckboxes[i].checked)
            {
                checkedCount++;
            }
        }

        if(checkedCount < 6)
        {
            /*
            bootbox.confirm({
                message: 'Your application will be declined as you do not meet our assessment criteria. Do you want to proceed?',
                buttons: {
                    confirm: {
                        label: 'Yes',
                        className: 'btn-success'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-danger'
                    }
                },
                callback: function (result) {
                    console.log('This was logged in the callback: ' + result);
                    if(result){
                        activePanelNum = 0;
                        $('.fixed-bottom').css('display','none');
                        acceptPOATermsFunc($(finTermsCheckboxes[0]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[1]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[2]).prop('checked') ? 'yes' : 'no');
                    }else{
                        activePanelNum--;
                    }
                }
            });
            
            bootbox.prompt('Please enter DECLINE in the text box to decline the terms or click cancel to accept the terms',
                function(result) {
                    if(result != null && result != undefined && result.toLowerCase() == 'decline'){
                        activePanelNum = 0;
                        $('.fixed-bottom').css('display','none');
                        acceptPOATermsFunc($(finTermsCheckboxes[0]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[1]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[2]).prop('checked') ? 'yes' : 'no');
                    }else{
                        activePanelNum--;
                    }
            });
            */
            bootbox.prompt({
                title: 'Assessment in Progress',                
                message: '<p>Please enter <b>DECLINE</b> in the text box to decline the terms or click cancel to accept the terms</p>',
                                centerVertical: true,
                                callback: function(result) {
                                    if(result != null && result != undefined && result.toLowerCase() == 'decline'){
                                        activePanelNum = 0;
                                        $('.fixed-bottom').css('display','none');
                                        acceptPOATermsFunc($(finTermsCheckboxes[0]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[1]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[2]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[3]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[4]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[5]).prop('checked') ? 'yes' : 'no');
                                    }else{
                                        activePanelNum--;
                                    }
                                }
            });
            return false;
        }else{
            activePanelNum = 0;
            $('.fixed-bottom').css('display','none');
            acceptPOATermsFunc($(finTermsCheckboxes[0]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[1]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[2]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[3]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[4]).prop('checked') ? 'yes' : 'no', $(finTermsCheckboxes[5]).prop('checked') ? 'yes' : 'no');
        }
      }
      else
      {
          var dateRep,dobFormat;
          if(dob!=null && dob!='')
          {
              dateRep = dob.replace('/','-').replace('/','-');
              dobFormat = dateRep.split("-").reverse().join("-");
          }
          
          if(eventTarget.className.includes(`${DOMstrings.compProcessBtnClass}`))
              finishProcess();
          else if(!eventTarget.className.includes(`${DOMstrings.bankPrevBtnClass}`) && !eventTarget.className.includes(`${DOMstrings.mygovPrevBtnClass}`) && !eventTarget.className.includes(`${DOMstrings.myGovNextBtnClass}`))
          {
              //updateRecord(firstName,lastName,phone,email,genderTyp,streetName,suburb,state,postalCode,countryV,latV,lngV,dobFormat,idTyp,idTypeOther,driverLicence,hasProvidedConsent,'',addEqRentalDefaults,addEqNonRentalDefaults,addComments,hdnCurrentPageVal);
          }
      }
  }

  setActivePanel(activePanelNum);

});

//SETTING PROPER FORM HEIGHT ONLOAD
window.addEventListener('load', setFormHeight, false);

//SETTING PROPER FORM HEIGHT ONRESIZE
window.addEventListener('resize', setFormHeight, false);

function openBank(bankVal)
{
    var bankUrl = "{!urlBankSt}";
    var myGovUrl = "{!urlMyGov}";
    if(bankVal=='bs')
    {
        window.open(bankUrl, '_blank');
    }
    else if(bankVal=='mg')
    {
        window.open(myGovUrl, '_blank');
    }
}

function initAutocomplete() {
    console.log('****currentStreetAddress****');
    autocomplete = new google.maps.places.Autocomplete(
      document.getElementsByClassName("txtCurrentAddress")[0], {types: ['geocode'],componentRestrictions: {country: countryVal}});
    
    autocomplete.setFields(['address_component']);
    autocomplete.addListener('place_changed', fillInAddress1);
    
    console.log('****previousStreetAddress****');
    autocomplete2 = new google.maps.places.Autocomplete(
      document.getElementsByClassName("txtPreviousAddress")[0], {types: ['geocode'],componentRestrictions: {country: countryVal}});
    
    autocomplete2.setFields(['address_component']);
    autocomplete2.addListener('place_changed', fillInAddress2);
}

function fillInAddress1() {
  console.log(this);
  var place = autocomplete.getPlace();
  var addressStr = '';
  var streetAddressStr = '';

  for (var i = 0; i < place.address_components.length; i++) {
    var addressType = place.address_components[i].types[0];
    console.log(addressType);
    console.log(place.address_components[i]);
    //alert(addressType);
    if (componentForm[addressType]) {
      var val = place.address_components[i][componentForm[addressType]];
      console.log(val);
      if(addressType=='street_number')
      {
          streetAddressStr = streetAddressStr + val;
      }
      else if(addressType=='route')
      {
          streetAddressStr = streetAddressStr + ' '+val;
      }
      else if(addressType=='locality')
      {
          currentSuburb.value = val;
      }
      else if(addressType=='administrative_area_level_1')
      {
          currentState.value = val;
      }
      else if(addressType=='country')
      {
          currentCountry.value = val;
      }
      else if(addressType=='postal_code')
      {
          currentPostcode.value = val;
      }
      addressStr = addressStr + ' '+ val;
    }
  }

  currentStreetAddress.value = '';

  currentStreetAddress.value += streetAddressStr;
  console.log('addressStr: '+addressStr);
  console.log('streetAdd: '+currentStreetAddress.value + ' suburb: '+currentSuburb.value+' state: '+currentState.value+' postcode: '+currentPostcode.value+' country: '+currentCountry.value);
  
  var geocoder = new google.maps.Geocoder;
    geocoder.geocode({'address': addressStr}, function(results, status) {
        if(status === 'OK') 
        {
            if(results[0])
            {
                currentLatitude.value = results[0].geometry.location.lat();
                currentLongitude.value = results[0].geometry.location.lng(); 
                console.log('LatLng: '+currentLatitude.value+' *** '+currentLongitude.value);          
            }
        }else
        {
        
        }
    });
    window.addressPanel = 'current';
}

function fillInAddress2() {
  var place = autocomplete2.getPlace();
  var addressStr = '';
  var streetAddressStr = '';

  for (var i = 0; i < place.address_components.length; i++) {
    var addressType = place.address_components[i].types[0];
    //alert(addressType);
    if (componentForm[addressType]) {
      var val = place.address_components[i][componentForm[addressType]];
      console.log(addressType+" *** "+val);
      if(addressType=='street_number')
      {
          streetAddressStr = streetAddressStr + val;
      }
      else if(addressType=='route')
      {
          streetAddressStr = streetAddressStr + ' '+val;
      }
      else if(addressType=='locality')
      {
          previousSuburb.value = val;
      }
      else if(addressType=='administrative_area_level_1')
      {
          previousState.value = val;
      }
      else if(addressType=='country')
      {
          previousCountry.value = val;
      }
      else if(addressType=='postal_code')
      {
          previousPostcode.value = val;
      }
      addressStr = addressStr + ' '+ val;
    }
  }

  previousStreetAddress.value = '';

  previousStreetAddress.value += streetAddressStr;
  console.log('addressStr: '+addressStr);
  console.log('streetAdd: '+previousStreetAddress.value + ' suburb: '+previousSuburb.value+' state: '+previousState.value+' postcode: '+previousPostcode.value+' country: '+previousCountry.value);
  
  var geocoder = new google.maps.Geocoder;
    geocoder.geocode({'address': addressStr}, function(results, status) {
        if(status === 'OK') 
        {
            if(results[0])
            {
                previousLatitude.value = results[0].geometry.location.lat();
                previousLongitude.value = results[0].geometry.location.lng(); 
                console.log('LatLng: '+previousLatitude.value+' *** '+previousLongitude.value);          
            }
        }else
        {
        
        }
    });
    window.addressPanel = 'previous';
}

function IsMobileNumber(txtMobNo) {
    var mob = /^[0]{1}[0-9]{9}$/;
    if (mob.test(txtMobNo) == false) {
        //alert("Please enter valid mobile number.");
        return false;
    }
    return true;
}


function getSelectedEnquiryNames()
{
    enquiryNamesSelected = '';
    var checkboxes = document.getElementsByClassName('rowCheck');
    var enqCompanyNames = document.getElementsByClassName('enqCompanyName');
    for(var i=0;i<checkboxes.length;i++){
        if(checkboxes[i].checked == true)
        {
            //alert('true:'+i+' -- '+$(enqCompanyNames[i]).text());
            enquiryNamesSelected += $(enqCompanyNames[i]).text() + ' -- ';
        }
    }
    enquiryNamesSelected = enquiryNamesSelected!=null && enquiryNamesSelected!='' ? enquiryNamesSelected.substring(0, enquiryNamesSelected.length - 4) : '';
}

/*
function checkRowNonRental(elem)
{
    var index = $(elem).closest('tr').index();
    
    var nrdCompanyNames = document.getElementsByClassName('nrdCompanyName');
    var nrdButtons = document.getElementsByClassName('nrdButton');
    var nrdIds = document.getElementsByClassName('nrdId');
    var nrdNotesValues = document.getElementsByClassName('nrdNotes');
    for(var i=0;i<nrdCompanyNames.length;i++){
        if(i == index)
        {
            console.log($(nrdCompanyNames[i]).text());
            nrdCompanyName = nrdCompanyNames[i];
            nrdButton = nrdButtons[i];
            nrdId = nrdIds[i];
            nrdNotes = nrdNotesValues[i];
            
            $("#modalHeading").text("Provide Explanation - "+$(nrdCompanyName).text());
            $("#modalComments").val($(nrdNotes).text());
        }
    }
}

function addDefault()
{
    if($("#modalComments").val()==null || $("#modalComments").val()=='')
    {
        bootbox.alert({
            message: "Please add the default explanation",
            className: 'rubberBand animated'
            });
            return false;
    }
    else
    {
        if(typeof nrdButton !== 'undefined')
        {
            $(nrdButton).removeClass('btn-danger');
            $(nrdButton).addClass('btn-success');
            $(nrdButton).html('<i class="fas fa-check"></i>');
            $(nrdNotes).text($("#modalComments").val());
            $("#nrdModal").modal('toggle');
        }
        else if(typeof rdButton !== 'undefined')
        {
            $(rdButton).removeClass('btn-danger');
            $(rdButton).addClass('btn-success');
            $(rdButton).html('<i class="fas fa-check"></i>');
            $(rdNotes).text($("#modalComments").val());
            $("#nrdModal").modal('toggle');
        }
    }
}
*/

function addPreviousRefereeRecordFunc()
{
    var addRefNo = $(".addRfMobNo").val();
    var hdnRefId = $(".hdnRefId").val();
    alert(addRefNo+" - "+hdnRefId);
    if(hdnRefId!=null && hdnRefId!="" && addRefNo!=null && addRefNo!="")
        addPreviousRefereeRecord(hdnRefId,addRefNo);
}

function openPrevRefereeModal(obj)
{
    var pRefNo = $(obj).closest('tr').find(".pRefNo").text();
    var pRefId = $(obj).closest('tr').find(".pRefId").text();
    var pRefName = $(obj).closest('tr').find(".pRefName").text();
    //alert(pRefNo+" - "+pRefId);
    $(".addRfMobNo").val("");
    $(".hdnRefId").val("");
    $(".spnRefName").text("");
    $(".addRfMobNo").val(pRefNo);
    $(".hdnRefId").val(pRefId);
    $(".spnRefName").text(pRefName);
}

function getPrevRefsFunc(ele) {

 var values = new Array();
       //$.each($("input[name='rowPrevRefCheck[]']:checked").closest("td").siblings("td"),
       $.each($("input[name='rowPrevRefCheck[]']:checked").closest('tr').find(".pRefId"),
              function () {
                   values.push($(this).text());
              });
    
       //alert("val---" + values.join (","));
       prevRefIds= values.join (",");
 }

function displayAddButton()
{
    var className = $("#moreRefs").attr("class").trim();
    //alert(className);
    if(className=="collapse")
    {
        $(".addMoreRef").show();
    }
    else
    {
        $(".addMoreRef").hide();
    }
}

function ValidateDOB() {
        var dateString = $("#dob").val();
        var regex = /(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/;
         
        //Check whether valid dd/MM/yyyy Date Format.
        if (regex.test(dateString)) {
            /*var parts = dateString.split("/");
            var dtDOB = new Date(parts[1] + "/" + parts[0] + "/" + parts[2]);
            var dtCurrent = new Date();
            if (dtCurrent.getFullYear() - dtDOB.getFullYear() < 18) {
                alert("Eligibility 18 years ONLY.");
                return false;
            }
            else{
                return true;
            }*/
            return true;
        } else {
             bootbox.alert({
                message: "Enter date in dd/MM/yyyy format only.",
                className: 'rubberBand animated'
                });
             $("#dob").val("");
            return false;
        }
    }
    
function validateDate(dateString) {
        var regex = /(((0|1)[0-9]|2[0-9]|3[0-1])\/(0[1-9]|1[0-2])\/((19|20)\d\d))$/;
         
        //Check whether valid dd/MM/yyyy Date Format.
        if (regex.test(dateString)) {
            return true;
        } else {
            return false;
        }
    }

$(document).ready(
    function()
    {
        var idVal = "{!$CurrentPage.Parameters.ld}"; 
        var paramVal = "{!$CurrentPage.Parameters.param}";  
        console.log('idVal: '+idVal);      
        
        /*
        if("{!$CurrentPage.Parameters.cc}" == "")
        {
            var currentDate = new Date();
            window.open(window.location.href + '&cc=' + currentDate.getTime(),'_self');
        }
        */
        
        if("{!onlineLocationCaptured}" == "false")
        {        
            try
            {
                getLocation();
            }catch(err){
                console.log('****error ' + err.message);
            }
        }
        $("input.rowPrevRefCheck").click(getPrevRefsFunc);
        $(':input').removeAttr('placeholder');
        
        if(paramVal == "mygovaddrag" && ("{!mygovAddress}" == "" || "{!mygovAddress}".toLowerCase().search('po box') >= 0 || "{!mygovAddress}".toLowerCase().search('no fixed address') >= 0))
        {
            if("{!mogoAddress}" == "" || "{!mogoAddress}".toLowerCase().search('po box') >= 0 || "{!mogoAddress}".toLowerCase().search('no fixed address') >= 0)
            {
                redirectToRedo('addr');
            }else
            {
                redirectToRedo('bankaddrag');
            }
        }
        
        if(paramVal == "bankaddrag" && ("{!mogoAddress}" == "" || "{!mogoAddress}".toLowerCase().search('po box') >= 0 || "{!mogoAddress}".toLowerCase().search('no fixed address') >= 0))
        {
            redirectToRedo('addr');
        }
        
        if(paramVal == "alcoholag")
        {
            if(parseFloat('{!mogoAlcohol}') <= 0)
            {
                $('.alcoholAgreeDivs').css('display','none');
                $('.fnightlyAlcoholDiv').css('display','');
                $('.alcoholAgree').val('no');             
            }
        }
        
        if(paramVal == "insurag")
        {
            if(parseFloat('{!mogoInsurance}') <= 0)
            {
              $('.insurAgreeDivs').css('display','none');
              $('.fnightlyInsurDiv').css('display','');
              $('.insurAgree').val('no');
            }
        }
        
        if(paramVal == "creditag")
        {
            if(parseFloat('{!mogoCredit}') <= 0)
            {
              $('.creditAgreeDivs').css('display','none');
              $('.fnightlyCreditDiv').css('display','');
              $('.creditAgree').val('no');
            }
        }
        
        if(paramVal == "loanag")
        {
            if(parseFloat('{!mogoLoan}') <= 0)
            {
              $('.loanAgreeDivs').css('display','none');
              $('.fnightlyLoanDiv').css('display','');
              $('.loanAgree').val('no');
            }
        }
        
        if(paramVal == "orentalag")
        {
              if(parseFloat('{!mogoOtherRental}') <= 0)
              {
                  $('.orentalAgreeDivs').css('display','none');
                  $('.fnightlyorentalDiv').css('display','');
                  $('.orentalAgree').val('no');             
              }
        }
        
        if("{!onlineDeviceCaptured}" == "false" || ('{!acctId}' == '' || '{!acctId}' == 'null'))
        {
            try{
                $.ajax({
                    url: 'https://api.userstack.com/detect',
                    data: {
                        access_key: '728fddff7b1ea4c8a54ed4c6b7226004',
                        ua: navigator.userAgent
                    },
                    dataType: 'jsonp',
                    success: function(json) {
                        console.log(json); 
                        window.deviceInfo = (json.device.brand + ' | ' + json.device.name+ ' | ' + json.device.type + ' | ' + json.browser.name + ' - ' + json.browser.version);
                        if("{!onlineDeviceCaptured}" == "false"){
                            saveDeviceInfoFunc(json.device.brand, json.device.name, json.device.type, json.browser.name + ' - ' + json.browser.version);                
                        }
                    }
                });
            }catch(err){
                console.log('****error ' + err.message);
            }
        }
        if('{!consentPending}' == 'true'){
            $('.consent__progress-btn').addClass('js-danger');
            $('.consentNavLink').css('color','#BFBFBF');
        }else{
            $('.consent__progress-btn').addClass('js-success');
        }

        if('{!productPending}' == 'true'){
            $('.product__progress-btn').addClass('js-danger');
            $('.productNavLink').css('color','#BFBFBF');
        }else{
            $('.product__progress-btn').addClass('js-success');
        }

        if('{!unsuitabilityPending}' == 'true'){
            $('.unsuitability__progress-btn').addClass('js-danger');
            $('.unsuitabilityNavLink').css('color','#BFBFBF');
        }else{
            $('.unsuitability__progress-btn').addClass('js-success');
        }
        
        if('{!documentsPending}' == 'true'){
            $('.documents__progress-btn').addClass('js-danger');
            $('.docsNavLink').css('color','#BFBFBF');
        }else{
            $('.documents__progress-btn').addClass('js-success');
        }
        
        if('{!assessmentPending}' == 'true'){
            $('.assessment__progress-btn').addClass('js-danger');
            $('.assessNavLink').css('color','#BFBFBF');
        }else{
            $('.assessment__progress-btn').addClass('js-success');
        }
        
        if('{!signingPending}' == 'true'){
            $('.signing__progress-btn').addClass('js-danger');
            $('.signingNavLink').css('color','#BFBFBF');
        }else{
            $('.signing__progress-btn').addClass('js-success');
        }
        
        if('{!deliveryPending}' == 'true'){
            $('.delivery__progress-btn').addClass('js-danger');
            $('.deliveryNavLink').css('color','#BFBFBF');
        }else{
            $('.delivery__progress-btn').addClass('js-success');
        }
        
        var mainContentDiv = document.getElementsByClassName("mainContent")[0];
        mainContentDiv.addEventListener("click", closeNav, false);
        $('.fixed-bottom-callback').css('display','none');
        if((('{!$CurrentPage.parameters.param}' == 'sdid' || ('{!$CurrentPage.parameters.param}' == '' && '{!nextOnlineStepParam}' == 'sdid')) && '{!hasAddedPhotoId}' == 'false') || ('{!$CurrentPage.parameters.param}' == 'sdidb' && '{!hasAddedPhotoIdBack}' == 'false') || '{!$CurrentPage.parameters.param}' == 'reqdoc'){
            $('.fixed-bottom').css('display','none');
            if('{!$CurrentPage.parameters.param}' == 'reqdoc'){
                $('.fixed-bottom-callback').css('display','');
            }
        }else{
            $('.fixed-bottom').css('display','');
            $('.fixed-bottom-callback').css('display','none');
        }
        
        if('{!$CurrentPage.parameters.param}' == 'callback')
        {
            $('.mainBtn').text('FINISH');
        }
        
        if('{!$CurrentPage.parameters.param}' == 'sdidd')
        {
            $('.idType').val(('{!idType}' == 'Driver Licence' ? 'Driver License' : '{!idType}'));
        }
        
        if('{!isFollowUpRequired}' == 'true' && ('{!acctId}' == 'null' || '{!acctId}' == '')){
            $('.fixed-bottom').css('display','none');
        }
        
        if(('{!leadConsentVal}' == 'false' || '{!nextOnlineStepParam}' == 'cguide') && (ldId != 'null' && ldId != '')){
            $('body').css('display','none');
            window.location.href = (onlineURL +'/R4KCreditGuide?ld=' + ldId + '&n=' + Math.random());
        }

        if('{!nextOnlineStepParam}' == 'rando' && (ldId != 'null' && ldId != '')){
            $('body').css('display','none');
            window.location.href = (onlineURL +'/R4KProductSummary?ld=' + ldId + '&n=' + Math.random());
        }

        if('{!nextOnlineStepParam}' == 'completed' && (acctId != 'null' && acctId != '')){
            $('body').css('display','none');
            window.location.href = (onlineURL +'/R4KPUACompletion?id=' + acctId + '&n=' + Math.random());
        }

        if('{!nextOnlineStepParam}' == 'approved' && (acctId != 'null' && acctId != '')){
            $('body').css('display','none');
            window.location.href = (onlineURL +'/R4KPUAAcknowledgement?id=' + acctId + '&n=' + Math.random());
        }

        if('{!nextOnlineStepParam}' == 'declined' && (acctId != 'null' && acctId != '')){
            $('body').css('display','none');
            window.location.href = (onlineURL +'/R4KPUADeclined?id=' + acctId + '&n=' + Math.random());
        }
        
        if('{!$CurrentPage.parameters.param}' == '')
        {
            console.log('{!nextOnlineStepParam}');
            $('.multisteps-form__panel').removeClass('js-active');
            if('{!nextOnlineStepParam}' == '' && '{!isFollowUpRequired}' == 'false')
            {        
                $('.reqdocPanel').addClass('js-active');  
                $('.fixed-bottom').css('display','none');
                $('.fixed-bottom-callback').css('display','');
                $('.mainBtn').text('PROCEED');
            }else
            {
                if('{!nextOnlineStepParam}' == 'expsum' || '{!nextOnlineStepParam}' == 'incsum' || '{!nextOnlineStepParam}' == 'sursum')
                {
                    window.location.href = (onlineURL +'/R4KIncomeExpenseSummaryOnline?id='+acctId+'&param=' + '{!nextOnlineStepParam}' + '&n='+Math.random());
                }
                else if('{!nextOnlineStepParam}' == 'reqdoc')
                {
                    $('.fixed-bottom').css('display','none');
                    $('.fixed-bottom-callback').css('display','');
                    $('.mainBtn').text('PROCEED');
                } 
                $('.' + '{!nextOnlineStepParam}' + 'Panel').addClass('js-active');
            }
        }
    }
);

function onChangeSharingName(elem,classSelector)
{
    $(classSelector).text($(elem).val());
}

function initializeForm()
{
    /*
    if('{!residentialStatus}' != '')
    {
        $('.residentialStatus').val('{!residentialStatus}');   
    }
    */
    toggleResidentialContact();
}

function toggleResidentialContact(){
    if($('.residentialStatus').val() != 'Mortgage debt / Own outright (no debt)'){
            $('.landlordDetails').css('display','');
    }else{
        $('.landlordDetails').css('display','none');
    }
}

initializeForm();

window.finalIncome = 'no';
window.employmentIncome = 'no';
window.clinkIncome = 'no';
window.otherIncome = 'no';
window.boardingIncome = 'no';
window.clinkBenefits = [];
window.clinkBenefitIndex = 0;
if('{!clinkBenefitsJSON}' != '')
{
    window.clinkBenefits = JSON.parse('{!clinkBenefitsJSON}');
}
console.log(window.clinkBenefits);
$('.js-example-basic-multiple').select2();

function addIdentificationNo()
{
    var driverLicence = $("#driverLicence").val();
    $("#hdnIdValueptBack").val(driverLicence);
    //alert($("#hdnIdValueptBack").val());
}

function addIdentificationType()
{
    var idType = $("#idType").val();
    $("#hdnIdValuept").val(idType);
    //alert($("#hdnIdValuept").val());
}

function addIdentificationMiscValue(objVal)
{
    var passportCountry = $("#passportCountry").val();
    var otherPassportCountry = $("#otherPassportCountry").val();
    var driverLicenceState = $("#driverLicenceState").val()=='--Select State--' ? "" : $("#driverLicenceState").val();
    if(objVal=='state')
        $("#hdnIdMiscpt").val(driverLicenceState);
    else
    {
        if(passportCountry=="Other")
            $("#hdnIdMiscpt").val(otherPassportCountry);
        else
            $("#hdnIdMiscpt").val(passportCountry);
    }
}

function redirectToNextExpenseFunc(nextParam)
{
    console.log(window.redirectToNextExpense);
    if(window.redirectToNextExpense == 'yes')
    {
        if(nextParam != null && nextParam == 'sdcpa'){
            if('{!custPhotoAtt}' == 'null' || '{!custPhotoAtt}' == ''){
                var redirectURL = (onlineURL +'/R4KOnlineForm?id='+acctId+'&redo=yes&n='+Math.random() + (nextParam != null && nextParam != '' ? '&param='+nextParam : ''));
                window.location.href = redirectURL;
            }else{
                var redirectURL = (onlineURL +'/R4KOnlineForm?id='+acctId+'&redo=yes&n='+Math.random());
                window.location.href = redirectURL;
            }
        }else if(nextParam != null && (nextParam == 'expsum' || nextParam == 'incsum' || nextParam == 'sursum')){
            var redirectURL = (onlineURL +'/R4KIncomeExpenseSummaryOnline?id='+acctId+'&redo=yes&param=' + nextParam + '&n='+Math.random());
            window.location.href = redirectURL;
        }else{
            var redirectURL = (onlineURL +'/R4KOnlineForm?id='+acctId+'&redo=yes&n='+Math.random() + (nextParam != null && nextParam != '' ? '&param='+nextParam : ''));
            window.location.href = redirectURL;
        }
    }    
}

function redirectToRedo(nextParam)
{
    var randomNumber = Math.random();
    console.log('##redoValue: '+redo+" hasCompletedMyGovStatement: "+hasCompletedMyGovStatement+" mogoCentrelinkIncome: "+mogoCentrelinkIncome);
    //alert('##redoValue: '+redo+" hasCompletedMyGovStatement: "+hasCompletedMyGovStatement+" mogoCentrelinkIncome: "+mogoCentrelinkIncome+" nextParam: "+nextParam);
    if(redo=='yes')
    {
        if(nextParam == 'cuad' && window.addressPanel == 'current')
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=addressproof&redo=yes&n='+randomNumber;
            window.location.href = redirectURL;
        }else if(nextParam == 'cuad')
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=cuad&redo=yes&n='+randomNumber;
            window.location.href = redirectURL;
        }else if(nextParam == 'foodag')
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=foodag&redo=yes&n='+randomNumber;
            window.location.href = redirectURL;
        }else
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&redo=yes'+'&n='+randomNumber;
            if(hasCompletedMyGovStatement=="false" && mogoCentrelinkIncome>0)
            {
                redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdmg&redo=yes&n='+randomNumber;
                bootbox.confirm({
                    message: "We have noticed that you are receiving centrelink payments. Please add your myGov statement.",
                    callback: function (result) {
                        if(result==true)
                        {
                            window.location.href = redirectURL;
                        }
                        else
                        {
                            window.location.href = redirectURL;
                        }
                    }
                });
            }
            else
            {
                window.location.href = redirectURL;
            }
        }
    }
    else if(nextParam!=null && nextParam!='')
    {
        if(nextParam == 'cuad' && window.addressPanel == 'current')
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=addressproof&n='+randomNumber;
            window.location.href = redirectURL;
        }
        else
        {
            redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param='+nextParam+'&n='+randomNumber;
            if(hasCompletedMyGovStatement=="false" && mogoCentrelinkIncome>0)
            {
                redirectURL = onlineURL +'/R4KOnlineForm?id='+acctId+'&param=sdmg&redo=yes&n='+randomNumber;
                bootbox.confirm({
                    message: "We have noticed that you are receiving centrelink payments. Please add your myGov statement.",
                    callback: function (result) {
                        if(result==true)
                        {
                            window.location.href = redirectURL;
                        }
                        else
                        {
                            window.location.href = redirectURL;
                        }
                    }
                });
            }
            else
            {
                window.location.href = redirectURL;
            }
        }
        
    }
    else
        return false;
}

function addressProofToggle(addressProofSelection)
{
    var buttonInputIdName = $(".js-active").find(":button").attr('id');
    optionSelected = addressProofSelection;
    if(optionSelected=='no' && buttonInputIdName=='addressproofNext')
    {
        $(".mainBtn").html('Attach ID with Address Proof');
    }else
    {
        $(".mainBtn").html('Next');
    }
    console.log('****',addressProofSelection);
}

function getData()
{

}

function getLocation() 
{
    if(navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition,getData);
    }
}

function showPosition(position) 
{
    console.log(position.coords.latitude);
    console.log(position.coords.longitude);
    
    var geocoder = new google.maps.Geocoder;
    var latlng = {lat: position.coords.latitude, lng: position.coords.longitude};
    geocoder.geocode({'location': latlng}, function(results, status)
        {
            if(status === 'OK')
            {
                if(results[0])
                {
                    console.log(results[0].formatted_address,position.coords.latitude,position.coords.longitude);
                    saveLocationInfoFunc(results[0].formatted_address,position.coords.latitude,position.coords.longitude);
                }else{
                    console.log('No address found for the location');
                }
            }else{
                console.log('Geocoder failed due to: ' + status);
            }
        }
    ); 
}

function getSensis(addressString, addressTypeVal)
{
    var latVal,lngVal,streetVal,suburbVal,stateVal,postcodeval,countryVal,streetNumber,streetName,googleAddressStr;
    var geocoder = new google.maps.Geocoder;
    geocoder.geocode({'address': addressString}, function(results, status) {
    if(status === 'OK') 
    {
        if(results[0])
        {
            latVal = results[0].geometry.location.lat();
            lngVal = results[0].geometry.location.lng(); 

            streetVal = '';
            streetNumber = '';
            streetName = '';
            googleAddressStr = '';
            
            for (var i = 0; i < results[0].address_components.length; i++) {
                var addressType = results[0].address_components[i].types[0];
                //alert(addressType);
                if (componentForm[addressType]) {
                  var val = results[0].address_components[i][componentForm[addressType]];
                  console.log(addressType+" *** "+val);
                  if(addressType=='street_number')
                  {
                      streetVal = streetVal + val;
                      streetNumber = val;
                  }else if(addressType=='route')
                  {
                      streetVal = streetVal + ' '+val;
                      streetName = val;
                  }else if(addressType=='locality')
                  {
                      suburbVal = val;
                  }else if(addressType=='administrative_area_level_1')
                  {
                      stateVal = val;
                  }else if(addressType=='country')
                  {
                      countryVal = val;
                  }else if(addressType=='postal_code')
                  {
                      postcodeval = val;
                  }
                }
              }
              googleAddressStr = streetVal + ' ' + suburbVal + ' ' + stateVal + ' ' + postcodeval + ' ' + countryVal;
              console.log('addressString',addressString);
              console.log('googleAddressStr',googleAddressStr);
              console.log('streetVal',streetVal);
              console.log('streetNumber',streetNumber);
              console.log('suburbVal',suburbVal);
              //return [latVal,lngVal,streetVal,suburbVal,stateVal,postcodeval];
              
              if(streetNumber != '' && !addressString.toLowerCase().startsWith(streetVal.toLowerCase()))
              {
                  streetName = streetName.split(' ')[0];
                  console.log('streetName',streetName);
                  console.log('streetNumber',addressString.slice(0,addressString.toLowerCase().search(streetName.toLowerCase())));
                  console.log('streetType',streetVal.substring(streetVal.indexOf(streetName) + streetName.length));
                  
                  if(addressString.toLowerCase().search('po box') == 0)
                  {
                      if(addressString.toLowerCase().search(suburbVal.toLowerCase()) > 0)
                      {
                          streetVal = addressString.slice(0,addressString.toLowerCase().search(suburbVal.toLowerCase()));
                      }
                  }
                  else if(addressString.toLowerCase().search(streetName.toLowerCase()) > 0)
                  {
                      streetVal = addressString.slice(0,addressString.toLowerCase().search(streetName.toLowerCase())) + streetName + streetVal.substring(streetVal.indexOf(streetName) + streetName.length);
                  }
              }
              else if((streetVal == '' && suburbVal != '') || streetNumber == '')
              {
                  if(addressString.toLowerCase().search(suburbVal.toLowerCase()) > 0)
                  {
                      streetVal = addressString.slice(0,addressString.toLowerCase().search(suburbVal.toLowerCase()));
                  }else if(addressString.toLowerCase().search('community') >= 0)
                  {
                      streetVal = '';
                      //suburbVal = '';
                      for(var a=0; a<addressString.split(' ').length; a++)
                      {
                          if(addressString.split(' ')[a].toLowerCase() == 'community')
                          {
                              streetVal += (addressString.split(' ')[a] + ' ');
                              if(a+1 < addressString.split(' ').length)
                              {
                                  streetVal += addressString.split(' ')[a+1];
                              }
                              break;
                          }else
                          {
                              streetVal += (addressString.split(' ')[a] + ' ');
                          }
                      }
                  }
              }
              console.log('streetVal',streetVal);
              
              if(addressTypeVal == 'mygov')
              {
                  //activePanelNum = activePanelNum + 4;
                  $('body').css('display','none');
                  updateAddressFunc(streetVal,suburbVal,stateVal,postcodeval,countryVal,latVal,lngVal);                 
              }else if(addressTypeVal == 'bank')
              {
                  //activePanelNum = activePanelNum + 3;
                  $('body').css('display','none');
                  updateAddressFunc(streetVal,suburbVal,stateVal,postcodeval,countryVal,latVal,lngVal);
              }
        }else
        {
            if(addressTypeVal == 'mygov')
            {
                //activePanelNum++;  
            }else if(addressTypeVal == 'bank')
            {
              
            }
        }
    }else
    {
        if(addressTypeVal == 'mygov')
        {
            //activePanelNum++;  
        }else if(addressTypeVal == 'bank')
        {
          
        }      
    }
    }); 
}
window.addressPanel = '';

function redirectToCallback()
{
    window.open(onlineURL + '/R4KServiceEnquiry?ld={!ldId}&param=se&n='+Math.random(),'_self');
}

function navbarRedirect(param,canRedirect)
{
    var randomNumber = Math.random();
    if(canRedirect == 'true' && '{!acctId}' != 'null' && '{!acctId}' != '')
    {
        if(param == 'expsum' || param == 'incsum'){
            window.location.href = onlineURL +'/R4KIncomeExpenseSummaryOnline?param='+param+'&ld='+ldId+'&id='+acctId+'&redo=yes&n='+randomNumber;
        }else{
            window.location.href = onlineURL +'/R4KOnlineForm?param='+param+'&ld='+ldId+'&id='+acctId+'&redo=yes&n='+randomNumber;
        }
    }
}

function redirectToOtherDocs()
{
    var otherDocsURL = onlineURL + '/R4KOnlineOtherDocs?id=' + acctId+ '&ld=' + ldId + '&appType=online&n=' + Math.random();
    window.open(otherDocsURL,'_self');
}

function redirectToR4KChat()
{
    var randomNumber = Math.random();
    var redirectURL = onlineURL+'/R4KChatPage?appType=online&id='+acctId+'&ld='+ldId+'&n='+randomNumber;
    if(acctId!=null && acctId!="")
        redirectURL = onlineURL+'/R4KChatPage?appType=online&id='+acctId+'&n='+randomNumber;
    else if(ldId!=null && ldId!="")
        redirectURL = onlineURL+'/R4KChatPage?appType=online&ld='+ldId+'&n='+randomNumber;
    window.open(redirectURL,'_self');
}

function openNav() {
  document.getElementsByClassName("mySidebar")[0].style.width = "250px";
}

function closeNav() {
  document.getElementsByClassName("mySidebar")[0].style.width = "0";
}

function toggleDocsNavList(){
    if($('.docsNavList').css('display') != 'none'){
        $('.navList').css('display','none');    
    }else{
        $('.navList').css('display','none');
        $('.docsNavList').css('display','');
    }    
}
function toggleAssessNavList(){
    if($('.assessNavList').css('display') != 'none'){
        $('.navList').css('display','none');    
    }else{
        $('.navList').css('display','none');
        $('.assessNavList').css('display','');
    }    
}

function redirectToIdentityDetailsFunc()
{
    if(window.redirectToIdentityDetails == 'yes')
    {
        window.open('{!onlineURL}/R4KOnlineForm?id={!acctId}&ld={!ldId}&param=sdidd&n='+Math.random(),'_self');
    }else if(window.redirectToIdentityBack == 'yes')
    {
        window.open('{!onlineURL}/R4KOnlineForm?id={!acctId}&ld={!ldId}&param=sdidb&n='+Math.random(),'_self');
    }
}

function redirectToWebsite()
{
    window.open('https://www.r4k.com.au/products/','_self');
}

function uploadImage(docName) {
    var file,fieldVal;
    if(docName == 'Photo Id Front'){
        file = document.getElementsByClassName('photoIdFrontInput')[0].files[0];
        fieldVal = $(document.getElementsByClassName('photoIdFrontInput')[0]).val();
    }else if(docName == 'Photo Id Back'){
        file = document.getElementsByClassName('photoIdBackInput')[0].files[0];
        fieldVal = $(document.getElementsByClassName('photoIdBackInput')[0]).val();
    }
    var fileName, fileExtension;
    var mimeType = file.type;
    
    if (fieldVal != undefined || fieldVal != "") {
        var arr = fieldVal.split('\\');
        fileName = arr[arr.length - 1];
        fileExtension = fileName.substr((fileName.lastIndexOf('.') + 1));
    }
    //console.log('fileNameProvided',fileNameProvided);
    console.log('fieldVal',fieldVal);
    console.log('fileName',fileName);
    console.log('fileExtension',fileExtension);
        
    var reader = new FileReader();
    reader.readAsArrayBuffer(file);
    reader.onloadend = function() {
        var data = new Uint8Array(reader.result);
        var xhr = new XMLHttpRequest();
        var parentId = (acctId != null && acctId != '' ? acctId : (ldId != null && ldId != '' ? ldId : ''));
        var sfdcurl = '{!onlineURL}/services/apexrest/AddAttachment/v1?FileName=' + docName + '.' + fileExtension + '&cType=' + fileExtension + '&parId=' + parentId + '&ignoreIsAttached=false&coms=yes'; //sandbox
        xhr.open("POST", sfdcurl, true);
        xhr.setRequestHeader("X-Custom-Auth-Header","24E7A1C4BC4721E52A0612C4C75CB5B4275D69405D1E7AAEC619D4880B6FC71F");
        xhr.setRequestHeader("Content-Type", "application/octet-stream");
        xhr.onreadystatechange = function() {
            if(docName == 'Photo Id Front'){
                window.open('{!onlineURL}/R4KOnlineForm?id=' + acctId + '&ld=' + ldId + '&param=sdid&n='+Math.random(),'_self');
            }else if(docName == 'Photo Id Back'){
                window.open('{!onlineURL}/R4KOnlineForm?id=' + acctId + '&ld=' + ldId + '&param=sdidb&n='+Math.random(),'_self')
            }
        };
        setActivePanel(0);
        xhr.send(data);
    };
}

function moreThanThreeBusinessDays(startDate, endDate) {
  const oneDay = 24 * 60 * 60 * 1000; // One day in milliseconds
  let businessDays = 0;
  let currentDate = new Date(startDate.getTime());

  while (currentDate < endDate) {
    const dayOfWeek = currentDate.getDay();
    //if (dayOfWeek !== 0 && dayOfWeek !== 6) { // Exclude weekends
      businessDays++;
    //}
    currentDate.setTime(currentDate.getTime() + oneDay); // Move to the next day
  }
  console.log(businessDays);
  return businessDays > 3;
}


function continueToId(){
    $('.fixed-bottom-callback').css('display','none');
    $('.fixed-bottom').css('display','none');
      
    if('{!hasAddedPhotoId}' == 'true'){
        $('.fixed-bottom').css('display','');
    }
    
    $('.mainBtn').text('NEXT');
    console.log('****');
    $('.fixed-bottom').css('display','none');
    setActivePanel(3);
    updateApplicationLogsFunc('Required Documents',window.deviceInfo);
}

function finishLater(){
    $('.mainBtn').text('SUBMIT');
    $('.fixed-bottom').css('display','');
    $('.fixed-bottom-callback').css('display','none');
    setActivePanel(2);
}

function toggleTransferRelationship(elem){
    if($(elem).prop('checked')){
        $('.transferRelationshipOtherDiv').css('display','');
    }else{
        $('.transferRelationshipOtherDiv').css('display','none');
        $('.transferRelationshipOther').val('');
    }
}

window.redirectToIdentityDetails = 'no';
window.redirectToIdentityBack = 'no';
window.redirectToNextExpense = 'no';
window.sharedExpenseList = [];
window.sharedExpAmountList = [];
window.sharedExpenseDetailIndex = 0;

const stopScrollingBelowDiv = (div) => {
  window.addEventListener('scroll', () => {
    const divBottom = div.offsetTop + div.offsetHeight;
    if (window.pageYOffset > divBottom - window.innerHeight + 50) {
      window.scrollTo(0, divBottom - window.innerHeight + 50);
    }
  });
}

// Usage: Stop scrolling below the "myDiv" element
var lastDivs = document.getElementsByClassName('lastDiv');
if(lastDivs.length > 0){
    stopScrollingBelowDiv(lastDivs[0]);
}

window.deviceInfo = '';
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6IoNLUq0kEHUjf2X03l7ySFLAUqHoOSg&libraries=places,geometry&callback=initAutocomplete"></script>
</apex:page>